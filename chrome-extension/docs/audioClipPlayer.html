<!DOCTYPE html>  <html> <head>   <title>audioClipPlayer.js</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="plugins.html">                 plugins.js               </a>                                           <a class="source" href="web_plugins.html">                 web_plugins.js               </a>                                           <a class="source" href="alternate_style_tag_selector.html">                 alternate_style_tag_selector.js               </a>                                           <a class="source" href="audioClipPlayer.html">                 audioClipPlayer.js               </a>                                           <a class="source" href="epub.html">                 epub.js               </a>                                           <a class="source" href="epub_controller.html">                 epub_controller.js               </a>                                           <a class="source" href="ibooks_options_parser.html">                 ibooks_options_parser.js               </a>                                           <a class="source" href="manifest_item.html">                 manifest_item.js               </a>                                           <a class="source" href="mediaOverlay.html">                 mediaOverlay.js               </a>                                           <a class="source" href="options_presenter.html">                 options_presenter.js               </a>                                           <a class="source" href="packageDocument.html">                 packageDocument.js               </a>                                           <a class="source" href="package_document_parser.html">                 package_document_parser.js               </a>                                           <a class="source" href="page_number_display_logic.html">                 page_number_display_logic.js               </a>                                           <a class="source" href="pagination_strategy_selector.html">                 pagination_strategy_selector.js               </a>                                           <a class="source" href="path_resolver.html">                 path_resolver.js               </a>                                           <a class="source" href="readium_options.html">                 readium_options.js               </a>                                           <a class="source" href="readium_pagination.html">                 readium_pagination.js               </a>                                           <a class="source" href="smilModel.html">                 smilModel.js               </a>                                           <a class="source" href="toc.html">                 toc.js               </a>                                           <a class="source" href="trigger.html">                 trigger.js               </a>                                           <a class="source" href="validated_package_meta_data.html">                 validated_package_meta_data.js               </a>                                           <a class="source" href="crx_library_namespace.html">                 crx_library_namespace.js               </a>                                           <a class="source" href="crx_viewer_namespace.html">                 crx_viewer_namespace.js               </a>                                           <a class="source" href="ws_lib_namespace.html">                 ws_lib_namespace.js               </a>                                           <a class="source" href="crx_library_router.html">                 crx_library_router.js               </a>                                           <a class="source" href="crx_viewer_router.html">                 crx_viewer_router.js               </a>                                           <a class="source" href="ws_router.html">                 ws_router.js               </a>                                           <a class="source" href="bb_file_system_sync.html">                 bb_file_system_sync.js               </a>                                           <a class="source" href="cookie_utils.html">                 cookie_utils.js               </a>                                           <a class="source" href="handlebars_helpers.html">                 handlebars_helpers.js               </a>                                           <a class="source" href="local_storage_sync.html">                 local_storage_sync.js               </a>                                           <a class="source" href="md5.html">                 md5.js               </a>                                           <a class="source" href="user_agent_utils.html">                 user_agent_utils.js               </a>                                           <a class="source" href="nav_widget_view.html">                 nav_widget_view.js               </a>                                           <a class="source" href="options_view.html">                 options_view.js               </a>                                           <a class="source" href="toc_view.html">                 toc_view.js               </a>                                           <a class="source" href="toolbar_view.html">                 toolbar_view.js               </a>                                           <a class="source" href="httpFileApi.html">                 httpFileApi.js               </a>                                           <a class="source" href="library.html">                 library.js               </a>                                           <a class="source" href="viewer.html">                 viewer.js               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               audioClipPlayer.js             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre><span class="nx">Readium</span><span class="p">.</span><span class="nx">Models</span><span class="p">.</span><span class="nx">AudioClipPlayer</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    </pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>clip info</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">src</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">clipBegin</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">clipEnd</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    </pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>force the clip to reset its start time</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">forceReset</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    </pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>the html audio element created to hold whatever the current file is</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">elm</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Audio</span><span class="p">();</span>
    </pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>callback function</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">notifyClipDone</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    </pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>send debug statements to the console</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">consoleTrace</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    </pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>ID of the setInterval timer</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">intervalId</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    
    <span class="k">this</span><span class="p">.</span><span class="nx">setNotifyClipDone</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">notifyClipDoneFn</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">notifyClipDone</span> <span class="o">=</span> <span class="nx">notifyClipDoneFn</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setConsoleTrace</span> <span class="o">=</span>  <span class="kd">function</span><span class="p">(</span><span class="nx">isOn</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">consoleTrace</span> <span class="o">=</span> <span class="nx">isOn</span><span class="p">;</span>
    <span class="p">};</span>
    </pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>clipBeginTime and clipEndTime are in seconds
filesrc is an absolute path, local or remote</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">play</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">filesrc</span><span class="p">,</span> <span class="nx">clipBeginTime</span><span class="p">,</span> <span class="nx">clipEndTime</span><span class="p">,</span> <span class="nx">shouldForceReset</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">src</span> <span class="o">=</span> <span class="nx">filesrc</span><span class="p">;</span>
        <span class="nx">clipBegin</span> <span class="o">=</span> <span class="nx">clipBeginTime</span><span class="p">;</span>
        <span class="nx">clipEnd</span> <span class="o">=</span> <span class="nx">clipEndTime</span><span class="p">;</span>
        <span class="nx">forceReset</span> <span class="o">=</span> <span class="nx">shouldForceReset</span><span class="p">;</span>
        
        <span class="nx">debugPrint</span><span class="p">(</span><span class="s2">&quot;playing &quot;</span> <span class="o">+</span> <span class="nx">src</span> <span class="o">+</span> <span class="s2">&quot; from &quot;</span> <span class="o">+</span> <span class="nx">clipBegin</span> <span class="o">+</span> <span class="s2">&quot; to &quot;</span> <span class="o">+</span> <span class="nx">clipEnd</span><span class="p">);</span>
        </pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>make sure we haven't already created an element for this audio file</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">elm</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="nx">elm</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&quot;src&quot;</span><span class="p">)</span> <span class="o">!=</span> <span class="nx">src</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">loadData</span><span class="p">();</span>
        <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>the element is already loaded; just need to continue playing at the right point</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">else</span> <span class="p">{</span>
            <span class="nx">continueRender</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">};</span>
    
    <span class="k">this</span><span class="p">.</span><span class="nx">isPlaying</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">elm</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="o">!</span><span class="nx">elm</span><span class="p">.</span><span class="nx">paused</span><span class="p">;</span>
    <span class="p">};</span>
    
    <span class="k">this</span><span class="p">.</span><span class="nx">resume</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">elm</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">elm</span><span class="p">.</span><span class="nx">play</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">};</span>
    
    <span class="k">this</span><span class="p">.</span><span class="nx">pause</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">elm</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">elm</span><span class="p">.</span><span class="nx">pause</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">};</span>
    
    <span class="k">this</span><span class="p">.</span><span class="nx">setNotifyOnPause</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">notifyOnPause</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">elm</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;pause&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">notifyOnPause</span><span class="p">();</span>
        <span class="p">});</span>
    <span class="p">};</span>
    
    <span class="k">this</span><span class="p">.</span><span class="nx">setNotifyOnPlay</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">notifyOnPlay</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">elm</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;play&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">notifyOnPlay</span><span class="p">();</span>
        <span class="p">});</span>
    <span class="p">};</span>
    
    <span class="k">this</span><span class="p">.</span><span class="nx">getCurrentTime</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">elm</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">elm</span><span class="p">.</span><span class="nx">currentTime</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">getCurrentSrc</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">src</span><span class="p">;</span>
    <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>volume ranges from 0 to 1.0</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">setVolume</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">value</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">elm</span><span class="p">.</span><span class="nx">volume</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">value</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">elm</span><span class="p">.</span><span class="nx">volume</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
            <span class="nx">elm</span><span class="p">.</span><span class="nx">volume</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">};</span>
    <span class="kd">function</span> <span class="nx">loadData</span><span class="p">(){</span>
        <span class="nx">debugPrint</span><span class="p">(</span><span class="s2">&quot;Loading file &quot;</span> <span class="o">+</span> <span class="nx">src</span><span class="p">);</span>
        <span class="nx">elm</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;src&quot;</span><span class="p">,</span> <span class="nx">src</span><span class="p">);</span>
        </pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p>wait for 'canplay' before continuing</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">elm</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;canplay&quot;</span><span class="p">,</span> <span class="nx">setThisTime</span><span class="p">);</span>
        <span class="kd">function</span> <span class="nx">setThisTime</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">elm</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="s2">&quot;canplay&quot;</span><span class="p">,</span> <span class="nx">setThisTime</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>TODO put something in here for remote files to make sure the file is buffered</p>             </td>             <td class="code">               <div class="highlight"><pre>        
            <span class="k">if</span> <span class="p">(</span><span class="nx">clipEnd</span> <span class="o">&gt;</span> <span class="nx">elm</span><span class="p">.</span><span class="nx">duration</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">debugPrint</span><span class="p">(</span><span class="s2">&quot;File is shorter than specified clipEnd time&quot;</span><span class="p">);</span>
                <span class="nx">clipEnd</span> <span class="o">=</span> <span class="nx">elm</span><span class="p">.</span><span class="nx">duration</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">debugPrint</span><span class="p">(</span><span class="s2">&quot;Audio data loaded&quot;</span><span class="p">);</span>
            <span class="nx">continueRender</span><span class="p">();</span>        
        <span class="p">}</span>
        
        <span class="nx">elm</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;ended&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>cancel the timer, if any</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="k">if</span> <span class="p">(</span><span class="nx">intervalId</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">clearInterval</span><span class="p">(</span><span class="nx">intervalId</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">notifyClipDone</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">notifyClipDone</span><span class="p">();</span>
            <span class="p">}</span>
        <span class="p">});</span>
    <span class="p">}</span>
    
    <span class="kd">function</span> <span class="nx">continueRender</span><span class="p">()</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p>if the current time is already somewhere within the clip that we want to play, then just let it keep playing</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">forceReset</span> <span class="o">==</span> <span class="kc">false</span> <span class="o">&amp;&amp;</span> <span class="nx">elm</span><span class="p">.</span><span class="nx">currentTime</span> <span class="o">&gt;</span> <span class="nx">clipBegin</span> <span class="o">&amp;&amp;</span> <span class="nx">elm</span><span class="p">.</span><span class="nx">currentTime</span> <span class="o">&lt;</span> <span class="nx">clipEnd</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">startClipTimer</span><span class="p">();</span>
            <span class="nx">elm</span><span class="p">.</span><span class="nx">play</span><span class="p">();</span>    
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
            <span class="nx">elm</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;seeked&quot;</span><span class="p">,</span> <span class="nx">seeked</span><span class="p">);</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;setting currentTime from &quot;</span> <span class="o">+</span> <span class="nx">elm</span><span class="p">.</span><span class="nx">currentTime</span> <span class="o">+</span> <span class="s2">&quot;to &quot;</span> <span class="o">+</span> <span class="nx">clipBegin</span><span class="p">);</span>
            <span class="nx">elm</span><span class="p">.</span><span class="nx">currentTime</span> <span class="o">=</span> <span class="nx">clipBegin</span><span class="p">;</span>
            <span class="kd">function</span> <span class="nx">seeked</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">elm</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="s2">&quot;seeked&quot;</span><span class="p">,</span> <span class="nx">seeked</span><span class="p">);</span>
                <span class="nx">startClipTimer</span><span class="p">();</span>
                <span class="nx">elm</span><span class="p">.</span><span class="nx">play</span><span class="p">();</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    
    <span class="kd">function</span> <span class="nx">startClipTimer</span><span class="p">()</span> <span class="p">{</span>
        </pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <p>cancel the old timer, if any</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">intervalId</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">clearInterval</span><span class="p">(</span><span class="nx">intervalId</span><span class="p">);</span>
        <span class="p">}</span>
        </pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <p>we're using setInterval instead of monitoring the timeupdate event because timeupdate fires, at best, every 200ms, which messes up playback of short phrases.
11ms seems to be chrome's finest allowed granularity for setInterval (and this is for when the tab is active; otherwise it fires about every second)</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">intervalId</span> <span class="o">=</span> <span class="nx">setInterval</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">elm</span><span class="p">.</span><span class="nx">currentTime</span> <span class="o">&gt;=</span> <span class="nx">clipEnd</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">clearInterval</span><span class="p">(</span><span class="nx">intervalId</span><span class="p">);</span>
                <span class="nx">debugPrint</span><span class="p">(</span><span class="s2">&quot;clip done&quot;</span><span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">notifyClipDone</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">notifyClipDone</span><span class="p">();</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span> <span class="mi">11</span><span class="p">);</span>   
    <span class="p">}</span>
    
    <span class="kd">function</span> <span class="nx">debugPrint</span><span class="p">(</span><span class="nx">str</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">consoleTrace</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">str</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 