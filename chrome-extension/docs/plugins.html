<!DOCTYPE html>  <html> <head>   <title>plugins.js</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="plugins.html">                 plugins.js               </a>                                           <a class="source" href="web_plugins.html">                 web_plugins.js               </a>                                           <a class="source" href="alternate_style_tag_selector.html">                 alternate_style_tag_selector.js               </a>                                           <a class="source" href="audioClipPlayer.html">                 audioClipPlayer.js               </a>                                           <a class="source" href="epub.html">                 epub.js               </a>                                           <a class="source" href="epub_controller.html">                 epub_controller.js               </a>                                           <a class="source" href="ibooks_options_parser.html">                 ibooks_options_parser.js               </a>                                           <a class="source" href="manifest_item.html">                 manifest_item.js               </a>                                           <a class="source" href="mediaOverlay.html">                 mediaOverlay.js               </a>                                           <a class="source" href="options_presenter.html">                 options_presenter.js               </a>                                           <a class="source" href="packageDocument.html">                 packageDocument.js               </a>                                           <a class="source" href="package_document_parser.html">                 package_document_parser.js               </a>                                           <a class="source" href="page_number_display_logic.html">                 page_number_display_logic.js               </a>                                           <a class="source" href="pagination_strategy_selector.html">                 pagination_strategy_selector.js               </a>                                           <a class="source" href="path_resolver.html">                 path_resolver.js               </a>                                           <a class="source" href="readium_options.html">                 readium_options.js               </a>                                           <a class="source" href="readium_pagination.html">                 readium_pagination.js               </a>                                           <a class="source" href="smilModel.html">                 smilModel.js               </a>                                           <a class="source" href="toc.html">                 toc.js               </a>                                           <a class="source" href="trigger.html">                 trigger.js               </a>                                           <a class="source" href="validated_package_meta_data.html">                 validated_package_meta_data.js               </a>                                           <a class="source" href="crx_library_namespace.html">                 crx_library_namespace.js               </a>                                           <a class="source" href="crx_viewer_namespace.html">                 crx_viewer_namespace.js               </a>                                           <a class="source" href="ws_lib_namespace.html">                 ws_lib_namespace.js               </a>                                           <a class="source" href="crx_library_router.html">                 crx_library_router.js               </a>                                           <a class="source" href="crx_viewer_router.html">                 crx_viewer_router.js               </a>                                           <a class="source" href="ws_router.html">                 ws_router.js               </a>                                           <a class="source" href="bb_file_system_sync.html">                 bb_file_system_sync.js               </a>                                           <a class="source" href="cookie_utils.html">                 cookie_utils.js               </a>                                           <a class="source" href="handlebars_helpers.html">                 handlebars_helpers.js               </a>                                           <a class="source" href="local_storage_sync.html">                 local_storage_sync.js               </a>                                           <a class="source" href="md5.html">                 md5.js               </a>                                           <a class="source" href="user_agent_utils.html">                 user_agent_utils.js               </a>                                           <a class="source" href="nav_widget_view.html">                 nav_widget_view.js               </a>                                           <a class="source" href="options_view.html">                 options_view.js               </a>                                           <a class="source" href="toc_view.html">                 toc_view.js               </a>                                           <a class="source" href="toolbar_view.html">                 toolbar_view.js               </a>                                           <a class="source" href="httpFileApi.html">                 httpFileApi.js               </a>                                           <a class="source" href="library.html">                 library.js               </a>                                           <a class="source" href="viewer.html">                 viewer.js               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               plugins.js             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <p>This file contains all the minified libraries and plugins that we are using
concatenated into one file rather than serving them a separate, slower files.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>Listing of what is included (in order):</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <ol>
<li>Underscore.js</li>
<li>Backbone.js</li>
<li>Lawnchair v0.6.1</li>
<li>Twitter Bootstrap.js</li>
<li>Jquery mousewheel</li>
<li>Pan and Zoom</li>
<li>Jath</li>
<li>URI.js</li>
<li>ZipFile.complete.js</li>
<li>crypto SHA1</li>
<li>HandlebarsRuntime.js</li>
</ol>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>Underscore.js 1.3.1
(c) 2009-2012 Jeremy Ashkenas, DocumentCloud Inc.
Underscore is freely distributable under the MIT license.
Portions of Underscore are inspired or borrowed from Prototype,
Oliver Steele's Functional, and John Resig's Micro-Templating.
For all details and documentation:
http://documentcloud.github.com/underscore</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="kd">function</span> <span class="nx">q</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="o">===</span><span class="nx">c</span><span class="p">)</span><span class="k">return</span> <span class="nx">a</span><span class="o">!==</span><span class="mi">0</span><span class="o">||</span><span class="mi">1</span><span class="o">/</span><span class="nx">a</span><span class="o">==</span><span class="mi">1</span><span class="o">/</span><span class="nx">c</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="o">==</span><span class="kc">null</span><span class="o">||</span><span class="nx">c</span><span class="o">==</span><span class="kc">null</span><span class="p">)</span><span class="k">return</span> <span class="nx">a</span><span class="o">===</span><span class="nx">c</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">_chain</span><span class="p">)</span><span class="nx">a</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">_wrapped</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">_chain</span><span class="p">)</span><span class="nx">c</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">_wrapped</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">isEqual</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">isEqual</span><span class="p">))</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">isEqual</span><span class="p">(</span><span class="nx">c</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">isEqual</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">isEqual</span><span class="p">))</span><span class="k">return</span> <span class="nx">c</span><span class="p">.</span><span class="nx">isEqual</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="nx">l</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">e</span><span class="o">!=</span><span class="nx">l</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">c</span><span class="p">))</span><span class="k">return</span> <span class="kc">false</span><span class="p">;</span><span class="k">switch</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span><span class="k">case</span> <span class="s2">&quot;[object String]&quot;</span><span class="o">:</span><span class="k">return</span> <span class="nx">a</span><span class="o">==</span><span class="nb">String</span><span class="p">(</span><span class="nx">c</span><span class="p">);</span><span class="k">case</span> <span class="s2">&quot;[object Number]&quot;</span><span class="o">:</span><span class="k">return</span> <span class="nx">a</span><span class="o">!=+</span><span class="nx">a</span><span class="o">?</span><span class="nx">c</span><span class="o">!=+</span><span class="nx">c</span><span class="o">:</span><span class="nx">a</span><span class="o">==</span><span class="mi">0</span><span class="o">?</span><span class="mi">1</span><span class="o">/</span><span class="nx">a</span><span class="o">==</span><span class="mi">1</span><span class="o">/</span><span class="nx">c</span><span class="o">:</span><span class="nx">a</span><span class="o">==+</span><span class="nx">c</span><span class="p">;</span><span class="k">case</span> <span class="s2">&quot;[object Date]&quot;</span><span class="o">:</span><span class="k">case</span> <span class="s2">&quot;[object Boolean]&quot;</span><span class="o">:</span><span class="k">return</span><span class="o">+</span><span class="nx">a</span><span class="o">==+</span><span class="nx">c</span><span class="p">;</span><span class="k">case</span> <span class="s2">&quot;[object RegExp]&quot;</span><span class="o">:</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">source</span><span class="o">==</span>
<span class="nx">c</span><span class="p">.</span><span class="nx">source</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">global</span><span class="o">==</span><span class="nx">c</span><span class="p">.</span><span class="nx">global</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">multiline</span><span class="o">==</span><span class="nx">c</span><span class="p">.</span><span class="nx">multiline</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">ignoreCase</span><span class="o">==</span><span class="nx">c</span><span class="p">.</span><span class="nx">ignoreCase</span><span class="p">}</span><span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">a</span><span class="o">!=</span><span class="s2">&quot;object&quot;</span><span class="o">||</span><span class="k">typeof</span> <span class="nx">c</span><span class="o">!=</span><span class="s2">&quot;object&quot;</span><span class="p">)</span><span class="k">return</span> <span class="kc">false</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">f</span><span class="o">--</span><span class="p">;)</span><span class="k">if</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="nx">f</span><span class="p">]</span><span class="o">==</span><span class="nx">a</span><span class="p">)</span><span class="k">return</span> <span class="kc">true</span><span class="p">;</span><span class="nx">d</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">g</span><span class="o">=</span><span class="kc">true</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">e</span><span class="o">==</span><span class="s2">&quot;[object Array]&quot;</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">f</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span><span class="nx">g</span><span class="o">=</span><span class="nx">f</span><span class="o">==</span><span class="nx">c</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span><span class="k">for</span><span class="p">(;</span><span class="nx">f</span><span class="o">--</span><span class="p">;)</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">g</span><span class="o">=</span><span class="nx">f</span> <span class="k">in</span> <span class="nx">a</span><span class="o">==</span><span class="nx">f</span> <span class="k">in</span> <span class="nx">c</span><span class="o">&amp;&amp;</span><span class="nx">q</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">f</span><span class="p">],</span><span class="nx">c</span><span class="p">[</span><span class="nx">f</span><span class="p">],</span><span class="nx">d</span><span class="p">)))</span><span class="k">break</span><span class="p">}</span><span class="k">else</span><span class="p">{</span><span class="k">if</span><span class="p">(</span><span class="s2">&quot;constructor&quot;</span><span class="k">in</span> <span class="nx">a</span><span class="o">!=</span><span class="s2">&quot;constructor&quot;</span><span class="k">in</span> <span class="nx">c</span><span class="o">||</span><span class="nx">a</span><span class="p">.</span><span class="nx">constructor</span><span class="o">!=</span><span class="nx">c</span><span class="p">.</span><span class="nx">constructor</span><span class="p">)</span><span class="k">return</span> <span class="kc">false</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">h</span> <span class="k">in</span> <span class="nx">a</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">h</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">f</span><span class="o">++</span><span class="p">,</span><span class="o">!</span><span class="p">(</span><span class="nx">g</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">h</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="nx">q</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">h</span><span class="p">],</span><span class="nx">c</span><span class="p">[</span><span class="nx">h</span><span class="p">],</span><span class="nx">d</span><span class="p">))))</span><span class="k">break</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">g</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="nx">h</span> <span class="k">in</span> <span class="nx">c</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span>
<span class="nx">h</span><span class="p">)</span><span class="o">&amp;&amp;!</span><span class="nx">f</span><span class="o">--</span><span class="p">)</span><span class="k">break</span><span class="p">;</span><span class="nx">g</span><span class="o">=!</span><span class="nx">f</span><span class="p">}}</span><span class="nx">d</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span><span class="k">return</span> <span class="nx">g</span><span class="p">}</span><span class="kd">var</span> <span class="nx">r</span><span class="o">=</span><span class="k">this</span><span class="p">,</span><span class="nx">G</span><span class="o">=</span><span class="nx">r</span><span class="p">.</span><span class="nx">_</span><span class="p">,</span><span class="nx">n</span><span class="o">=</span><span class="p">{},</span><span class="nx">k</span><span class="o">=</span><span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span><span class="nx">o</span><span class="o">=</span><span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span><span class="nx">i</span><span class="o">=</span><span class="nx">k</span><span class="p">.</span><span class="nx">slice</span><span class="p">,</span><span class="nx">H</span><span class="o">=</span><span class="nx">k</span><span class="p">.</span><span class="nx">unshift</span><span class="p">,</span><span class="nx">l</span><span class="o">=</span><span class="nx">o</span><span class="p">.</span><span class="nx">toString</span><span class="p">,</span><span class="nx">I</span><span class="o">=</span><span class="nx">o</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">,</span><span class="nx">w</span><span class="o">=</span><span class="nx">k</span><span class="p">.</span><span class="nx">forEach</span><span class="p">,</span><span class="nx">x</span><span class="o">=</span><span class="nx">k</span><span class="p">.</span><span class="nx">map</span><span class="p">,</span><span class="nx">y</span><span class="o">=</span><span class="nx">k</span><span class="p">.</span><span class="nx">reduce</span><span class="p">,</span><span class="nx">z</span><span class="o">=</span><span class="nx">k</span><span class="p">.</span><span class="nx">reduceRight</span><span class="p">,</span><span class="nx">A</span><span class="o">=</span><span class="nx">k</span><span class="p">.</span><span class="nx">filter</span><span class="p">,</span><span class="nx">B</span><span class="o">=</span><span class="nx">k</span><span class="p">.</span><span class="nx">every</span><span class="p">,</span><span class="nx">C</span><span class="o">=</span><span class="nx">k</span><span class="p">.</span><span class="nx">some</span><span class="p">,</span><span class="nx">p</span><span class="o">=</span><span class="nx">k</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">,</span><span class="nx">D</span><span class="o">=</span><span class="nx">k</span><span class="p">.</span><span class="nx">lastIndexOf</span><span class="p">,</span><span class="nx">o</span><span class="o">=</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">,</span><span class="nx">J</span><span class="o">=</span><span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">,</span><span class="nx">s</span><span class="o">=</span><span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">,</span><span class="nx">b</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="k">new</span> <span class="nx">m</span><span class="p">(</span><span class="nx">a</span><span class="p">)};</span><span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">exports</span><span class="o">!==</span><span class="s2">&quot;undefined&quot;</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">module</span><span class="o">!==</span><span class="s2">&quot;undefined&quot;</span><span class="o">&amp;&amp;</span><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="p">)</span><span class="nx">exports</span><span class="o">=</span><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="o">=</span><span class="nx">b</span><span class="p">;</span><span class="nx">exports</span><span class="p">.</span><span class="nx">_</span><span class="o">=</span><span class="nx">b</span><span class="p">}</span><span class="k">else</span> <span class="nx">r</span><span class="p">.</span><span class="nx">_</span><span class="o">=</span><span class="nx">b</span><span class="p">;</span><span class="nx">b</span><span class="p">.</span><span class="nx">VERSION</span><span class="o">=</span><span class="s2">&quot;1.3.1&quot;</span><span class="p">;</span><span class="kd">var</span> <span class="nx">j</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">each</span><span class="o">=</span>
<span class="nx">b</span><span class="p">.</span><span class="nx">forEach</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="o">!=</span><span class="kc">null</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="nx">w</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">forEach</span><span class="o">===</span><span class="nx">w</span><span class="p">)</span><span class="nx">a</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">);</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="o">===+</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">f</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">e</span><span class="o">&lt;</span><span class="nx">f</span><span class="p">;</span><span class="nx">e</span><span class="o">++</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">e</span> <span class="k">in</span> <span class="nx">a</span><span class="o">&amp;&amp;</span><span class="nx">c</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">a</span><span class="p">[</span><span class="nx">e</span><span class="p">],</span><span class="nx">e</span><span class="p">,</span><span class="nx">a</span><span class="p">)</span><span class="o">===</span><span class="nx">n</span><span class="p">)</span><span class="k">break</span><span class="p">}</span><span class="k">else</span> <span class="k">for</span><span class="p">(</span><span class="nx">e</span> <span class="k">in</span> <span class="nx">a</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">e</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="nx">c</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">a</span><span class="p">[</span><span class="nx">e</span><span class="p">],</span><span class="nx">e</span><span class="p">,</span><span class="nx">a</span><span class="p">)</span><span class="o">===</span><span class="nx">n</span><span class="p">)</span><span class="k">break</span><span class="p">};</span><span class="nx">b</span><span class="p">.</span><span class="nx">map</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">collect</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="p">[];</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="o">==</span><span class="kc">null</span><span class="p">)</span><span class="k">return</span> <span class="nx">e</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">x</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">map</span><span class="o">===</span><span class="nx">x</span><span class="p">)</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">b</span><span class="p">);</span><span class="nx">j</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">g</span><span class="p">,</span><span class="nx">h</span><span class="p">){</span><span class="nx">e</span><span class="p">[</span><span class="nx">e</span><span class="p">.</span><span class="nx">length</span><span class="p">]</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">g</span><span class="p">,</span><span class="nx">h</span><span class="p">)});</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="o">===+</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span><span class="nx">e</span><span class="p">.</span><span class="nx">length</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="k">return</span> <span class="nx">e</span><span class="p">};</span><span class="nx">b</span><span class="p">.</span><span class="nx">reduce</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">foldl</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">inject</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="o">&gt;</span><span class="mi">2</span><span class="p">;</span><span class="nx">a</span><span class="o">==</span>
<span class="kc">null</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">a</span><span class="o">=</span><span class="p">[]);</span><span class="k">if</span><span class="p">(</span><span class="nx">y</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">reduce</span><span class="o">===</span><span class="nx">y</span><span class="p">)</span><span class="k">return</span> <span class="nx">e</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">c</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">e</span><span class="p">)),</span><span class="nx">f</span><span class="o">?</span><span class="nx">a</span><span class="p">.</span><span class="nx">reduce</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">)</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">reduce</span><span class="p">(</span><span class="nx">c</span><span class="p">);</span><span class="nx">j</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">i</span><span class="p">){</span><span class="nx">f</span><span class="o">?</span><span class="nx">d</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">i</span><span class="p">)</span><span class="o">:</span><span class="p">(</span><span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">,</span><span class="nx">f</span><span class="o">=</span><span class="kc">true</span><span class="p">)});</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">f</span><span class="p">)</span><span class="k">throw</span> <span class="k">new</span> <span class="nx">TypeError</span><span class="p">(</span><span class="s2">&quot;Reduce of empty array with no initial value&quot;</span><span class="p">);</span><span class="k">return</span> <span class="nx">d</span><span class="p">};</span><span class="nx">b</span><span class="p">.</span><span class="nx">reduceRight</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">foldr</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="o">&gt;</span><span class="mi">2</span><span class="p">;</span><span class="nx">a</span><span class="o">==</span><span class="kc">null</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">a</span><span class="o">=</span><span class="p">[]);</span><span class="k">if</span><span class="p">(</span><span class="nx">z</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">reduceRight</span><span class="o">===</span><span class="nx">z</span><span class="p">)</span><span class="k">return</span> <span class="nx">e</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">c</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">e</span><span class="p">)),</span><span class="nx">f</span><span class="o">?</span><span class="nx">a</span><span class="p">.</span><span class="nx">reduceRight</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">)</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">reduceRight</span><span class="p">(</span><span class="nx">c</span><span class="p">);</span><span class="kd">var</span> <span class="nx">g</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">toArray</span><span class="p">(</span><span class="nx">a</span><span class="p">).</span><span class="nx">reverse</span><span class="p">();</span><span class="nx">e</span><span class="o">&amp;&amp;!</span><span class="nx">f</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">c</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">e</span><span class="p">));</span><span class="k">return</span> <span class="nx">f</span><span class="o">?</span><span class="nx">b</span><span class="p">.</span><span class="nx">reduce</span><span class="p">(</span><span class="nx">g</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">)</span><span class="o">:</span><span class="nx">b</span><span class="p">.</span><span class="nx">reduce</span><span class="p">(</span><span class="nx">g</span><span class="p">,</span><span class="nx">c</span><span class="p">)};</span><span class="nx">b</span><span class="p">.</span><span class="nx">find</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">detect</span><span class="o">=</span>
<span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">e</span><span class="p">;</span><span class="nx">E</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">g</span><span class="p">,</span><span class="nx">h</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">g</span><span class="p">,</span><span class="nx">h</span><span class="p">))</span><span class="k">return</span> <span class="nx">e</span><span class="o">=</span><span class="nx">a</span><span class="p">,</span><span class="kc">true</span><span class="p">});</span><span class="k">return</span> <span class="nx">e</span><span class="p">};</span><span class="nx">b</span><span class="p">.</span><span class="nx">filter</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">select</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="p">[];</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="o">==</span><span class="kc">null</span><span class="p">)</span><span class="k">return</span> <span class="nx">e</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">A</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">filter</span><span class="o">===</span><span class="nx">A</span><span class="p">)</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">b</span><span class="p">);</span><span class="nx">j</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">g</span><span class="p">,</span><span class="nx">h</span><span class="p">){</span><span class="nx">c</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">g</span><span class="p">,</span><span class="nx">h</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">e</span><span class="p">[</span><span class="nx">e</span><span class="p">.</span><span class="nx">length</span><span class="p">]</span><span class="o">=</span><span class="nx">a</span><span class="p">)});</span><span class="k">return</span> <span class="nx">e</span><span class="p">};</span><span class="nx">b</span><span class="p">.</span><span class="nx">reject</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="p">[];</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="o">==</span><span class="kc">null</span><span class="p">)</span><span class="k">return</span> <span class="nx">e</span><span class="p">;</span><span class="nx">j</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">g</span><span class="p">,</span><span class="nx">h</span><span class="p">){</span><span class="nx">c</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">g</span><span class="p">,</span><span class="nx">h</span><span class="p">)</span><span class="o">||</span><span class="p">(</span><span class="nx">e</span><span class="p">[</span><span class="nx">e</span><span class="p">.</span><span class="nx">length</span><span class="p">]</span><span class="o">=</span><span class="nx">a</span><span class="p">)});</span><span class="k">return</span> <span class="nx">e</span><span class="p">};</span><span class="nx">b</span><span class="p">.</span><span class="nx">every</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">all</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="kc">true</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="o">==</span><span class="kc">null</span><span class="p">)</span><span class="k">return</span> <span class="nx">e</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">B</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">every</span><span class="o">===</span><span class="nx">B</span><span class="p">)</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">every</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">b</span><span class="p">);</span><span class="nx">j</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">g</span><span class="p">,</span><span class="nx">h</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">e</span><span class="o">=</span>
<span class="nx">e</span><span class="o">&amp;&amp;</span><span class="nx">c</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">g</span><span class="p">,</span><span class="nx">h</span><span class="p">)))</span><span class="k">return</span> <span class="nx">n</span><span class="p">});</span><span class="k">return</span> <span class="nx">e</span><span class="p">};</span><span class="kd">var</span> <span class="nx">E</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">some</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">any</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">){</span><span class="nx">c</span><span class="o">||</span><span class="p">(</span><span class="nx">c</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">identity</span><span class="p">);</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="kc">false</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="o">==</span><span class="kc">null</span><span class="p">)</span><span class="k">return</span> <span class="nx">e</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">C</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">some</span><span class="o">===</span><span class="nx">C</span><span class="p">)</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">some</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">);</span><span class="nx">j</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">h</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">e</span><span class="o">||</span><span class="p">(</span><span class="nx">e</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">h</span><span class="p">)))</span><span class="k">return</span> <span class="nx">n</span><span class="p">});</span><span class="k">return</span><span class="o">!!</span><span class="nx">e</span><span class="p">};</span><span class="nx">b</span><span class="p">.</span><span class="nx">include</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">contains</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="kc">false</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="o">==</span><span class="kc">null</span><span class="p">)</span><span class="k">return</span> <span class="nx">b</span><span class="p">;</span><span class="k">return</span> <span class="nx">p</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">indexOf</span><span class="o">===</span><span class="nx">p</span><span class="o">?</span><span class="nx">a</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">c</span><span class="p">)</span><span class="o">!=-</span><span class="mi">1</span><span class="o">:</span><span class="nx">b</span><span class="o">=</span><span class="nx">E</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="o">===</span><span class="nx">c</span><span class="p">})};</span><span class="nx">b</span><span class="p">.</span><span class="nx">invoke</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">i</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span><span class="k">return</span> <span class="nx">b</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">c</span><span class="p">)</span><span class="o">?</span><span class="nx">c</span><span class="o">||</span><span class="nx">a</span><span class="o">:</span><span class="nx">a</span><span class="p">[</span><span class="nx">c</span><span class="p">]).</span><span class="nx">apply</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">d</span><span class="p">)})};</span><span class="nx">b</span><span class="p">.</span><span class="nx">pluck</span><span class="o">=</span>
<span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="k">return</span> <span class="nx">b</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="p">[</span><span class="nx">c</span><span class="p">]})};</span><span class="nx">b</span><span class="p">.</span><span class="nx">max</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">c</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">a</span><span class="p">))</span><span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nb">Math</span><span class="p">,</span><span class="nx">a</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">c</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">.</span><span class="nx">isEmpty</span><span class="p">(</span><span class="nx">a</span><span class="p">))</span><span class="k">return</span><span class="o">-</span><span class="kc">Infinity</span><span class="p">;</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="p">{</span><span class="nx">computed</span><span class="o">:-</span><span class="kc">Infinity</span><span class="p">};</span><span class="nx">j</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">h</span><span class="p">){</span><span class="nx">b</span><span class="o">=</span><span class="nx">c</span><span class="o">?</span><span class="nx">c</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">h</span><span class="p">)</span><span class="o">:</span><span class="nx">a</span><span class="p">;</span><span class="nx">b</span><span class="o">&gt;=</span><span class="nx">e</span><span class="p">.</span><span class="nx">computed</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">e</span><span class="o">=</span><span class="p">{</span><span class="nx">value</span><span class="o">:</span><span class="nx">a</span><span class="p">,</span><span class="nx">computed</span><span class="o">:</span><span class="nx">b</span><span class="p">})});</span><span class="k">return</span> <span class="nx">e</span><span class="p">.</span><span class="nx">value</span><span class="p">};</span><span class="nx">b</span><span class="p">.</span><span class="nx">min</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">c</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">a</span><span class="p">))</span><span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nb">Math</span><span class="p">,</span><span class="nx">a</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">c</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">.</span><span class="nx">isEmpty</span><span class="p">(</span><span class="nx">a</span><span class="p">))</span><span class="k">return</span> <span class="kc">Infinity</span><span class="p">;</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="p">{</span><span class="nx">computed</span><span class="o">:</span><span class="kc">Infinity</span><span class="p">};</span><span class="nx">j</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">h</span><span class="p">){</span><span class="nx">b</span><span class="o">=</span><span class="nx">c</span><span class="o">?</span><span class="nx">c</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">h</span><span class="p">)</span><span class="o">:</span><span class="nx">a</span><span class="p">;</span><span class="nx">b</span><span class="o">&lt;</span><span class="nx">e</span><span class="p">.</span><span class="nx">computed</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">e</span><span class="o">=</span><span class="p">{</span><span class="nx">value</span><span class="o">:</span><span class="nx">a</span><span class="p">,</span><span class="nx">computed</span><span class="o">:</span><span class="nx">b</span><span class="p">})});</span>
<span class="k">return</span> <span class="nx">e</span><span class="p">.</span><span class="nx">value</span><span class="p">};</span><span class="nx">b</span><span class="p">.</span><span class="nx">shuffle</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="p">[],</span><span class="nx">d</span><span class="p">;</span><span class="nx">j</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">f</span><span class="p">){</span><span class="nx">f</span><span class="o">==</span><span class="mi">0</span><span class="o">?</span><span class="nx">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="nx">a</span><span class="o">:</span><span class="p">(</span><span class="nx">d</span><span class="o">=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span><span class="o">*</span><span class="p">(</span><span class="nx">f</span><span class="o">+</span><span class="mi">1</span><span class="p">)),</span><span class="nx">b</span><span class="p">[</span><span class="nx">f</span><span class="p">]</span><span class="o">=</span><span class="nx">b</span><span class="p">[</span><span class="nx">d</span><span class="p">],</span><span class="nx">b</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span><span class="o">=</span><span class="nx">a</span><span class="p">)});</span><span class="k">return</span> <span class="nx">b</span><span class="p">};</span><span class="nx">b</span><span class="p">.</span><span class="nx">sortBy</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">){</span><span class="k">return</span> <span class="nx">b</span><span class="p">.</span><span class="nx">pluck</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">g</span><span class="p">){</span><span class="k">return</span><span class="p">{</span><span class="nx">value</span><span class="o">:</span><span class="nx">a</span><span class="p">,</span><span class="nx">criteria</span><span class="o">:</span><span class="nx">c</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">g</span><span class="p">)}}).</span><span class="nx">sort</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">criteria</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">criteria</span><span class="p">;</span><span class="k">return</span> <span class="nx">c</span><span class="o">&lt;</span><span class="nx">d</span><span class="o">?-</span><span class="mi">1</span><span class="o">:</span><span class="nx">c</span><span class="o">&gt;</span><span class="nx">d</span><span class="o">?</span><span class="mi">1</span><span class="o">:</span><span class="mi">0</span><span class="p">}),</span><span class="s2">&quot;value&quot;</span><span class="p">)};</span><span class="nx">b</span><span class="p">.</span><span class="nx">groupBy</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="p">{},</span><span class="nx">e</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">c</span><span class="p">)</span><span class="o">?</span><span class="nx">c</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="p">[</span><span class="nx">c</span><span class="p">]};</span><span class="nx">j</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">e</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">);(</span><span class="nx">d</span><span class="p">[</span><span class="nx">c</span><span class="p">]</span><span class="o">||</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="nx">c</span><span class="p">]</span><span class="o">=</span><span class="p">[])).</span><span class="nx">push</span><span class="p">(</span><span class="nx">a</span><span class="p">)});</span><span class="k">return</span> <span class="nx">d</span><span class="p">};</span><span class="nx">b</span><span class="p">.</span><span class="nx">sortedIndex</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span>
<span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">){</span><span class="nx">d</span><span class="o">||</span><span class="p">(</span><span class="nx">d</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">identity</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">f</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">e</span><span class="o">&lt;</span><span class="nx">f</span><span class="p">;){</span><span class="kd">var</span> <span class="nx">g</span><span class="o">=</span><span class="nx">e</span><span class="o">+</span><span class="nx">f</span><span class="o">&gt;&gt;</span><span class="mi">1</span><span class="p">;</span><span class="nx">d</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">g</span><span class="p">])</span><span class="o">&lt;</span><span class="nx">d</span><span class="p">(</span><span class="nx">c</span><span class="p">)</span><span class="o">?</span><span class="nx">e</span><span class="o">=</span><span class="nx">g</span><span class="o">+</span><span class="mi">1</span><span class="o">:</span><span class="nx">f</span><span class="o">=</span><span class="nx">g</span><span class="p">}</span><span class="k">return</span> <span class="nx">e</span><span class="p">};</span><span class="nx">b</span><span class="p">.</span><span class="nx">toArray</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span><span class="o">!</span><span class="nx">a</span><span class="o">?</span><span class="p">[]</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">toArray</span><span class="o">?</span><span class="nx">a</span><span class="p">.</span><span class="nx">toArray</span><span class="p">()</span><span class="o">:</span><span class="nx">b</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">?</span><span class="nx">i</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">:</span><span class="nx">b</span><span class="p">.</span><span class="nx">isArguments</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">?</span><span class="nx">i</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">:</span><span class="nx">b</span><span class="p">.</span><span class="nx">values</span><span class="p">(</span><span class="nx">a</span><span class="p">)};</span><span class="nx">b</span><span class="p">.</span><span class="nx">size</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">b</span><span class="p">.</span><span class="nx">toArray</span><span class="p">(</span><span class="nx">a</span><span class="p">).</span><span class="nx">length</span><span class="p">};</span><span class="nx">b</span><span class="p">.</span><span class="nx">first</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">head</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">d</span><span class="p">){</span><span class="k">return</span> <span class="nx">b</span><span class="o">!=</span><span class="kc">null</span><span class="o">&amp;&amp;!</span><span class="nx">d</span><span class="o">?</span><span class="nx">i</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="nx">b</span><span class="p">)</span><span class="o">:</span><span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]};</span><span class="nx">b</span><span class="p">.</span><span class="nx">initial</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">d</span><span class="p">){</span><span class="k">return</span> <span class="nx">i</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="p">(</span><span class="nx">b</span><span class="o">==</span><span class="kc">null</span><span class="o">||</span><span class="nx">d</span><span class="o">?</span><span class="mi">1</span><span class="o">:</span><span class="nx">b</span><span class="p">))};</span><span class="nx">b</span><span class="p">.</span><span class="nx">last</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">d</span><span class="p">){</span><span class="k">return</span> <span class="nx">b</span><span class="o">!=</span><span class="kc">null</span><span class="o">&amp;&amp;!</span><span class="nx">d</span><span class="o">?</span><span class="nx">i</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="nx">b</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span><span class="o">:</span><span class="nx">a</span><span class="p">[</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">]};</span><span class="nx">b</span><span class="p">.</span><span class="nx">rest</span><span class="o">=</span>
<span class="nx">b</span><span class="p">.</span><span class="nx">tail</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">d</span><span class="p">){</span><span class="k">return</span> <span class="nx">i</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="o">==</span><span class="kc">null</span><span class="o">||</span><span class="nx">d</span><span class="o">?</span><span class="mi">1</span><span class="o">:</span><span class="nx">b</span><span class="p">)};</span><span class="nx">b</span><span class="p">.</span><span class="nx">compact</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">b</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span><span class="o">!!</span><span class="nx">a</span><span class="p">})};</span><span class="nx">b</span><span class="p">.</span><span class="nx">flatten</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="k">return</span> <span class="nx">b</span><span class="p">.</span><span class="nx">reduce</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">e</span><span class="p">))</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">c</span><span class="o">?</span><span class="nx">e</span><span class="o">:</span><span class="nx">b</span><span class="p">.</span><span class="nx">flatten</span><span class="p">(</span><span class="nx">e</span><span class="p">));</span><span class="nx">a</span><span class="p">[</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">]</span><span class="o">=</span><span class="nx">e</span><span class="p">;</span><span class="k">return</span> <span class="nx">a</span><span class="p">},[])};</span><span class="nx">b</span><span class="p">.</span><span class="nx">without</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">b</span><span class="p">.</span><span class="nx">difference</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">i</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span><span class="mi">1</span><span class="p">))};</span><span class="nx">b</span><span class="p">.</span><span class="nx">uniq</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">unique</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">d</span><span class="o">?</span><span class="nx">b</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">d</span><span class="p">)</span><span class="o">:</span><span class="nx">a</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="p">[];</span><span class="nx">b</span><span class="p">.</span><span class="nx">reduce</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">g</span><span class="p">,</span><span class="nx">h</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="mi">0</span><span class="o">==</span><span class="nx">h</span><span class="o">||</span><span class="p">(</span><span class="nx">c</span><span class="o">===</span><span class="kc">true</span><span class="o">?</span><span class="nx">b</span><span class="p">.</span><span class="nx">last</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span><span class="o">!=</span><span class="nx">g</span><span class="o">:!</span><span class="nx">b</span><span class="p">.</span><span class="nx">include</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">g</span><span class="p">)))</span><span class="nx">d</span><span class="p">[</span><span class="nx">d</span><span class="p">.</span><span class="nx">length</span><span class="p">]</span><span class="o">=</span><span class="nx">g</span><span class="p">,</span><span class="nx">e</span><span class="p">[</span><span class="nx">e</span><span class="p">.</span><span class="nx">length</span><span class="p">]</span><span class="o">=</span><span class="nx">a</span><span class="p">[</span><span class="nx">h</span><span class="p">];</span><span class="k">return</span> <span class="nx">d</span><span class="p">},[]);</span>
<span class="k">return</span> <span class="nx">e</span><span class="p">};</span><span class="nx">b</span><span class="p">.</span><span class="nx">union</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="nx">b</span><span class="p">.</span><span class="nx">uniq</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">flatten</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span><span class="kc">true</span><span class="p">))};</span><span class="nx">b</span><span class="p">.</span><span class="nx">intersection</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">intersect</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">i</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span><span class="k">return</span> <span class="nx">b</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">uniq</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">b</span><span class="p">.</span><span class="nx">every</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">c</span><span class="p">){</span><span class="k">return</span> <span class="nx">b</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">a</span><span class="p">)</span><span class="o">&gt;=</span><span class="mi">0</span><span class="p">})})};</span><span class="nx">b</span><span class="p">.</span><span class="nx">difference</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">flatten</span><span class="p">(</span><span class="nx">i</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span><span class="mi">1</span><span class="p">));</span><span class="k">return</span> <span class="nx">b</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span><span class="o">!</span><span class="nx">b</span><span class="p">.</span><span class="nx">include</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">a</span><span class="p">)})};</span><span class="nx">b</span><span class="p">.</span><span class="nx">zip</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="nx">i</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">),</span><span class="nx">c</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">pluck</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="s2">&quot;length&quot;</span><span class="p">)),</span><span class="nx">d</span><span class="o">=</span><span class="nb">Array</span><span class="p">(</span><span class="nx">c</span><span class="p">),</span><span class="nx">e</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">e</span><span class="o">&lt;</span><span class="nx">c</span><span class="p">;</span><span class="nx">e</span><span class="o">++</span><span class="p">)</span><span class="nx">d</span><span class="p">[</span><span class="nx">e</span><span class="p">]</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">pluck</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="o">+</span><span class="nx">e</span><span class="p">);</span><span class="k">return</span> <span class="nx">d</span><span class="p">};</span><span class="nx">b</span><span class="p">.</span><span class="nx">indexOf</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span>
<span class="nx">d</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="o">==</span><span class="kc">null</span><span class="p">)</span><span class="k">return</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span><span class="kd">var</span> <span class="nx">e</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span><span class="k">return</span> <span class="nx">d</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">sortedIndex</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">),</span><span class="nx">a</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span><span class="o">===</span><span class="nx">c</span><span class="o">?</span><span class="nx">d</span><span class="o">:-</span><span class="mi">1</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">p</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">indexOf</span><span class="o">===</span><span class="nx">p</span><span class="p">)</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">c</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="nx">d</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">d</span><span class="o">&lt;</span><span class="nx">e</span><span class="p">;</span><span class="nx">d</span><span class="o">++</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="nx">d</span> <span class="k">in</span> <span class="nx">a</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span><span class="o">===</span><span class="nx">c</span><span class="p">)</span><span class="k">return</span> <span class="nx">d</span><span class="p">;</span><span class="k">return</span><span class="o">-</span><span class="mi">1</span><span class="p">};</span><span class="nx">b</span><span class="p">.</span><span class="nx">lastIndexOf</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="o">==</span><span class="kc">null</span><span class="p">)</span><span class="k">return</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">D</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">lastIndexOf</span><span class="o">===</span><span class="nx">D</span><span class="p">)</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">lastIndexOf</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">d</span><span class="o">--</span><span class="p">;)</span><span class="k">if</span><span class="p">(</span><span class="nx">d</span> <span class="k">in</span> <span class="nx">a</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span><span class="o">===</span><span class="nx">b</span><span class="p">)</span><span class="k">return</span> <span class="nx">d</span><span class="p">;</span><span class="k">return</span><span class="o">-</span><span class="mi">1</span><span class="p">};</span><span class="nx">b</span><span class="p">.</span><span class="nx">range</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">d</span><span class="p">){</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="o">&lt;=</span><span class="mi">1</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">b</span><span class="o">=</span><span class="nx">a</span><span class="o">||</span><span class="mi">0</span><span class="p">,</span><span class="nx">a</span><span class="o">=</span><span class="mi">0</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">arguments</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">||</span><span class="mi">1</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">ceil</span><span class="p">((</span><span class="nx">b</span><span class="o">-</span><span class="nx">a</span><span class="p">)</span><span class="o">/</span><span class="nx">d</span><span class="p">),</span><span class="mi">0</span><span class="p">),</span><span class="nx">f</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">g</span><span class="o">=</span><span class="nb">Array</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span><span class="nx">f</span><span class="o">&lt;</span><span class="nx">e</span><span class="p">;)</span><span class="nx">g</span><span class="p">[</span><span class="nx">f</span><span class="o">++</span><span class="p">]</span><span class="o">=</span><span class="nx">a</span><span class="p">,</span><span class="nx">a</span><span class="o">+=</span><span class="nx">d</span><span class="p">;</span><span class="k">return</span> <span class="nx">g</span><span class="p">};</span>
<span class="kd">var</span> <span class="nx">F</span><span class="o">=</span><span class="kd">function</span><span class="p">(){};</span><span class="nx">b</span><span class="p">.</span><span class="nx">bind</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">bind</span><span class="o">===</span><span class="nx">s</span><span class="o">&amp;&amp;</span><span class="nx">s</span><span class="p">)</span><span class="k">return</span> <span class="nx">s</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">i</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span><span class="mi">1</span><span class="p">));</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">b</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">a</span><span class="p">))</span><span class="k">throw</span> <span class="k">new</span> <span class="nx">TypeError</span><span class="p">;</span><span class="nx">e</span><span class="o">=</span><span class="nx">i</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span><span class="k">return</span> <span class="nx">d</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="k">this</span> <span class="k">instanceof</span> <span class="nx">d</span><span class="p">))</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">e</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">i</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">)));</span><span class="nx">F</span><span class="p">.</span><span class="nx">prototype</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">prototype</span><span class="p">;</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">new</span> <span class="nx">F</span><span class="p">,</span><span class="nx">g</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">e</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">i</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">)));</span><span class="k">return</span> <span class="nb">Object</span><span class="p">(</span><span class="nx">g</span><span class="p">)</span><span class="o">===</span><span class="nx">g</span><span class="o">?</span><span class="nx">g</span><span class="o">:</span><span class="nx">b</span><span class="p">}};</span><span class="nx">b</span><span class="p">.</span><span class="nx">bindAll</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">i</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span><span class="nx">c</span><span class="p">.</span><span class="nx">length</span><span class="o">==</span><span class="mi">0</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">c</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">functions</span><span class="p">(</span><span class="nx">a</span><span class="p">));</span><span class="nx">j</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">c</span><span class="p">){</span><span class="nx">a</span><span class="p">[</span><span class="nx">c</span><span class="p">]</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">c</span><span class="p">],</span><span class="nx">a</span><span class="p">)});</span><span class="k">return</span> <span class="nx">a</span><span class="p">};</span><span class="nx">b</span><span class="p">.</span><span class="nx">memoize</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span>
<span class="nx">c</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="p">{};</span><span class="nx">c</span><span class="o">||</span><span class="p">(</span><span class="nx">c</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">identity</span><span class="p">);</span><span class="k">return</span> <span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">arguments</span><span class="p">);</span><span class="k">return</span> <span class="nx">b</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">)</span><span class="o">?</span><span class="nx">d</span><span class="p">[</span><span class="nx">e</span><span class="p">]</span><span class="o">:</span><span class="nx">d</span><span class="p">[</span><span class="nx">e</span><span class="p">]</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">arguments</span><span class="p">)}};</span><span class="nx">b</span><span class="p">.</span><span class="nx">delay</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">i</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span><span class="k">return</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">d</span><span class="p">)},</span><span class="nx">b</span><span class="p">)};</span><span class="nx">b</span><span class="p">.</span><span class="nx">defer</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">b</span><span class="p">.</span><span class="nx">delay</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">b</span><span class="p">,[</span><span class="nx">a</span><span class="p">,</span><span class="mi">1</span><span class="p">].</span><span class="nx">concat</span><span class="p">(</span><span class="nx">i</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span><span class="mi">1</span><span class="p">)))};</span><span class="nx">b</span><span class="p">.</span><span class="nx">throttle</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">f</span><span class="p">,</span><span class="nx">g</span><span class="p">,</span><span class="nx">h</span><span class="p">,</span><span class="nx">i</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">debounce</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="nx">h</span><span class="o">=</span><span class="nx">g</span><span class="o">=</span><span class="kc">false</span><span class="p">},</span><span class="nx">c</span><span class="p">);</span><span class="k">return</span> <span class="kd">function</span><span class="p">(){</span><span class="nx">d</span><span class="o">=</span><span class="k">this</span><span class="p">;</span><span class="nx">e</span><span class="o">=</span><span class="nx">arguments</span><span class="p">;</span><span class="kd">var</span> <span class="nx">b</span><span class="p">;</span><span class="nx">f</span><span class="o">||</span><span class="p">(</span><span class="nx">f</span><span class="o">=</span><span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="nx">f</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span><span class="nx">h</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">);</span><span class="nx">i</span><span class="p">()},</span><span class="nx">c</span><span class="p">));</span><span class="nx">g</span><span class="o">?</span><span class="nx">h</span><span class="o">=</span><span class="kc">true</span><span class="o">:</span>
<span class="nx">a</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">);</span><span class="nx">i</span><span class="p">();</span><span class="nx">g</span><span class="o">=</span><span class="kc">true</span><span class="p">}};</span><span class="nx">b</span><span class="p">.</span><span class="nx">debounce</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="p">;</span><span class="k">return</span> <span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="k">this</span><span class="p">,</span><span class="nx">f</span><span class="o">=</span><span class="nx">arguments</span><span class="p">;</span><span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">d</span><span class="p">);</span><span class="nx">d</span><span class="o">=</span><span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="nx">d</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span><span class="nx">a</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">f</span><span class="p">)},</span><span class="nx">b</span><span class="p">)}};</span><span class="nx">b</span><span class="p">.</span><span class="nx">once</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="kc">false</span><span class="p">,</span><span class="nx">d</span><span class="p">;</span><span class="k">return</span> <span class="kd">function</span><span class="p">(){</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span><span class="k">return</span> <span class="nx">d</span><span class="p">;</span><span class="nx">b</span><span class="o">=</span><span class="kc">true</span><span class="p">;</span><span class="k">return</span> <span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">arguments</span><span class="p">)}};</span><span class="nx">b</span><span class="p">.</span><span class="nx">wrap</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span> <span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="p">[</span><span class="nx">a</span><span class="p">].</span><span class="nx">concat</span><span class="p">(</span><span class="nx">i</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span><span class="mi">0</span><span class="p">));</span><span class="k">return</span> <span class="nx">b</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">d</span><span class="p">)}};</span><span class="nx">b</span><span class="p">.</span><span class="nx">compose</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="nx">arguments</span><span class="p">;</span><span class="k">return</span> <span class="kd">function</span><span class="p">(){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">arguments</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span><span class="nx">d</span><span class="o">&gt;=</span><span class="mi">0</span><span class="p">;</span><span class="nx">d</span><span class="o">--</span><span class="p">)</span><span class="nx">b</span><span class="o">=</span><span class="p">[</span><span class="nx">a</span><span class="p">[</span><span class="nx">d</span><span class="p">].</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">b</span><span class="p">)];</span><span class="k">return</span> <span class="nx">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]}};</span>
<span class="nx">b</span><span class="p">.</span><span class="nx">after</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="o">&lt;=</span><span class="mi">0</span><span class="o">?</span><span class="nx">b</span><span class="p">()</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">if</span><span class="p">(</span><span class="o">--</span><span class="nx">a</span><span class="o">&lt;</span><span class="mi">1</span><span class="p">)</span><span class="k">return</span> <span class="nx">b</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">arguments</span><span class="p">)}};</span><span class="nx">b</span><span class="p">.</span><span class="nx">keys</span><span class="o">=</span><span class="nx">J</span><span class="o">||</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="o">!==</span><span class="nb">Object</span><span class="p">(</span><span class="nx">a</span><span class="p">))</span><span class="k">throw</span> <span class="k">new</span> <span class="nx">TypeError</span><span class="p">(</span><span class="s2">&quot;Invalid object&quot;</span><span class="p">);</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="p">[],</span><span class="nx">d</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="nx">d</span> <span class="k">in</span> <span class="nx">a</span><span class="p">)</span><span class="nx">b</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">d</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">c</span><span class="p">[</span><span class="nx">c</span><span class="p">.</span><span class="nx">length</span><span class="p">]</span><span class="o">=</span><span class="nx">d</span><span class="p">);</span><span class="k">return</span> <span class="nx">c</span><span class="p">};</span><span class="nx">b</span><span class="p">.</span><span class="nx">values</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">b</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">identity</span><span class="p">)};</span><span class="nx">b</span><span class="p">.</span><span class="nx">functions</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">methods</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="p">[],</span><span class="nx">d</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="nx">d</span> <span class="k">in</span> <span class="nx">a</span><span class="p">)</span><span class="nx">b</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">d</span><span class="p">])</span><span class="o">&amp;&amp;</span><span class="nx">c</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">d</span><span class="p">);</span><span class="k">return</span> <span class="nx">c</span><span class="p">.</span><span class="nx">sort</span><span class="p">()};</span><span class="nx">b</span><span class="p">.</span><span class="nx">extend</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">j</span><span class="p">(</span><span class="nx">i</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">d</span> <span class="k">in</span> <span class="nx">b</span><span class="p">)</span><span class="nx">a</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span><span class="o">=</span><span class="nx">b</span><span class="p">[</span><span class="nx">d</span><span class="p">]});</span><span class="k">return</span> <span class="nx">a</span><span class="p">};</span><span class="nx">b</span><span class="p">.</span><span class="nx">defaults</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">j</span><span class="p">(</span><span class="nx">i</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span>
<span class="mi">1</span><span class="p">),</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">d</span> <span class="k">in</span> <span class="nx">b</span><span class="p">)</span><span class="nx">a</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span><span class="o">==</span><span class="kc">null</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span><span class="o">=</span><span class="nx">b</span><span class="p">[</span><span class="nx">d</span><span class="p">])});</span><span class="k">return</span> <span class="nx">a</span><span class="p">};</span><span class="nx">b</span><span class="p">.</span><span class="nx">clone</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span><span class="o">!</span><span class="nx">b</span><span class="p">.</span><span class="nx">isObject</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">?</span><span class="nx">a</span><span class="o">:</span><span class="nx">b</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">?</span><span class="nx">a</span><span class="p">.</span><span class="nx">slice</span><span class="p">()</span><span class="o">:</span><span class="nx">b</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span><span class="nx">a</span><span class="p">)};</span><span class="nx">b</span><span class="p">.</span><span class="nx">tap</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="nx">b</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span><span class="k">return</span> <span class="nx">a</span><span class="p">};</span><span class="nx">b</span><span class="p">.</span><span class="nx">isEqual</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span> <span class="nx">q</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,[])};</span><span class="nx">b</span><span class="p">.</span><span class="nx">isEmpty</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">||</span><span class="nx">b</span><span class="p">.</span><span class="nx">isString</span><span class="p">(</span><span class="nx">a</span><span class="p">))</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="o">===</span><span class="mi">0</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span> <span class="k">in</span> <span class="nx">a</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">))</span><span class="k">return</span> <span class="kc">false</span><span class="p">;</span><span class="k">return</span> <span class="kc">true</span><span class="p">};</span><span class="nx">b</span><span class="p">.</span><span class="nx">isElement</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span><span class="o">!!</span><span class="p">(</span><span class="nx">a</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">nodeType</span><span class="o">==</span><span class="mi">1</span><span class="p">)};</span><span class="nx">b</span><span class="p">.</span><span class="nx">isArray</span><span class="o">=</span><span class="nx">o</span><span class="o">||</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">l</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">==</span><span class="s2">&quot;[object Array]&quot;</span><span class="p">};</span><span class="nx">b</span><span class="p">.</span><span class="nx">isObject</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="o">===</span><span class="nb">Object</span><span class="p">(</span><span class="nx">a</span><span class="p">)};</span>
<span class="nx">b</span><span class="p">.</span><span class="nx">isArguments</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">l</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">==</span><span class="s2">&quot;[object Arguments]&quot;</span><span class="p">};</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">b</span><span class="p">.</span><span class="nx">isArguments</span><span class="p">(</span><span class="nx">arguments</span><span class="p">))</span><span class="nx">b</span><span class="p">.</span><span class="nx">isArguments</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span><span class="o">!</span><span class="p">(</span><span class="o">!</span><span class="nx">a</span><span class="o">||!</span><span class="nx">b</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="s2">&quot;callee&quot;</span><span class="p">))};</span><span class="nx">b</span><span class="p">.</span><span class="nx">isFunction</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">l</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">==</span><span class="s2">&quot;[object Function]&quot;</span><span class="p">};</span><span class="nx">b</span><span class="p">.</span><span class="nx">isString</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">l</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">==</span><span class="s2">&quot;[object String]&quot;</span><span class="p">};</span><span class="nx">b</span><span class="p">.</span><span class="nx">isNumber</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">l</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">==</span><span class="s2">&quot;[object Number]&quot;</span><span class="p">};</span><span class="nx">b</span><span class="p">.</span><span class="nb">isNaN</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="o">!==</span><span class="nx">a</span><span class="p">};</span><span class="nx">b</span><span class="p">.</span><span class="nx">isBoolean</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="o">===</span><span class="kc">true</span><span class="o">||</span><span class="nx">a</span><span class="o">===</span><span class="kc">false</span><span class="o">||</span><span class="nx">l</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">==</span><span class="s2">&quot;[object Boolean]&quot;</span><span class="p">};</span><span class="nx">b</span><span class="p">.</span><span class="nx">isDate</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">l</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">==</span><span class="s2">&quot;[object Date]&quot;</span><span class="p">};</span>
<span class="nx">b</span><span class="p">.</span><span class="nx">isRegExp</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">l</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">==</span><span class="s2">&quot;[object RegExp]&quot;</span><span class="p">};</span><span class="nx">b</span><span class="p">.</span><span class="nx">isNull</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="o">===</span><span class="kc">null</span><span class="p">};</span><span class="nx">b</span><span class="p">.</span><span class="nx">isUndefined</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="o">===</span><span class="k">void</span> <span class="mi">0</span><span class="p">};</span><span class="nx">b</span><span class="p">.</span><span class="nx">has</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span> <span class="nx">I</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">)};</span><span class="nx">b</span><span class="p">.</span><span class="nx">noConflict</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="nx">r</span><span class="p">.</span><span class="nx">_</span><span class="o">=</span><span class="nx">G</span><span class="p">;</span><span class="k">return</span> <span class="k">this</span><span class="p">};</span><span class="nx">b</span><span class="p">.</span><span class="nx">identity</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="p">};</span><span class="nx">b</span><span class="p">.</span><span class="nx">times</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">d</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">e</span><span class="o">&lt;</span><span class="nx">a</span><span class="p">;</span><span class="nx">e</span><span class="o">++</span><span class="p">)</span><span class="nx">b</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">)};</span><span class="nx">b</span><span class="p">.</span><span class="nx">escape</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="o">+</span><span class="nx">a</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&amp;/g</span><span class="p">,</span><span class="s2">&quot;&amp;amp;&quot;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&lt;/g</span><span class="p">,</span><span class="s2">&quot;&amp;lt;&quot;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&gt;/g</span><span class="p">,</span><span class="s2">&quot;&amp;gt;&quot;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&quot;/g</span><span class="p">,</span><span class="s2">&quot;&amp;quot;&quot;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&#39;/g</span><span class="p">,</span><span class="s2">&quot;&amp;#x27;&quot;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\//g</span><span class="p">,</span><span class="s2">&quot;&amp;#x2F;&quot;</span><span class="p">)};</span><span class="nx">b</span><span class="p">.</span><span class="nx">mixin</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">j</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">functions</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span>
<span class="kd">function</span><span class="p">(</span><span class="nx">c</span><span class="p">){</span><span class="nx">K</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">b</span><span class="p">[</span><span class="nx">c</span><span class="p">]</span><span class="o">=</span><span class="nx">a</span><span class="p">[</span><span class="nx">c</span><span class="p">])})};</span><span class="kd">var</span> <span class="nx">L</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">b</span><span class="p">.</span><span class="nx">uniqueId</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">L</span><span class="o">++</span><span class="p">;</span><span class="k">return</span> <span class="nx">a</span><span class="o">?</span><span class="nx">a</span><span class="o">+</span><span class="nx">b</span><span class="o">:</span><span class="nx">b</span><span class="p">};</span><span class="nx">b</span><span class="p">.</span><span class="nx">templateSettings</span><span class="o">=</span><span class="p">{</span><span class="nx">evaluate</span><span class="o">:</span><span class="sr">/&lt;%([\s\S]+?)%&gt;/g</span><span class="p">,</span><span class="nx">interpolate</span><span class="o">:</span><span class="sr">/&lt;%=([\s\S]+?)%&gt;/g</span><span class="p">,</span><span class="nx">escape</span><span class="o">:</span><span class="sr">/&lt;%-([\s\S]+?)%&gt;/g</span><span class="p">};</span><span class="kd">var</span> <span class="nx">t</span><span class="o">=</span><span class="sr">/.^/</span><span class="p">,</span><span class="nx">u</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\\\\/g</span><span class="p">,</span><span class="s2">&quot;\\&quot;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\\&#39;/g</span><span class="p">,</span><span class="s2">&quot;&#39;&quot;</span><span class="p">)};</span><span class="nx">b</span><span class="p">.</span><span class="nx">template</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">templateSettings</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="s2">&quot;var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push(&#39;&quot;</span><span class="o">+</span><span class="nx">a</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\\/g</span><span class="p">,</span><span class="s2">&quot;\\\\&quot;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&#39;/g</span><span class="p">,</span><span class="s2">&quot;\\&#39;&quot;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">escape</span><span class="o">||</span><span class="nx">t</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span><span class="s2">&quot;&#39;,_.escape(&quot;</span><span class="o">+</span>
<span class="nx">u</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;),&#39;&quot;</span><span class="p">}).</span><span class="nx">replace</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">interpolate</span><span class="o">||</span><span class="nx">t</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span><span class="s2">&quot;&#39;,&quot;</span><span class="o">+</span><span class="nx">u</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;,&#39;&quot;</span><span class="p">}).</span><span class="nx">replace</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">evaluate</span><span class="o">||</span><span class="nx">t</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span><span class="s2">&quot;&#39;);&quot;</span><span class="o">+</span><span class="nx">u</span><span class="p">(</span><span class="nx">b</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/[\r\n\t]/g</span><span class="p">,</span><span class="s2">&quot; &quot;</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;;__p.push(&#39;&quot;</span><span class="p">}).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\r/g</span><span class="p">,</span><span class="s2">&quot;\\r&quot;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\n/g</span><span class="p">,</span><span class="s2">&quot;\\n&quot;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\t/g</span><span class="p">,</span><span class="s2">&quot;\\t&quot;</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;&#39;);}return __p.join(&#39;&#39;);&quot;</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="k">new</span> <span class="nb">Function</span><span class="p">(</span><span class="s2">&quot;obj&quot;</span><span class="p">,</span><span class="s2">&quot;_&quot;</span><span class="p">,</span><span class="nx">d</span><span class="p">);</span><span class="k">return</span> <span class="nx">c</span><span class="o">?</span><span class="nx">e</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">b</span><span class="p">)</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">e</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">)}};</span><span class="nx">b</span><span class="p">.</span><span class="nx">chain</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">b</span><span class="p">(</span><span class="nx">a</span><span class="p">).</span><span class="nx">chain</span><span class="p">()};</span><span class="kd">var</span> <span class="nx">m</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">_wrapped</span><span class="o">=</span><span class="nx">a</span><span class="p">};</span><span class="nx">b</span><span class="p">.</span><span class="nx">prototype</span><span class="o">=</span><span class="nx">m</span><span class="p">.</span><span class="nx">prototype</span><span class="p">;</span><span class="kd">var</span> <span class="nx">v</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="k">return</span> <span class="nx">c</span><span class="o">?</span><span class="nx">b</span><span class="p">(</span><span class="nx">a</span><span class="p">).</span><span class="nx">chain</span><span class="p">()</span><span class="o">:</span><span class="nx">a</span><span class="p">},</span><span class="nx">K</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="nx">m</span><span class="p">.</span><span class="nx">prototype</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="o">=</span>
<span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="nx">i</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span><span class="nx">H</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">_wrapped</span><span class="p">);</span><span class="k">return</span> <span class="nx">v</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">_chain</span><span class="p">)}};</span><span class="nx">b</span><span class="p">.</span><span class="nx">mixin</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span><span class="nx">j</span><span class="p">(</span><span class="s2">&quot;pop,push,reverse,shift,sort,splice,unshift&quot;</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">),</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">k</span><span class="p">[</span><span class="nx">a</span><span class="p">];</span><span class="nx">m</span><span class="p">.</span><span class="nx">prototype</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">_wrapped</span><span class="p">;</span><span class="nx">b</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">arguments</span><span class="p">);</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">length</span><span class="p">;(</span><span class="nx">a</span><span class="o">==</span><span class="s2">&quot;shift&quot;</span><span class="o">||</span><span class="nx">a</span><span class="o">==</span><span class="s2">&quot;splice&quot;</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="nx">e</span><span class="o">===</span><span class="mi">0</span><span class="o">&amp;&amp;</span><span class="k">delete</span> <span class="nx">d</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span><span class="k">return</span> <span class="nx">v</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">_chain</span><span class="p">)}});</span><span class="nx">j</span><span class="p">([</span><span class="s2">&quot;concat&quot;</span><span class="p">,</span><span class="s2">&quot;join&quot;</span><span class="p">,</span><span class="s2">&quot;slice&quot;</span><span class="p">],</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">k</span><span class="p">[</span><span class="nx">a</span><span class="p">];</span><span class="nx">m</span><span class="p">.</span><span class="nx">prototype</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="nx">v</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_wrapped</span><span class="p">,</span><span class="nx">arguments</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">_chain</span><span class="p">)}});</span><span class="nx">m</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">chain</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">_chain</span><span class="o">=</span>
<span class="kc">true</span><span class="p">;</span><span class="k">return</span> <span class="k">this</span><span class="p">};</span><span class="nx">m</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">value</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_wrapped</span><span class="p">}}).</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>Backbone.js 0.9.1
(c) 2010-2012 Jeremy Ashkenas, DocumentCloud Inc.
Backbone may be freely distributed under the MIT license.
For all details and documentation:
http://backbonejs.org</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="k">this</span><span class="p">,</span><span class="nx">r</span><span class="o">=</span><span class="nx">i</span><span class="p">.</span><span class="nx">Backbone</span><span class="p">,</span><span class="nx">s</span><span class="o">=</span><span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">,</span><span class="nx">t</span><span class="o">=</span><span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">splice</span><span class="p">,</span><span class="nx">g</span><span class="p">;</span><span class="nx">g</span><span class="o">=</span><span class="s2">&quot;undefined&quot;</span><span class="o">!==</span><span class="k">typeof</span> <span class="nx">exports</span><span class="o">?</span><span class="nx">exports</span><span class="o">:</span><span class="nx">i</span><span class="p">.</span><span class="nx">Backbone</span><span class="o">=</span><span class="p">{};</span><span class="nx">g</span><span class="p">.</span><span class="nx">VERSION</span><span class="o">=</span><span class="s2">&quot;0.9.1&quot;</span><span class="p">;</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="nx">i</span><span class="p">.</span><span class="nx">_</span><span class="p">;</span><span class="o">!</span><span class="nx">f</span><span class="o">&amp;&amp;</span><span class="s2">&quot;undefined&quot;</span><span class="o">!==</span><span class="k">typeof</span> <span class="nx">require</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">f</span><span class="o">=</span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;underscore&quot;</span><span class="p">));</span><span class="kd">var</span> <span class="nx">h</span><span class="o">=</span><span class="nx">i</span><span class="p">.</span><span class="nx">jQuery</span><span class="o">||</span><span class="nx">i</span><span class="p">.</span><span class="nx">Zepto</span><span class="o">||</span><span class="nx">i</span><span class="p">.</span><span class="nx">ender</span><span class="p">;</span><span class="nx">g</span><span class="p">.</span><span class="nx">setDomLibrary</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">h</span><span class="o">=</span><span class="nx">a</span><span class="p">};</span><span class="nx">g</span><span class="p">.</span><span class="nx">noConflict</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="nx">i</span><span class="p">.</span><span class="nx">Backbone</span><span class="o">=</span><span class="nx">r</span><span class="p">;</span><span class="k">return</span> <span class="k">this</span><span class="p">};</span><span class="nx">g</span><span class="p">.</span><span class="nx">emulateHTTP</span><span class="o">=!</span><span class="mi">1</span><span class="p">;</span><span class="nx">g</span><span class="p">.</span><span class="nx">emulateJSON</span><span class="o">=!</span><span class="mi">1</span><span class="p">;</span><span class="nx">g</span><span class="p">.</span><span class="nx">Events</span><span class="o">=</span><span class="p">{</span><span class="nx">on</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">d</span><span class="p">,</span><span class="nx">a</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/\s+/</span><span class="p">),</span><span class="nx">e</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">_callbacks</span><span class="o">||</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_callbacks</span><span class="o">=</span><span class="p">{});</span><span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">shift</span><span class="p">();){</span><span class="nx">d</span><span class="o">=</span><span class="nx">e</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span><span class="o">||</span><span class="p">(</span><span class="nx">e</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span><span class="o">=</span>
<span class="p">{});</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">tail</span><span class="o">||</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">tail</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">next</span><span class="o">=</span><span class="p">{});</span><span class="nx">f</span><span class="p">.</span><span class="nx">callback</span><span class="o">=</span><span class="nx">b</span><span class="p">;</span><span class="nx">f</span><span class="p">.</span><span class="nx">context</span><span class="o">=</span><span class="nx">c</span><span class="p">;</span><span class="nx">d</span><span class="p">.</span><span class="nx">tail</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">next</span><span class="o">=</span><span class="p">{}}</span><span class="k">return</span> <span class="k">this</span><span class="p">},</span><span class="nx">off</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">f</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">e</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">_callbacks</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="nx">a</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/\s+/</span><span class="p">);</span><span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">shift</span><span class="p">();)</span><span class="k">if</span><span class="p">(</span><span class="nx">f</span><span class="o">=</span><span class="nx">e</span><span class="p">[</span><span class="nx">d</span><span class="p">],</span><span class="k">delete</span> <span class="nx">e</span><span class="p">[</span><span class="nx">d</span><span class="p">],</span><span class="nx">b</span><span class="o">&amp;&amp;</span><span class="nx">f</span><span class="p">)</span><span class="k">for</span><span class="p">(;(</span><span class="nx">f</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">next</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="nx">f</span><span class="p">.</span><span class="nx">next</span><span class="p">;)</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">callback</span><span class="o">===</span><span class="nx">b</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="o">!</span><span class="nx">c</span><span class="o">||</span><span class="nx">f</span><span class="p">.</span><span class="nx">context</span><span class="o">===</span><span class="nx">c</span><span class="p">)))</span><span class="k">this</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">f</span><span class="p">.</span><span class="nx">callback</span><span class="p">,</span><span class="nx">f</span><span class="p">.</span><span class="nx">context</span><span class="p">)}</span><span class="k">else</span> <span class="k">delete</span> <span class="k">this</span><span class="p">.</span><span class="nx">_callbacks</span><span class="p">;</span><span class="k">return</span> <span class="k">this</span><span class="p">},</span><span class="nx">trigger</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">d</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">_callbacks</span><span class="p">))</span><span class="k">return</span> <span class="k">this</span><span class="p">;</span><span class="nx">e</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">all</span><span class="p">;</span><span class="k">for</span><span class="p">((</span><span class="nx">a</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/\s+/</span><span class="p">)).</span><span class="nx">push</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span><span class="nx">b</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">shift</span><span class="p">();)</span><span class="nx">e</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="nx">next</span><span class="o">:</span><span class="nx">e</span><span class="p">.</span><span class="nx">next</span><span class="p">,</span><span class="nx">tail</span><span class="o">:</span><span class="nx">e</span><span class="p">.</span><span class="nx">tail</span><span class="p">,</span>
<span class="nx">event</span><span class="o">:</span><span class="nx">b</span><span class="p">}),(</span><span class="nx">c</span><span class="o">=</span><span class="nx">d</span><span class="p">[</span><span class="nx">b</span><span class="p">])</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="nx">next</span><span class="o">:</span><span class="nx">c</span><span class="p">.</span><span class="nx">next</span><span class="p">,</span><span class="nx">tail</span><span class="o">:</span><span class="nx">c</span><span class="p">.</span><span class="nx">tail</span><span class="p">});</span><span class="k">for</span><span class="p">(</span><span class="nx">e</span><span class="o">=</span><span class="nx">s</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span><span class="nx">c</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">pop</span><span class="p">();){</span><span class="nx">b</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">tail</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="nx">d</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">event</span><span class="o">?</span><span class="p">[</span><span class="nx">c</span><span class="p">.</span><span class="nx">event</span><span class="p">].</span><span class="nx">concat</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="o">:</span><span class="nx">e</span><span class="p">;(</span><span class="nx">c</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">next</span><span class="p">)</span><span class="o">!==</span><span class="nx">b</span><span class="p">;)</span><span class="nx">c</span><span class="p">.</span><span class="nx">callback</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">context</span><span class="o">||</span><span class="k">this</span><span class="p">,</span><span class="nx">d</span><span class="p">)}</span><span class="k">return</span> <span class="k">this</span><span class="p">}};</span><span class="nx">g</span><span class="p">.</span><span class="nx">Events</span><span class="p">.</span><span class="nx">bind</span><span class="o">=</span><span class="nx">g</span><span class="p">.</span><span class="nx">Events</span><span class="p">.</span><span class="nx">on</span><span class="p">;</span><span class="nx">g</span><span class="p">.</span><span class="nx">Events</span><span class="p">.</span><span class="nx">unbind</span><span class="o">=</span><span class="nx">g</span><span class="p">.</span><span class="nx">Events</span><span class="p">.</span><span class="nx">off</span><span class="p">;</span><span class="nx">g</span><span class="p">.</span><span class="nx">Model</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="p">;</span><span class="nx">a</span><span class="o">||</span><span class="p">(</span><span class="nx">a</span><span class="o">=</span><span class="p">{});</span><span class="nx">b</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">.</span><span class="nx">parse</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">a</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">a</span><span class="p">));</span><span class="k">if</span><span class="p">(</span><span class="nx">c</span><span class="o">=</span><span class="nx">j</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="s2">&quot;defaults&quot;</span><span class="p">))</span><span class="nx">a</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span><span class="nx">c</span><span class="p">,</span><span class="nx">a</span><span class="p">);</span><span class="nx">b</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">.</span><span class="nx">collection</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">collection</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">collection</span><span class="p">);</span><span class="k">this</span><span class="p">.</span><span class="nx">attributes</span><span class="o">=</span><span class="p">{};</span><span class="k">this</span><span class="p">.</span><span class="nx">_escapedAttributes</span><span class="o">=</span><span class="p">{};</span><span class="k">this</span><span class="p">.</span><span class="nx">cid</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">uniqueId</span><span class="p">(</span><span class="s2">&quot;c&quot;</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span>
<span class="p">{</span><span class="nx">silent</span><span class="o">:!</span><span class="mi">0</span><span class="p">}))</span><span class="k">throw</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;Can&#39;t create an invalid model&quot;</span><span class="p">);</span><span class="k">delete</span> <span class="k">this</span><span class="p">.</span><span class="nx">_changed</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">_previousAttributes</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">clone</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">attributes</span><span class="p">);</span><span class="k">this</span><span class="p">.</span><span class="nx">initialize</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">arguments</span><span class="p">)};</span><span class="nx">f</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">Model</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span><span class="nx">g</span><span class="p">.</span><span class="nx">Events</span><span class="p">,{</span><span class="nx">idAttribute</span><span class="o">:</span><span class="s2">&quot;id&quot;</span><span class="p">,</span><span class="nx">initialize</span><span class="o">:</span><span class="kd">function</span><span class="p">(){},</span><span class="nx">toJSON</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="nx">f</span><span class="p">.</span><span class="nx">clone</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">attributes</span><span class="p">)},</span><span class="nx">get</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">attributes</span><span class="p">[</span><span class="nx">a</span><span class="p">]},</span><span class="nx">escape</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">_escapedAttributes</span><span class="p">[</span><span class="nx">a</span><span class="p">])</span><span class="k">return</span> <span class="nx">b</span><span class="p">;</span><span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">attributes</span><span class="p">[</span><span class="nx">a</span><span class="p">];</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_escapedAttributes</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">escape</span><span class="p">(</span><span class="kc">null</span><span class="o">==</span><span class="nx">b</span><span class="o">?</span><span class="s2">&quot;&quot;</span><span class="o">:</span><span class="s2">&quot;&quot;</span><span class="o">+</span><span class="nx">b</span><span class="p">)},</span><span class="nx">has</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="kc">null</span><span class="o">!=</span>
<span class="k">this</span><span class="p">.</span><span class="nx">attributes</span><span class="p">[</span><span class="nx">a</span><span class="p">]},</span><span class="nx">set</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">;</span><span class="nx">f</span><span class="p">.</span><span class="nx">isObject</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">||</span><span class="kc">null</span><span class="o">==</span><span class="nx">a</span><span class="o">?</span><span class="p">(</span><span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="nx">b</span><span class="p">)</span><span class="o">:</span><span class="p">(</span><span class="nx">d</span><span class="o">=</span><span class="p">{},</span><span class="nx">d</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="o">=</span><span class="nx">b</span><span class="p">);</span><span class="nx">c</span><span class="o">||</span><span class="p">(</span><span class="nx">c</span><span class="o">=</span><span class="p">{});</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">d</span><span class="p">)</span><span class="k">return</span> <span class="k">this</span><span class="p">;</span><span class="nx">d</span> <span class="k">instanceof</span> <span class="nx">g</span><span class="p">.</span><span class="nx">Model</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">d</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">attributes</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">unset</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="nx">e</span> <span class="k">in</span> <span class="nx">d</span><span class="p">)</span><span class="nx">d</span><span class="p">[</span><span class="nx">e</span><span class="p">]</span><span class="o">=</span><span class="k">void</span> <span class="mi">0</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">_validate</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">c</span><span class="p">))</span><span class="k">return</span><span class="o">!</span><span class="mi">1</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">idAttribute</span> <span class="k">in</span> <span class="nx">d</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="o">=</span><span class="nx">d</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">idAttribute</span><span class="p">]);</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">attributes</span><span class="p">,</span><span class="nx">k</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">_escapedAttributes</span><span class="p">,</span><span class="nx">n</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">_previousAttributes</span><span class="o">||</span><span class="p">{},</span><span class="nx">h</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">_setting</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">_changed</span><span class="o">||</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_changed</span><span class="o">=</span><span class="p">{});</span><span class="k">this</span><span class="p">.</span><span class="nx">_setting</span><span class="o">=!</span><span class="mi">0</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="nx">e</span> <span class="k">in</span> <span class="nx">d</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="o">=</span><span class="nx">d</span><span class="p">[</span><span class="nx">e</span><span class="p">],</span><span class="nx">f</span><span class="p">.</span><span class="nx">isEqual</span><span class="p">(</span><span class="nx">b</span><span class="p">[</span><span class="nx">e</span><span class="p">],</span><span class="nx">a</span><span class="p">)</span><span class="o">||</span><span class="k">delete</span> <span class="nx">k</span><span class="p">[</span><span class="nx">e</span><span class="p">],</span><span class="nx">c</span><span class="p">.</span><span class="nx">unset</span><span class="o">?</span><span class="k">delete</span> <span class="nx">b</span><span class="p">[</span><span class="nx">e</span><span class="p">]</span><span class="o">:</span><span class="nx">b</span><span class="p">[</span><span class="nx">e</span><span class="p">]</span><span class="o">=</span>
<span class="nx">a</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">_changing</span><span class="o">&amp;&amp;!</span><span class="nx">f</span><span class="p">.</span><span class="nx">isEqual</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_changed</span><span class="p">[</span><span class="nx">e</span><span class="p">],</span><span class="nx">a</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s2">&quot;change:&quot;</span><span class="o">+</span><span class="nx">e</span><span class="p">,</span><span class="k">this</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">_moreChanges</span><span class="o">=!</span><span class="mi">0</span><span class="p">),</span><span class="k">delete</span> <span class="k">this</span><span class="p">.</span><span class="nx">_changed</span><span class="p">[</span><span class="nx">e</span><span class="p">],</span><span class="o">!</span><span class="nx">f</span><span class="p">.</span><span class="nx">isEqual</span><span class="p">(</span><span class="nx">n</span><span class="p">[</span><span class="nx">e</span><span class="p">],</span><span class="nx">a</span><span class="p">)</span><span class="o">||</span><span class="nx">f</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">e</span><span class="p">)</span><span class="o">!=</span><span class="nx">f</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">n</span><span class="p">,</span><span class="nx">e</span><span class="p">))</span><span class="k">this</span><span class="p">.</span><span class="nx">_changed</span><span class="p">[</span><span class="nx">e</span><span class="p">]</span><span class="o">=</span><span class="nx">a</span><span class="p">;</span><span class="nx">h</span><span class="o">||</span><span class="p">(</span><span class="o">!</span><span class="nx">c</span><span class="p">.</span><span class="nx">silent</span><span class="o">&amp;&amp;</span><span class="k">this</span><span class="p">.</span><span class="nx">hasChanged</span><span class="p">()</span><span class="o">&amp;&amp;</span><span class="k">this</span><span class="p">.</span><span class="nx">change</span><span class="p">(</span><span class="nx">c</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">_setting</span><span class="o">=!</span><span class="mi">1</span><span class="p">);</span><span class="k">return</span> <span class="k">this</span><span class="p">},</span><span class="nx">unset</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){(</span><span class="nx">b</span><span class="o">||</span><span class="p">(</span><span class="nx">b</span><span class="o">=</span><span class="p">{})).</span><span class="nx">unset</span><span class="o">=!</span><span class="mi">0</span><span class="p">;</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="nx">b</span><span class="p">)},</span><span class="nx">clear</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){(</span><span class="nx">a</span><span class="o">||</span><span class="p">(</span><span class="nx">a</span><span class="o">=</span><span class="p">{})).</span><span class="nx">unset</span><span class="o">=!</span><span class="mi">0</span><span class="p">;</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">clone</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">attributes</span><span class="p">),</span><span class="nx">a</span><span class="p">)},</span><span class="nx">fetch</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="nx">a</span><span class="o">?</span><span class="nx">f</span><span class="p">.</span><span class="nx">clone</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">:</span><span class="p">{},</span><span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">success</span><span class="p">;</span><span class="nx">a</span><span class="p">.</span><span class="nx">success</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span>
<span class="nx">e</span><span class="p">,</span><span class="nx">f</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">b</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">f</span><span class="p">),</span><span class="nx">a</span><span class="p">))</span><span class="k">return</span><span class="o">!</span><span class="mi">1</span><span class="p">;</span><span class="nx">c</span><span class="o">&amp;&amp;</span><span class="nx">c</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">d</span><span class="p">)};</span><span class="nx">a</span><span class="p">.</span><span class="nx">error</span><span class="o">=</span><span class="nx">g</span><span class="p">.</span><span class="nx">wrapError</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="p">);</span><span class="k">return</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">sync</span><span class="o">||</span><span class="nx">g</span><span class="p">.</span><span class="nx">sync</span><span class="p">).</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="s2">&quot;read&quot;</span><span class="p">,</span><span class="k">this</span><span class="p">,</span><span class="nx">a</span><span class="p">)},</span><span class="nx">save</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">;</span><span class="nx">f</span><span class="p">.</span><span class="nx">isObject</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">||</span><span class="kc">null</span><span class="o">==</span><span class="nx">a</span><span class="o">?</span><span class="p">(</span><span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="nx">b</span><span class="p">)</span><span class="o">:</span><span class="p">(</span><span class="nx">d</span><span class="o">=</span><span class="p">{},</span><span class="nx">d</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="o">=</span><span class="nx">b</span><span class="p">);</span><span class="nx">c</span><span class="o">=</span><span class="nx">c</span><span class="o">?</span><span class="nx">f</span><span class="p">.</span><span class="nx">clone</span><span class="p">(</span><span class="nx">c</span><span class="p">)</span><span class="o">:</span><span class="p">{};</span><span class="nx">c</span><span class="p">.</span><span class="nx">wait</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">e</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">clone</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">attributes</span><span class="p">));</span><span class="nx">a</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span><span class="nx">c</span><span class="p">,{</span><span class="nx">silent</span><span class="o">:!</span><span class="mi">0</span><span class="p">});</span><span class="k">if</span><span class="p">(</span><span class="nx">d</span><span class="o">&amp;&amp;!</span><span class="k">this</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">c</span><span class="p">.</span><span class="nx">wait</span><span class="o">?</span><span class="nx">a</span><span class="o">:</span><span class="nx">c</span><span class="p">))</span><span class="k">return</span><span class="o">!</span><span class="mi">1</span><span class="p">;</span><span class="kd">var</span> <span class="nx">k</span><span class="o">=</span><span class="k">this</span><span class="p">,</span><span class="nx">h</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">success</span><span class="p">;</span><span class="nx">c</span><span class="p">.</span><span class="nx">success</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="nx">b</span><span class="o">=</span><span class="nx">k</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">e</span><span class="p">);</span><span class="nx">c</span><span class="p">.</span><span class="nx">wait</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">b</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">d</span><span class="o">||</span><span class="p">{},</span><span class="nx">b</span><span class="p">));</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">k</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">))</span><span class="k">return</span><span class="o">!</span><span class="mi">1</span><span class="p">;</span><span class="nx">h</span><span class="o">?</span><span class="nx">h</span><span class="p">(</span><span class="nx">k</span><span class="p">,</span><span class="nx">a</span><span class="p">)</span><span class="o">:</span><span class="nx">k</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s2">&quot;sync&quot;</span><span class="p">,</span><span class="nx">k</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">)};</span><span class="nx">c</span><span class="p">.</span><span class="nx">error</span><span class="o">=</span><span class="nx">g</span><span class="p">.</span><span class="nx">wrapError</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span>
<span class="nx">k</span><span class="p">,</span><span class="nx">c</span><span class="p">);</span><span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">isNew</span><span class="p">()</span><span class="o">?</span><span class="s2">&quot;create&quot;</span><span class="o">:</span><span class="s2">&quot;update&quot;</span><span class="p">;</span><span class="nx">b</span><span class="o">=</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">sync</span><span class="o">||</span><span class="nx">g</span><span class="p">.</span><span class="nx">sync</span><span class="p">).</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="k">this</span><span class="p">,</span><span class="nx">c</span><span class="p">);</span><span class="nx">c</span><span class="p">.</span><span class="nx">wait</span><span class="o">&amp;&amp;</span><span class="k">this</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">a</span><span class="p">);</span><span class="k">return</span> <span class="nx">b</span><span class="p">},</span><span class="nx">destroy</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="nx">a</span><span class="o">?</span><span class="nx">f</span><span class="p">.</span><span class="nx">clone</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">:</span><span class="p">{},</span><span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">success</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="nx">b</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s2">&quot;destroy&quot;</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">collection</span><span class="p">,</span><span class="nx">a</span><span class="p">)};</span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">isNew</span><span class="p">())</span><span class="k">return</span> <span class="nx">d</span><span class="p">();</span><span class="nx">a</span><span class="p">.</span><span class="nx">success</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">wait</span><span class="o">&amp;&amp;</span><span class="nx">d</span><span class="p">();</span><span class="nx">c</span><span class="o">?</span><span class="nx">c</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">e</span><span class="p">)</span><span class="o">:</span><span class="nx">b</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s2">&quot;sync&quot;</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">a</span><span class="p">)};</span><span class="nx">a</span><span class="p">.</span><span class="nx">error</span><span class="o">=</span><span class="nx">g</span><span class="p">.</span><span class="nx">wrapError</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="p">);</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">sync</span><span class="o">||</span><span class="nx">g</span><span class="p">.</span><span class="nx">sync</span><span class="p">).</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="s2">&quot;delete&quot;</span><span class="p">,</span><span class="k">this</span><span class="p">,</span><span class="nx">a</span><span class="p">);</span><span class="nx">a</span><span class="p">.</span><span class="nx">wait</span><span class="o">||</span><span class="nx">d</span><span class="p">();</span><span class="k">return</span> <span class="nx">e</span><span class="p">},</span><span class="nx">url</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="nx">j</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">collection</span><span class="p">,</span><span class="s2">&quot;url&quot;</span><span class="p">)</span><span class="o">||</span><span class="nx">j</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="s2">&quot;urlRoot&quot;</span><span class="p">)</span><span class="o">||</span><span class="nx">o</span><span class="p">();</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">isNew</span><span class="p">()</span><span class="o">?</span>
<span class="nx">a</span><span class="o">:</span><span class="nx">a</span><span class="o">+</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="o">==</span><span class="nx">a</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">?</span><span class="s2">&quot;&quot;</span><span class="o">:</span><span class="s2">&quot;/&quot;</span><span class="p">)</span><span class="o">+</span><span class="nb">encodeURIComponent</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="p">)},</span><span class="nx">parse</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="p">},</span><span class="nx">clone</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">new</span> <span class="k">this</span><span class="p">.</span><span class="nx">constructor</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">attributes</span><span class="p">)},</span><span class="nx">isNew</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="kc">null</span><span class="o">==</span><span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="p">},</span><span class="nx">change</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_changing</span><span class="o">||!</span><span class="k">this</span><span class="p">.</span><span class="nx">hasChanged</span><span class="p">())</span><span class="k">return</span> <span class="k">this</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">_moreChanges</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">_changing</span><span class="o">=!</span><span class="mi">0</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">b</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">_changed</span><span class="p">)</span><span class="k">this</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s2">&quot;change:&quot;</span><span class="o">+</span><span class="nx">b</span><span class="p">,</span><span class="k">this</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">_changed</span><span class="p">[</span><span class="nx">b</span><span class="p">],</span><span class="nx">a</span><span class="p">);</span><span class="k">for</span><span class="p">(;</span><span class="k">this</span><span class="p">.</span><span class="nx">_moreChanges</span><span class="p">;)</span><span class="k">this</span><span class="p">.</span><span class="nx">_moreChanges</span><span class="o">=!</span><span class="mi">1</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s2">&quot;change&quot;</span><span class="p">,</span><span class="k">this</span><span class="p">,</span><span class="nx">a</span><span class="p">);</span><span class="k">this</span><span class="p">.</span><span class="nx">_previousAttributes</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">clone</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">attributes</span><span class="p">);</span>
<span class="k">delete</span> <span class="k">this</span><span class="p">.</span><span class="nx">_changed</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">_changing</span><span class="o">=!</span><span class="mi">1</span><span class="p">;</span><span class="k">return</span> <span class="k">this</span><span class="p">},</span><span class="nx">hasChanged</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="o">?!</span><span class="nx">f</span><span class="p">.</span><span class="nx">isEmpty</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_changed</span><span class="p">)</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">_changed</span><span class="o">&amp;&amp;</span><span class="nx">f</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_changed</span><span class="p">,</span><span class="nx">a</span><span class="p">)},</span><span class="nx">changedAttributes</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">a</span><span class="p">)</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">hasChanged</span><span class="p">()</span><span class="o">?</span><span class="nx">f</span><span class="p">.</span><span class="nx">clone</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_changed</span><span class="p">)</span><span class="o">:!</span><span class="mi">1</span><span class="p">;</span><span class="kd">var</span> <span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="o">=!</span><span class="mi">1</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">_previousAttributes</span><span class="p">,</span><span class="nx">e</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="nx">e</span> <span class="k">in</span> <span class="nx">a</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">f</span><span class="p">.</span><span class="nx">isEqual</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="nx">e</span><span class="p">],</span><span class="nx">b</span><span class="o">=</span><span class="nx">a</span><span class="p">[</span><span class="nx">e</span><span class="p">]))(</span><span class="nx">c</span><span class="o">||</span><span class="p">(</span><span class="nx">c</span><span class="o">=</span><span class="p">{}))[</span><span class="nx">e</span><span class="p">]</span><span class="o">=</span><span class="nx">b</span><span class="p">;</span><span class="k">return</span> <span class="nx">c</span><span class="p">},</span><span class="nx">previous</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="o">||!</span><span class="k">this</span><span class="p">.</span><span class="nx">_previousAttributes</span><span class="o">?</span><span class="kc">null</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">_previousAttributes</span><span class="p">[</span><span class="nx">a</span><span class="p">]},</span><span class="nx">previousAttributes</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="nx">f</span><span class="p">.</span><span class="nx">clone</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_previousAttributes</span><span class="p">)},</span>
<span class="nx">isValid</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">validate</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">attributes</span><span class="p">)},</span><span class="nx">_validate</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">silent</span><span class="o">||!</span><span class="k">this</span><span class="p">.</span><span class="nx">validate</span><span class="p">)</span><span class="k">return</span><span class="o">!</span><span class="mi">0</span><span class="p">;</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span><span class="k">this</span><span class="p">.</span><span class="nx">attributes</span><span class="p">,</span><span class="nx">a</span><span class="p">),</span><span class="nx">c</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">validate</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">c</span><span class="p">)</span><span class="k">return</span><span class="o">!</span><span class="mi">0</span><span class="p">;</span><span class="nx">b</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">.</span><span class="nx">error</span><span class="o">?</span><span class="nx">b</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">b</span><span class="p">)</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s2">&quot;error&quot;</span><span class="p">,</span><span class="k">this</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">b</span><span class="p">);</span><span class="k">return</span><span class="o">!</span><span class="mi">1</span><span class="p">}});</span><span class="nx">g</span><span class="p">.</span><span class="nx">Collection</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="nx">b</span><span class="o">||</span><span class="p">(</span><span class="nx">b</span><span class="o">=</span><span class="p">{});</span><span class="nx">b</span><span class="p">.</span><span class="nx">comparator</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">comparator</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">comparator</span><span class="p">);</span><span class="k">this</span><span class="p">.</span><span class="nx">_reset</span><span class="p">();</span><span class="k">this</span><span class="p">.</span><span class="nx">initialize</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">arguments</span><span class="p">);</span><span class="nx">a</span><span class="o">&amp;&amp;</span><span class="k">this</span><span class="p">.</span><span class="nx">reset</span><span class="p">(</span><span class="nx">a</span><span class="p">,{</span><span class="nx">silent</span><span class="o">:!</span><span class="mi">0</span><span class="p">,</span><span class="nx">parse</span><span class="o">:</span><span class="nx">b</span><span class="p">.</span><span class="nx">parse</span><span class="p">})};</span><span class="nx">f</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">Collection</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span><span class="nx">g</span><span class="p">.</span><span class="nx">Events</span><span class="p">,{</span><span class="nx">model</span><span class="o">:</span><span class="nx">g</span><span class="p">.</span><span class="nx">Model</span><span class="p">,</span><span class="nx">initialize</span><span class="o">:</span><span class="kd">function</span><span class="p">(){},</span>
<span class="nx">toJSON</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">toJSON</span><span class="p">()})},</span><span class="nx">add</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">g</span><span class="p">,</span><span class="nx">h</span><span class="p">,</span><span class="nx">i</span><span class="o">=</span><span class="p">{},</span><span class="nx">j</span><span class="o">=</span><span class="p">{};</span><span class="nx">b</span><span class="o">||</span><span class="p">(</span><span class="nx">b</span><span class="o">=</span><span class="p">{});</span><span class="nx">a</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">?</span><span class="nx">a</span><span class="p">.</span><span class="nx">slice</span><span class="p">()</span><span class="o">:</span><span class="p">[</span><span class="nx">a</span><span class="p">];</span><span class="k">for</span><span class="p">(</span><span class="nx">c</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">c</span><span class="o">&lt;</span><span class="nx">d</span><span class="p">;</span><span class="nx">c</span><span class="o">++</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">e</span><span class="o">=</span><span class="nx">a</span><span class="p">[</span><span class="nx">c</span><span class="p">]</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">_prepareModel</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">c</span><span class="p">],</span><span class="nx">b</span><span class="p">)))</span><span class="k">throw</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;Can&#39;t add an invalid model to a collection&quot;</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">i</span><span class="p">[</span><span class="nx">g</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">cid</span><span class="p">]</span><span class="o">||</span><span class="k">this</span><span class="p">.</span><span class="nx">_byCid</span><span class="p">[</span><span class="nx">g</span><span class="p">]</span><span class="o">||</span><span class="kc">null</span><span class="o">!=</span><span class="p">(</span><span class="nx">h</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">j</span><span class="p">[</span><span class="nx">h</span><span class="p">]</span><span class="o">||</span><span class="k">this</span><span class="p">.</span><span class="nx">_byId</span><span class="p">[</span><span class="nx">h</span><span class="p">]))</span><span class="k">throw</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;Can&#39;t add the same model to a collection twice&quot;</span><span class="p">);</span><span class="nx">i</span><span class="p">[</span><span class="nx">g</span><span class="p">]</span><span class="o">=</span><span class="nx">j</span><span class="p">[</span><span class="nx">h</span><span class="p">]</span><span class="o">=</span><span class="nx">e</span><span class="p">}</span><span class="k">for</span><span class="p">(</span><span class="nx">c</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">c</span><span class="o">&lt;</span><span class="nx">d</span><span class="p">;</span><span class="nx">c</span><span class="o">++</span><span class="p">)(</span><span class="nx">e</span><span class="o">=</span><span class="nx">a</span><span class="p">[</span><span class="nx">c</span><span class="p">]).</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;all&quot;</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">_onModelEvent</span><span class="p">,</span><span class="k">this</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">_byCid</span><span class="p">[</span><span class="nx">e</span><span class="p">.</span><span class="nx">cid</span><span class="p">]</span><span class="o">=</span><span class="nx">e</span><span class="p">,</span><span class="kc">null</span><span class="o">!=</span>
<span class="nx">e</span><span class="p">.</span><span class="nx">id</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_byId</span><span class="p">[</span><span class="nx">e</span><span class="p">.</span><span class="nx">id</span><span class="p">]</span><span class="o">=</span><span class="nx">e</span><span class="p">);</span><span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="o">+=</span><span class="nx">d</span><span class="p">;</span><span class="nx">t</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">models</span><span class="p">,[</span><span class="kc">null</span><span class="o">!=</span><span class="nx">b</span><span class="p">.</span><span class="nx">at</span><span class="o">?</span><span class="nx">b</span><span class="p">.</span><span class="nx">at</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">models</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span><span class="mi">0</span><span class="p">].</span><span class="nx">concat</span><span class="p">(</span><span class="nx">a</span><span class="p">));</span><span class="k">this</span><span class="p">.</span><span class="nx">comparator</span><span class="o">&amp;&amp;</span><span class="k">this</span><span class="p">.</span><span class="nx">sort</span><span class="p">({</span><span class="nx">silent</span><span class="o">:!</span><span class="mi">0</span><span class="p">});</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">silent</span><span class="p">)</span><span class="k">return</span> <span class="k">this</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="nx">c</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">models</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">c</span><span class="o">&lt;</span><span class="nx">d</span><span class="p">;</span><span class="nx">c</span><span class="o">++</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="nx">i</span><span class="p">[(</span><span class="nx">e</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">models</span><span class="p">[</span><span class="nx">c</span><span class="p">]).</span><span class="nx">cid</span><span class="p">])</span><span class="nx">b</span><span class="p">.</span><span class="nx">index</span><span class="o">=</span><span class="nx">c</span><span class="p">,</span><span class="nx">e</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s2">&quot;add&quot;</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="k">this</span><span class="p">,</span><span class="nx">b</span><span class="p">);</span><span class="k">return</span> <span class="k">this</span><span class="p">},</span><span class="nx">remove</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">g</span><span class="p">;</span><span class="nx">b</span><span class="o">||</span><span class="p">(</span><span class="nx">b</span><span class="o">=</span><span class="p">{});</span><span class="nx">a</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">?</span><span class="nx">a</span><span class="p">.</span><span class="nx">slice</span><span class="p">()</span><span class="o">:</span><span class="p">[</span><span class="nx">a</span><span class="p">];</span><span class="k">for</span><span class="p">(</span><span class="nx">c</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">c</span><span class="o">&lt;</span><span class="nx">d</span><span class="p">;</span><span class="nx">c</span><span class="o">++</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="nx">g</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">getByCid</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">c</span><span class="p">])</span><span class="o">||</span><span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">c</span><span class="p">]))</span><span class="k">delete</span> <span class="k">this</span><span class="p">.</span><span class="nx">_byId</span><span class="p">[</span><span class="nx">g</span><span class="p">.</span><span class="nx">id</span><span class="p">],</span><span class="k">delete</span> <span class="k">this</span><span class="p">.</span><span class="nx">_byCid</span><span class="p">[</span><span class="nx">g</span><span class="p">.</span><span class="nx">cid</span><span class="p">],</span><span class="nx">e</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">g</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">models</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span>
<span class="mi">1</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="o">--</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">silent</span><span class="o">||</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">index</span><span class="o">=</span><span class="nx">e</span><span class="p">,</span><span class="nx">g</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s2">&quot;remove&quot;</span><span class="p">,</span><span class="nx">g</span><span class="p">,</span><span class="k">this</span><span class="p">,</span><span class="nx">b</span><span class="p">)),</span><span class="k">this</span><span class="p">.</span><span class="nx">_removeReference</span><span class="p">(</span><span class="nx">g</span><span class="p">);</span><span class="k">return</span> <span class="k">this</span><span class="p">},</span><span class="nx">get</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="kc">null</span><span class="o">==</span><span class="nx">a</span><span class="o">?</span><span class="kc">null</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">_byId</span><span class="p">[</span><span class="kc">null</span><span class="o">!=</span><span class="nx">a</span><span class="p">.</span><span class="nx">id</span><span class="o">?</span><span class="nx">a</span><span class="p">.</span><span class="nx">id</span><span class="o">:</span><span class="nx">a</span><span class="p">]},</span><span class="nx">getByCid</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="o">&amp;&amp;</span><span class="k">this</span><span class="p">.</span><span class="nx">_byCid</span><span class="p">[</span><span class="nx">a</span><span class="p">.</span><span class="nx">cid</span><span class="o">||</span><span class="nx">a</span><span class="p">]},</span><span class="nx">at</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">models</span><span class="p">[</span><span class="nx">a</span><span class="p">]},</span><span class="nx">sort</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="o">||</span><span class="p">(</span><span class="nx">a</span><span class="o">=</span><span class="p">{});</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">comparator</span><span class="p">)</span><span class="k">throw</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;Cannot sort a set without a comparator&quot;</span><span class="p">);</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">comparator</span><span class="p">,</span><span class="k">this</span><span class="p">);</span><span class="mi">1</span><span class="o">==</span><span class="k">this</span><span class="p">.</span><span class="nx">comparator</span><span class="p">.</span><span class="nx">length</span><span class="o">?</span><span class="k">this</span><span class="p">.</span><span class="nx">models</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">sortBy</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">models</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span><span class="nx">a</span><span class="p">.</span><span class="nx">silent</span><span class="o">||</span><span class="k">this</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s2">&quot;reset&quot;</span><span class="p">,</span>
<span class="k">this</span><span class="p">,</span><span class="nx">a</span><span class="p">);</span><span class="k">return</span> <span class="k">this</span><span class="p">},</span><span class="nx">pluck</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">f</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">models</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span> <span class="nx">b</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">a</span><span class="p">)})},</span><span class="nx">reset</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="nx">a</span><span class="o">||</span><span class="p">(</span><span class="nx">a</span><span class="o">=</span><span class="p">[]);</span><span class="nx">b</span><span class="o">||</span><span class="p">(</span><span class="nx">b</span><span class="o">=</span><span class="p">{});</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">models</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">c</span><span class="o">&lt;</span><span class="nx">d</span><span class="p">;</span><span class="nx">c</span><span class="o">++</span><span class="p">)</span><span class="k">this</span><span class="p">.</span><span class="nx">_removeReference</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">models</span><span class="p">[</span><span class="nx">c</span><span class="p">]);</span><span class="k">this</span><span class="p">.</span><span class="nx">_reset</span><span class="p">();</span><span class="k">this</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">a</span><span class="p">,{</span><span class="nx">silent</span><span class="o">:!</span><span class="mi">0</span><span class="p">,</span><span class="nx">parse</span><span class="o">:</span><span class="nx">b</span><span class="p">.</span><span class="nx">parse</span><span class="p">});</span><span class="nx">b</span><span class="p">.</span><span class="nx">silent</span><span class="o">||</span><span class="k">this</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s2">&quot;reset&quot;</span><span class="p">,</span><span class="k">this</span><span class="p">,</span><span class="nx">b</span><span class="p">);</span><span class="k">return</span> <span class="k">this</span><span class="p">},</span><span class="nx">fetch</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="o">=</span><span class="nx">a</span><span class="o">?</span><span class="nx">f</span><span class="p">.</span><span class="nx">clone</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">:</span><span class="p">{};</span><span class="k">void</span> <span class="mi">0</span><span class="o">===</span><span class="nx">a</span><span class="p">.</span><span class="nx">parse</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">parse</span><span class="o">=!</span><span class="mi">0</span><span class="p">);</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">success</span><span class="p">;</span><span class="nx">a</span><span class="p">.</span><span class="nx">success</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">f</span><span class="p">){</span><span class="nx">b</span><span class="p">[</span><span class="nx">a</span><span class="p">.</span><span class="nx">add</span><span class="o">?</span><span class="s2">&quot;add&quot;</span><span class="o">:</span><span class="s2">&quot;reset&quot;</span><span class="p">](</span><span class="nx">b</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">f</span><span class="p">),</span><span class="nx">a</span><span class="p">);</span><span class="nx">c</span><span class="o">&amp;&amp;</span><span class="nx">c</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">d</span><span class="p">)};</span><span class="nx">a</span><span class="p">.</span><span class="nx">error</span><span class="o">=</span><span class="nx">g</span><span class="p">.</span><span class="nx">wrapError</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span>
<span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="p">);</span><span class="k">return</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">sync</span><span class="o">||</span><span class="nx">g</span><span class="p">.</span><span class="nx">sync</span><span class="p">).</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="s2">&quot;read&quot;</span><span class="p">,</span><span class="k">this</span><span class="p">,</span><span class="nx">a</span><span class="p">)},</span><span class="nx">create</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="k">this</span><span class="p">,</span><span class="nx">b</span><span class="o">=</span><span class="nx">b</span><span class="o">?</span><span class="nx">f</span><span class="p">.</span><span class="nx">clone</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span><span class="o">:</span><span class="p">{},</span><span class="nx">a</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">_prepareModel</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">a</span><span class="p">)</span><span class="k">return</span><span class="o">!</span><span class="mi">1</span><span class="p">;</span><span class="nx">b</span><span class="p">.</span><span class="nx">wait</span><span class="o">||</span><span class="nx">c</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">);</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">success</span><span class="p">;</span><span class="nx">b</span><span class="p">.</span><span class="nx">success</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">f</span><span class="p">){</span><span class="nx">b</span><span class="p">.</span><span class="nx">wait</span><span class="o">&amp;&amp;</span><span class="nx">c</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">b</span><span class="p">);</span><span class="nx">d</span><span class="o">?</span><span class="nx">d</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">f</span><span class="p">)</span><span class="o">:</span><span class="nx">e</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s2">&quot;sync&quot;</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">f</span><span class="p">,</span><span class="nx">b</span><span class="p">)};</span><span class="nx">a</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="nx">b</span><span class="p">);</span><span class="k">return</span> <span class="nx">a</span><span class="p">},</span><span class="nx">parse</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="p">},</span><span class="nx">chain</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="nx">f</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">models</span><span class="p">).</span><span class="nx">chain</span><span class="p">()},</span><span class="nx">_reset</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">models</span><span class="o">=</span><span class="p">[];</span><span class="k">this</span><span class="p">.</span><span class="nx">_byId</span><span class="o">=</span><span class="p">{};</span><span class="k">this</span><span class="p">.</span><span class="nx">_byCid</span><span class="o">=</span><span class="p">{}},</span><span class="nx">_prepareModel</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="nx">a</span> <span class="k">instanceof</span> <span class="nx">g</span><span class="p">.</span><span class="nx">Model</span><span class="o">?</span><span class="nx">a</span><span class="p">.</span><span class="nx">collection</span><span class="o">||</span>
<span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">collection</span><span class="o">=</span><span class="k">this</span><span class="p">)</span><span class="o">:</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">collection</span><span class="o">=</span><span class="k">this</span><span class="p">,</span><span class="nx">a</span><span class="o">=</span><span class="k">new</span> <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">),</span><span class="nx">a</span><span class="p">.</span><span class="nx">_validate</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">attributes</span><span class="p">,</span><span class="nx">b</span><span class="p">)</span><span class="o">||</span><span class="p">(</span><span class="nx">a</span><span class="o">=!</span><span class="mi">1</span><span class="p">));</span><span class="k">return</span> <span class="nx">a</span><span class="p">},</span><span class="nx">_removeReference</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">this</span><span class="o">==</span><span class="nx">a</span><span class="p">.</span><span class="nx">collection</span><span class="o">&amp;&amp;</span><span class="k">delete</span> <span class="nx">a</span><span class="p">.</span><span class="nx">collection</span><span class="p">;</span><span class="nx">a</span><span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="s2">&quot;all&quot;</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">_onModelEvent</span><span class="p">,</span><span class="k">this</span><span class="p">)},</span><span class="nx">_onModelEvent</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">){(</span><span class="s2">&quot;add&quot;</span><span class="o">==</span><span class="nx">a</span><span class="o">||</span><span class="s2">&quot;remove&quot;</span><span class="o">==</span><span class="nx">a</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="nx">c</span><span class="o">!=</span><span class="k">this</span><span class="o">||</span><span class="p">(</span><span class="s2">&quot;destroy&quot;</span><span class="o">==</span><span class="nx">a</span><span class="o">&amp;&amp;</span><span class="k">this</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">d</span><span class="p">),</span><span class="nx">b</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="o">===</span><span class="s2">&quot;change:&quot;</span><span class="o">+</span><span class="nx">b</span><span class="p">.</span><span class="nx">idAttribute</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="k">delete</span> <span class="k">this</span><span class="p">.</span><span class="nx">_byId</span><span class="p">[</span><span class="nx">b</span><span class="p">.</span><span class="nx">previous</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">idAttribute</span><span class="p">)],</span><span class="k">this</span><span class="p">.</span><span class="nx">_byId</span><span class="p">[</span><span class="nx">b</span><span class="p">.</span><span class="nx">id</span><span class="p">]</span><span class="o">=</span><span class="nx">b</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">trigger</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">arguments</span><span class="p">))}});</span><span class="nx">f</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="s2">&quot;forEach,each,map,reduce,reduceRight,find,detect,filter,select,reject,every,all,some,any,include,contains,invoke,max,min,sortBy,sortedIndex,toArray,size,first,initial,rest,last,without,indexOf,shuffle,lastIndexOf,isEmpty,groupBy&quot;</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">),</span>
<span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">g</span><span class="p">.</span><span class="nx">Collection</span><span class="p">.</span><span class="nx">prototype</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="nx">f</span><span class="p">[</span><span class="nx">a</span><span class="p">].</span><span class="nx">apply</span><span class="p">(</span><span class="nx">f</span><span class="p">,[</span><span class="k">this</span><span class="p">.</span><span class="nx">models</span><span class="p">].</span><span class="nx">concat</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">toArray</span><span class="p">(</span><span class="nx">arguments</span><span class="p">)))}});</span><span class="nx">g</span><span class="p">.</span><span class="nx">Router</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="o">||</span><span class="p">(</span><span class="nx">a</span><span class="o">=</span><span class="p">{});</span><span class="nx">a</span><span class="p">.</span><span class="nx">routes</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">routes</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">routes</span><span class="p">);</span><span class="k">this</span><span class="p">.</span><span class="nx">_bindRoutes</span><span class="p">();</span><span class="k">this</span><span class="p">.</span><span class="nx">initialize</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">arguments</span><span class="p">)};</span><span class="kd">var</span> <span class="nx">u</span><span class="o">=</span><span class="sr">/:\w+/g</span><span class="p">,</span><span class="nx">v</span><span class="o">=</span><span class="sr">/\*\w+/g</span><span class="p">,</span><span class="nx">w</span><span class="o">=</span><span class="sr">/[-[\]{}()+?.,\\^$|#\s]/g</span><span class="p">;</span><span class="nx">f</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">Router</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span><span class="nx">g</span><span class="p">.</span><span class="nx">Events</span><span class="p">,{</span><span class="nx">initialize</span><span class="o">:</span><span class="kd">function</span><span class="p">(){},</span><span class="nx">route</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="nx">g</span><span class="p">.</span><span class="nx">history</span><span class="o">||</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">history</span><span class="o">=</span><span class="k">new</span> <span class="nx">g</span><span class="p">.</span><span class="nx">History</span><span class="p">);</span><span class="nx">f</span><span class="p">.</span><span class="nx">isRegExp</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">||</span><span class="p">(</span><span class="nx">a</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">_routeToRegExp</span><span class="p">(</span><span class="nx">a</span><span class="p">));</span><span class="nx">c</span><span class="o">||</span><span class="p">(</span><span class="nx">c</span><span class="o">=</span><span class="k">this</span><span class="p">[</span><span class="nx">b</span><span class="p">]);</span><span class="nx">g</span><span class="p">.</span><span class="nx">history</span><span class="p">.</span><span class="nx">route</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">f</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">){</span><span class="nx">d</span><span class="o">=</span>
<span class="k">this</span><span class="p">.</span><span class="nx">_extractParameters</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">d</span><span class="p">);</span><span class="nx">c</span><span class="o">&amp;&amp;</span><span class="nx">c</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">d</span><span class="p">);</span><span class="k">this</span><span class="p">.</span><span class="nx">trigger</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,[</span><span class="s2">&quot;route:&quot;</span><span class="o">+</span><span class="nx">b</span><span class="p">].</span><span class="nx">concat</span><span class="p">(</span><span class="nx">d</span><span class="p">));</span><span class="nx">g</span><span class="p">.</span><span class="nx">history</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s2">&quot;route&quot;</span><span class="p">,</span><span class="k">this</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">d</span><span class="p">)},</span><span class="k">this</span><span class="p">));</span><span class="k">return</span> <span class="k">this</span><span class="p">},</span><span class="nx">navigate</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="nx">g</span><span class="p">.</span><span class="nx">history</span><span class="p">.</span><span class="nx">navigate</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">)},</span><span class="nx">_bindRoutes</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">routes</span><span class="p">){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="p">[],</span><span class="nx">b</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="nx">b</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">routes</span><span class="p">)</span><span class="nx">a</span><span class="p">.</span><span class="nx">unshift</span><span class="p">([</span><span class="nx">b</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">routes</span><span class="p">[</span><span class="nx">b</span><span class="p">]]);</span><span class="nx">b</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">b</span><span class="o">&lt;</span><span class="nx">c</span><span class="p">;</span><span class="nx">b</span><span class="o">++</span><span class="p">)</span><span class="k">this</span><span class="p">.</span><span class="nx">route</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">b</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="nx">a</span><span class="p">[</span><span class="nx">b</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="k">this</span><span class="p">[</span><span class="nx">a</span><span class="p">[</span><span class="nx">b</span><span class="p">][</span><span class="mi">1</span><span class="p">]])}},</span><span class="nx">_routeToRegExp</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span><span class="s2">&quot;\\$&amp;&quot;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="nx">u</span><span class="p">,</span><span class="s2">&quot;([^/]+)&quot;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="nx">v</span><span class="p">,</span><span class="s2">&quot;(.*?)&quot;</span><span class="p">);</span><span class="k">return</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s2">&quot;^&quot;</span><span class="o">+</span><span class="nx">a</span><span class="o">+</span><span class="s2">&quot;$&quot;</span><span class="p">)},</span><span class="nx">_extractParameters</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span>
<span class="nx">b</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">b</span><span class="p">).</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">)}});</span><span class="nx">g</span><span class="p">.</span><span class="nx">History</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">handlers</span><span class="o">=</span><span class="p">[];</span><span class="nx">f</span><span class="p">.</span><span class="nx">bindAll</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="s2">&quot;checkUrl&quot;</span><span class="p">)};</span><span class="kd">var</span> <span class="nx">m</span><span class="o">=</span><span class="sr">/^[#\/]/</span><span class="p">,</span><span class="nx">x</span><span class="o">=</span><span class="sr">/msie [\w.]+/</span><span class="p">,</span><span class="nx">l</span><span class="o">=!</span><span class="mi">1</span><span class="p">;</span><span class="nx">f</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">History</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span><span class="nx">g</span><span class="p">.</span><span class="nx">Events</span><span class="p">,{</span><span class="nx">interval</span><span class="o">:</span><span class="mi">50</span><span class="p">,</span><span class="nx">getFragment</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="kc">null</span><span class="o">==</span><span class="nx">a</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_hasPushState</span><span class="o">||</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">pathname</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">search</span><span class="p">;</span><span class="nx">c</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">a</span><span class="o">+=</span><span class="nx">c</span><span class="p">)}</span><span class="k">else</span> <span class="nx">a</span><span class="o">=</span><span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">hash</span><span class="p">;</span><span class="nx">a</span><span class="o">=</span><span class="nb">decodeURIComponent</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span><span class="nx">a</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">root</span><span class="p">)</span><span class="o">||</span><span class="p">(</span><span class="nx">a</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">root</span><span class="p">.</span><span class="nx">length</span><span class="p">));</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">m</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)},</span><span class="nx">start</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">l</span><span class="p">)</span><span class="k">throw</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;Backbone.history has already been started&quot;</span><span class="p">);</span>
<span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},{</span><span class="nx">root</span><span class="o">:</span><span class="s2">&quot;/&quot;</span><span class="p">},</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">,</span><span class="nx">a</span><span class="p">);</span><span class="k">this</span><span class="p">.</span><span class="nx">_wantsHashChange</span><span class="o">=!</span><span class="mi">1</span><span class="o">!==</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">hashChange</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">_wantsPushState</span><span class="o">=!!</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">pushState</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">_hasPushState</span><span class="o">=!</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">pushState</span><span class="o">||!</span><span class="nb">window</span><span class="p">.</span><span class="nx">history</span><span class="o">||!</span><span class="nb">window</span><span class="p">.</span><span class="nx">history</span><span class="p">.</span><span class="nx">pushState</span><span class="p">);</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">getFragment</span><span class="p">(),</span><span class="nx">b</span><span class="o">=</span><span class="nb">document</span><span class="p">.</span><span class="nx">documentMode</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="o">=</span><span class="nx">x</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">())</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="o">!</span><span class="nx">b</span><span class="o">||</span><span class="mi">7</span><span class="o">&gt;=</span><span class="nx">b</span><span class="p">))</span><span class="k">this</span><span class="p">.</span><span class="nx">iframe</span><span class="o">=</span><span class="nx">h</span><span class="p">(</span><span class="s1">&#39;&lt;iframe src=&quot;javascript:0&quot; tabindex=&quot;-1&quot; /&gt;&#39;</span><span class="p">).</span><span class="nx">hide</span><span class="p">().</span><span class="nx">appendTo</span><span class="p">(</span><span class="s2">&quot;body&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">contentWindow</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">navigate</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span><span class="k">this</span><span class="p">.</span><span class="nx">_hasPushState</span><span class="o">?</span><span class="nx">h</span><span class="p">(</span><span class="nb">window</span><span class="p">).</span><span class="nx">bind</span><span class="p">(</span><span class="s2">&quot;popstate&quot;</span><span class="p">,</span>
<span class="k">this</span><span class="p">.</span><span class="nx">checkUrl</span><span class="p">)</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">_wantsHashChange</span><span class="o">&amp;&amp;</span><span class="s2">&quot;onhashchange&quot;</span><span class="k">in</span> <span class="nb">window</span><span class="o">&amp;&amp;!</span><span class="nx">b</span><span class="o">?</span><span class="nx">h</span><span class="p">(</span><span class="nb">window</span><span class="p">).</span><span class="nx">bind</span><span class="p">(</span><span class="s2">&quot;hashchange&quot;</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">checkUrl</span><span class="p">)</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">_wantsHashChange</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_checkUrlInterval</span><span class="o">=</span><span class="nx">setInterval</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">checkUrl</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">interval</span><span class="p">));</span><span class="k">this</span><span class="p">.</span><span class="nx">fragment</span><span class="o">=</span><span class="nx">a</span><span class="p">;</span><span class="nx">l</span><span class="o">=!</span><span class="mi">0</span><span class="p">;</span><span class="nx">a</span><span class="o">=</span><span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">;</span><span class="nx">b</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">pathname</span><span class="o">==</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">root</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_wantsHashChange</span><span class="o">&amp;&amp;</span><span class="k">this</span><span class="p">.</span><span class="nx">_wantsPushState</span><span class="o">&amp;&amp;!</span><span class="k">this</span><span class="p">.</span><span class="nx">_hasPushState</span><span class="o">&amp;&amp;!</span><span class="nx">b</span><span class="p">)</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">fragment</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">getFragment</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="o">!</span><span class="mi">0</span><span class="p">),</span><span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">root</span><span class="o">+</span><span class="s2">&quot;#&quot;</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">fragment</span><span class="p">),</span><span class="o">!</span><span class="mi">0</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">_wantsPushState</span><span class="o">&amp;&amp;</span><span class="k">this</span><span class="p">.</span><span class="nx">_hasPushState</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">hash</span><span class="o">&amp;&amp;</span>
<span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">fragment</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">hash</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">m</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">),</span><span class="nb">window</span><span class="p">.</span><span class="nx">history</span><span class="p">.</span><span class="nx">replaceState</span><span class="p">({},</span><span class="nb">document</span><span class="p">.</span><span class="nx">title</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">protocol</span><span class="o">+</span><span class="s2">&quot;//&quot;</span><span class="o">+</span><span class="nx">a</span><span class="p">.</span><span class="nx">host</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">root</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">fragment</span><span class="p">));</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">silent</span><span class="p">)</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">loadUrl</span><span class="p">()},</span><span class="nx">stop</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="nx">h</span><span class="p">(</span><span class="nb">window</span><span class="p">).</span><span class="nx">unbind</span><span class="p">(</span><span class="s2">&quot;popstate&quot;</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">checkUrl</span><span class="p">).</span><span class="nx">unbind</span><span class="p">(</span><span class="s2">&quot;hashchange&quot;</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">checkUrl</span><span class="p">);</span><span class="nx">clearInterval</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_checkUrlInterval</span><span class="p">);</span><span class="nx">l</span><span class="o">=!</span><span class="mi">1</span><span class="p">},</span><span class="nx">route</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">handlers</span><span class="p">.</span><span class="nx">unshift</span><span class="p">({</span><span class="nx">route</span><span class="o">:</span><span class="nx">a</span><span class="p">,</span><span class="nx">callback</span><span class="o">:</span><span class="nx">b</span><span class="p">})},</span><span class="nx">checkUrl</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">getFragment</span><span class="p">();</span><span class="nx">a</span><span class="o">==</span><span class="k">this</span><span class="p">.</span><span class="nx">fragment</span><span class="o">&amp;&amp;</span><span class="k">this</span><span class="p">.</span><span class="nx">iframe</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">a</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">getFragment</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">iframe</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">hash</span><span class="p">));</span>
<span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="o">==</span><span class="k">this</span><span class="p">.</span><span class="nx">fragment</span><span class="o">||</span><span class="nx">a</span><span class="o">==</span><span class="nb">decodeURIComponent</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">fragment</span><span class="p">))</span><span class="k">return</span><span class="o">!</span><span class="mi">1</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">iframe</span><span class="o">&amp;&amp;</span><span class="k">this</span><span class="p">.</span><span class="nx">navigate</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span><span class="k">this</span><span class="p">.</span><span class="nx">loadUrl</span><span class="p">()</span><span class="o">||</span><span class="k">this</span><span class="p">.</span><span class="nx">loadUrl</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">hash</span><span class="p">)},</span><span class="nx">loadUrl</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">fragment</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">getFragment</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span><span class="k">return</span> <span class="nx">f</span><span class="p">.</span><span class="nx">any</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">handlers</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">b</span><span class="p">))</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">callback</span><span class="p">(</span><span class="nx">b</span><span class="p">),</span><span class="o">!</span><span class="mi">0</span><span class="p">})},</span><span class="nx">navigate</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">l</span><span class="p">)</span><span class="k">return</span><span class="o">!</span><span class="mi">1</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">b</span><span class="o">||!</span><span class="mi">0</span><span class="o">===</span><span class="nx">b</span><span class="p">)</span><span class="nx">b</span><span class="o">=</span><span class="p">{</span><span class="nx">trigger</span><span class="o">:</span><span class="nx">b</span><span class="p">};</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="p">(</span><span class="nx">a</span><span class="o">||</span><span class="s2">&quot;&quot;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="nx">m</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">);</span><span class="k">this</span><span class="p">.</span><span class="nx">fragment</span><span class="o">==</span><span class="nx">c</span><span class="o">||</span><span class="k">this</span><span class="p">.</span><span class="nx">fragment</span><span class="o">==</span><span class="nb">decodeURIComponent</span><span class="p">(</span><span class="nx">c</span><span class="p">)</span><span class="o">||</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_hasPushState</span><span class="o">?</span><span class="p">(</span><span class="mi">0</span><span class="o">!=</span><span class="nx">c</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">root</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">c</span><span class="o">=</span>
<span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">root</span><span class="o">+</span><span class="nx">c</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">fragment</span><span class="o">=</span><span class="nx">c</span><span class="p">,</span><span class="nb">window</span><span class="p">.</span><span class="nx">history</span><span class="p">[</span><span class="nx">b</span><span class="p">.</span><span class="nx">replace</span><span class="o">?</span><span class="s2">&quot;replaceState&quot;</span><span class="o">:</span><span class="s2">&quot;pushState&quot;</span><span class="p">]({},</span><span class="nb">document</span><span class="p">.</span><span class="nx">title</span><span class="p">,</span><span class="nx">c</span><span class="p">))</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">_wantsHashChange</span><span class="o">?</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">fragment</span><span class="o">=</span><span class="nx">c</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">_updateHash</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">replace</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">iframe</span><span class="o">&amp;&amp;</span><span class="nx">c</span><span class="o">!=</span><span class="k">this</span><span class="p">.</span><span class="nx">getFragment</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">iframe</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">hash</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">replace</span><span class="o">||</span><span class="k">this</span><span class="p">.</span><span class="nx">iframe</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">open</span><span class="p">().</span><span class="nx">close</span><span class="p">(),</span><span class="k">this</span><span class="p">.</span><span class="nx">_updateHash</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">iframe</span><span class="p">.</span><span class="nx">location</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">replace</span><span class="p">)))</span><span class="o">:</span><span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">assign</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">root</span><span class="o">+</span><span class="nx">a</span><span class="p">),</span><span class="nx">b</span><span class="p">.</span><span class="nx">trigger</span><span class="o">&amp;&amp;</span><span class="k">this</span><span class="p">.</span><span class="nx">loadUrl</span><span class="p">(</span><span class="nx">a</span><span class="p">))},</span><span class="nx">_updateHash</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="nx">c</span><span class="o">?</span><span class="nx">a</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">toString</span><span class="p">().</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/(javascript:|#).*$/</span><span class="p">,</span>
<span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;#&quot;</span><span class="o">+</span><span class="nx">b</span><span class="p">)</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">hash</span><span class="o">=</span><span class="nx">b</span><span class="p">}});</span><span class="nx">g</span><span class="p">.</span><span class="nx">View</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">cid</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">uniqueId</span><span class="p">(</span><span class="s2">&quot;view&quot;</span><span class="p">);</span><span class="k">this</span><span class="p">.</span><span class="nx">_configure</span><span class="p">(</span><span class="nx">a</span><span class="o">||</span><span class="p">{});</span><span class="k">this</span><span class="p">.</span><span class="nx">_ensureElement</span><span class="p">();</span><span class="k">this</span><span class="p">.</span><span class="nx">initialize</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">arguments</span><span class="p">);</span><span class="k">this</span><span class="p">.</span><span class="nx">delegateEvents</span><span class="p">()};</span><span class="kd">var</span> <span class="nx">y</span><span class="o">=</span><span class="sr">/^(\S+)\s*(.*)$/</span><span class="p">,</span><span class="nx">p</span><span class="o">=</span><span class="s2">&quot;model,collection,el,id,attributes,className,tagName&quot;</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">);</span><span class="nx">f</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">View</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span><span class="nx">g</span><span class="p">.</span><span class="nx">Events</span><span class="p">,{</span><span class="nx">tagName</span><span class="o">:</span><span class="s2">&quot;div&quot;</span><span class="p">,</span><span class="nx">$</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">$el</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">a</span><span class="p">)},</span><span class="nx">initialize</span><span class="o">:</span><span class="kd">function</span><span class="p">(){},</span><span class="nx">render</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">},</span><span class="nx">remove</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">$el</span><span class="p">.</span><span class="nx">remove</span><span class="p">();</span><span class="k">return</span> <span class="k">this</span><span class="p">},</span><span class="nx">make</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="nx">a</span><span class="o">=</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
<span class="nx">b</span><span class="o">&amp;&amp;</span><span class="nx">h</span><span class="p">(</span><span class="nx">a</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span><span class="nx">c</span><span class="o">&amp;&amp;</span><span class="nx">h</span><span class="p">(</span><span class="nx">a</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">c</span><span class="p">);</span><span class="k">return</span> <span class="nx">a</span><span class="p">},</span><span class="nx">setElement</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">$el</span><span class="o">=</span><span class="nx">h</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span><span class="k">this</span><span class="p">.</span><span class="nx">el</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">$el</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span><span class="o">!</span><span class="mi">1</span><span class="o">!==</span><span class="nx">b</span><span class="o">&amp;&amp;</span><span class="k">this</span><span class="p">.</span><span class="nx">delegateEvents</span><span class="p">();</span><span class="k">return</span> <span class="k">this</span><span class="p">},</span><span class="nx">delegateEvents</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="o">||</span><span class="p">(</span><span class="nx">a</span><span class="o">=</span><span class="nx">j</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="s2">&quot;events&quot;</span><span class="p">))){</span><span class="k">this</span><span class="p">.</span><span class="nx">undelegateEvents</span><span class="p">();</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">b</span> <span class="k">in</span> <span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">a</span><span class="p">[</span><span class="nx">b</span><span class="p">];</span><span class="nx">f</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">c</span><span class="p">)</span><span class="o">||</span><span class="p">(</span><span class="nx">c</span><span class="o">=</span><span class="k">this</span><span class="p">[</span><span class="nx">a</span><span class="p">[</span><span class="nx">b</span><span class="p">]]);</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">c</span><span class="p">)</span><span class="k">throw</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;Event &quot;&#39;</span><span class="o">+</span><span class="nx">a</span><span class="p">[</span><span class="nx">b</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;&quot; does not exist&#39;</span><span class="p">);</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">y</span><span class="p">),</span><span class="nx">e</span><span class="o">=</span><span class="nx">d</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="nx">d</span><span class="o">=</span><span class="nx">d</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="nx">c</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="k">this</span><span class="p">),</span><span class="nx">e</span><span class="o">=</span><span class="nx">e</span><span class="o">+</span><span class="p">(</span><span class="s2">&quot;.delegateEvents&quot;</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">cid</span><span class="p">);</span><span class="s2">&quot;&quot;</span><span class="o">===</span><span class="nx">d</span><span class="o">?</span><span class="k">this</span><span class="p">.</span><span class="nx">$el</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">c</span><span class="p">)</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">$el</span><span class="p">.</span><span class="nx">delegate</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">c</span><span class="p">)}}},</span><span class="nx">undelegateEvents</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">$el</span><span class="p">.</span><span class="nx">unbind</span><span class="p">(</span><span class="s2">&quot;.delegateEvents&quot;</span><span class="o">+</span>
<span class="k">this</span><span class="p">.</span><span class="nx">cid</span><span class="p">)},</span><span class="nx">_configure</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">a</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">,</span><span class="nx">a</span><span class="p">));</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="nx">p</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">b</span><span class="o">&lt;</span><span class="nx">c</span><span class="p">;</span><span class="nx">b</span><span class="o">++</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">p</span><span class="p">[</span><span class="nx">b</span><span class="p">];</span><span class="nx">a</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span><span class="o">=</span><span class="nx">a</span><span class="p">[</span><span class="nx">d</span><span class="p">])}</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="o">=</span><span class="nx">a</span><span class="p">},</span><span class="nx">_ensureElement</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">el</span><span class="p">)</span><span class="k">this</span><span class="p">.</span><span class="nx">setElement</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">el</span><span class="p">,</span><span class="o">!</span><span class="mi">1</span><span class="p">);</span><span class="k">else</span><span class="p">{</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="nx">j</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="s2">&quot;attributes&quot;</span><span class="p">)</span><span class="o">||</span><span class="p">{};</span><span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">id</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span><span class="k">this</span><span class="p">.</span><span class="nx">className</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="s2">&quot;class&quot;</span><span class="p">]</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">className</span><span class="p">);</span><span class="k">this</span><span class="p">.</span><span class="nx">setElement</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">make</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">tagName</span><span class="p">,</span><span class="nx">a</span><span class="p">),</span><span class="o">!</span><span class="mi">1</span><span class="p">)}}});</span><span class="nx">g</span><span class="p">.</span><span class="nx">Model</span><span class="p">.</span><span class="nx">extend</span><span class="o">=</span><span class="nx">g</span><span class="p">.</span><span class="nx">Collection</span><span class="p">.</span><span class="nx">extend</span><span class="o">=</span><span class="nx">g</span><span class="p">.</span><span class="nx">Router</span><span class="p">.</span><span class="nx">extend</span><span class="o">=</span><span class="nx">g</span><span class="p">.</span><span class="nx">View</span><span class="p">.</span><span class="nx">extend</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">z</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">);</span><span class="nx">c</span><span class="p">.</span><span class="nx">extend</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">extend</span><span class="p">;</span><span class="k">return</span> <span class="nx">c</span><span class="p">};</span>
<span class="kd">var</span> <span class="nx">A</span><span class="o">=</span><span class="p">{</span><span class="nx">create</span><span class="o">:</span><span class="s2">&quot;POST&quot;</span><span class="p">,</span><span class="nx">update</span><span class="o">:</span><span class="s2">&quot;PUT&quot;</span><span class="p">,</span><span class="s2">&quot;delete&quot;</span><span class="o">:</span><span class="s2">&quot;DELETE&quot;</span><span class="p">,</span><span class="nx">read</span><span class="o">:</span><span class="s2">&quot;GET&quot;</span><span class="p">};</span><span class="nx">g</span><span class="p">.</span><span class="nx">sync</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">A</span><span class="p">[</span><span class="nx">a</span><span class="p">],</span><span class="nx">e</span><span class="o">=</span><span class="p">{</span><span class="nx">type</span><span class="o">:</span><span class="nx">d</span><span class="p">,</span><span class="nx">dataType</span><span class="o">:</span><span class="s2">&quot;json&quot;</span><span class="p">};</span><span class="nx">c</span><span class="p">.</span><span class="nx">url</span><span class="o">||</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">url</span><span class="o">=</span><span class="nx">j</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="s2">&quot;url&quot;</span><span class="p">)</span><span class="o">||</span><span class="nx">o</span><span class="p">());</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">c</span><span class="p">.</span><span class="nx">data</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="s2">&quot;create&quot;</span><span class="o">==</span><span class="nx">a</span><span class="o">||</span><span class="s2">&quot;update&quot;</span><span class="o">==</span><span class="nx">a</span><span class="p">))</span><span class="nx">e</span><span class="p">.</span><span class="nx">contentType</span><span class="o">=</span><span class="s2">&quot;application/json&quot;</span><span class="p">,</span><span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="o">=</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">toJSON</span><span class="p">());</span><span class="nx">g</span><span class="p">.</span><span class="nx">emulateJSON</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">contentType</span><span class="o">=</span><span class="s2">&quot;application/x-www-form-urlencoded&quot;</span><span class="p">,</span><span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="o">?</span><span class="p">{</span><span class="nx">model</span><span class="o">:</span><span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">}</span><span class="o">:</span><span class="p">{});</span><span class="k">if</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">emulateHTTP</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="s2">&quot;PUT&quot;</span><span class="o">===</span><span class="nx">d</span><span class="o">||</span><span class="s2">&quot;DELETE&quot;</span><span class="o">===</span><span class="nx">d</span><span class="p">))</span><span class="nx">g</span><span class="p">.</span><span class="nx">emulateJSON</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">_method</span><span class="o">=</span><span class="nx">d</span><span class="p">),</span><span class="nx">e</span><span class="p">.</span><span class="nx">type</span><span class="o">=</span><span class="s2">&quot;POST&quot;</span><span class="p">,</span><span class="nx">e</span><span class="p">.</span><span class="nx">beforeSend</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="s2">&quot;X-HTTP-Method-Override&quot;</span><span class="p">,</span>
<span class="nx">d</span><span class="p">)};</span><span class="s2">&quot;GET&quot;</span><span class="o">!==</span><span class="nx">e</span><span class="p">.</span><span class="nx">type</span><span class="o">&amp;&amp;!</span><span class="nx">g</span><span class="p">.</span><span class="nx">emulateJSON</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">processData</span><span class="o">=!</span><span class="mi">1</span><span class="p">);</span><span class="k">return</span> <span class="nx">h</span><span class="p">.</span><span class="nx">ajax</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">c</span><span class="p">))};</span><span class="nx">g</span><span class="p">.</span><span class="nx">wrapError</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="nx">e</span><span class="o">=</span><span class="nx">d</span><span class="o">===</span><span class="nx">b</span><span class="o">?</span><span class="nx">e</span><span class="o">:</span><span class="nx">d</span><span class="p">;</span><span class="nx">a</span><span class="o">?</span><span class="nx">a</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">c</span><span class="p">)</span><span class="o">:</span><span class="nx">b</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s2">&quot;error&quot;</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">c</span><span class="p">)}};</span><span class="kd">var</span> <span class="nx">q</span><span class="o">=</span><span class="kd">function</span><span class="p">(){},</span><span class="nx">z</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="p">;</span><span class="nx">d</span><span class="o">=</span><span class="nx">b</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="s2">&quot;constructor&quot;</span><span class="p">)</span><span class="o">?</span><span class="nx">b</span><span class="p">.</span><span class="nx">constructor</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="nx">a</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">arguments</span><span class="p">)};</span><span class="nx">f</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">a</span><span class="p">);</span><span class="nx">q</span><span class="p">.</span><span class="nx">prototype</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">prototype</span><span class="p">;</span><span class="nx">d</span><span class="p">.</span><span class="nx">prototype</span><span class="o">=</span><span class="k">new</span> <span class="nx">q</span><span class="p">;</span><span class="nx">b</span><span class="o">&amp;&amp;</span><span class="nx">f</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span><span class="nx">b</span><span class="p">);</span><span class="nx">c</span><span class="o">&amp;&amp;</span><span class="nx">f</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">c</span><span class="p">);</span><span class="nx">d</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span><span class="o">=</span><span class="nx">d</span><span class="p">;</span><span class="nx">d</span><span class="p">.</span><span class="nx">__super__</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">prototype</span><span class="p">;</span><span class="k">return</span> <span class="nx">d</span><span class="p">},</span><span class="nx">j</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span><span class="o">!</span><span class="nx">a</span><span class="o">||!</span><span class="nx">a</span><span class="p">[</span><span class="nx">b</span><span class="p">]</span><span class="o">?</span>
<span class="kc">null</span><span class="o">:</span><span class="nx">f</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">b</span><span class="p">])</span><span class="o">?</span><span class="nx">a</span><span class="p">[</span><span class="nx">b</span><span class="p">]()</span><span class="o">:</span><span class="nx">a</span><span class="p">[</span><span class="nx">b</span><span class="p">]},</span><span class="nx">o</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">throw</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;A &quot;url&quot; property or function must be specified&#39;</span><span class="p">);}}).</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<span class="cm">/**</span>
<span class="cm"> * Lawnchair!</span>
<span class="cm"> * --- </span>
<span class="cm"> * clientside json store </span>
<span class="cm"> *</span>
<span class="cm"> */</span>
<span class="kd">var</span> <span class="nx">Lawnchair</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="k">this</span> <span class="k">instanceof</span> <span class="nx">Lawnchair</span><span class="p">))</span><span class="k">return</span> <span class="k">new</span> <span class="nx">Lawnchair</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">JSON</span><span class="p">)</span><span class="k">throw</span><span class="s2">&quot;JSON unavailable! Include http://www.json.org/json2.js to fix.&quot;</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="o">&lt;=</span><span class="mi">2</span><span class="o">&amp;&amp;</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">)</span><span class="nx">a</span><span class="o">=</span><span class="k">typeof</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">===</span><span class="s2">&quot;function&quot;</span><span class="o">?</span><span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">:</span><span class="nx">arguments</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="nx">b</span><span class="o">=</span><span class="k">typeof</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">===</span><span class="s2">&quot;function&quot;</span><span class="o">?</span><span class="p">{}</span><span class="o">:</span><span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span><span class="k">else</span> <span class="k">throw</span><span class="s2">&quot;Incorrect # of ctor args!&quot;</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">a</span><span class="o">!==</span><span class="s2">&quot;function&quot;</span><span class="p">)</span><span class="k">throw</span><span class="s2">&quot;No callback was provided&quot;</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">record</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">record</span><span class="o">||</span><span class="s2">&quot;record&quot;</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">name</span><span class="o">||</span><span class="s2">&quot;records&quot;</span><span class="p">;</span><span class="kd">var</span> <span class="nx">e</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">adapter</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span>
<span class="mi">0</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="nx">Lawnchair</span><span class="p">.</span><span class="nx">adapters</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">c</span><span class="o">&lt;</span><span class="nx">d</span><span class="p">;</span><span class="nx">c</span><span class="o">++</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">Lawnchair</span><span class="p">.</span><span class="nx">adapters</span><span class="p">[</span><span class="nx">c</span><span class="p">].</span><span class="nx">adapter</span><span class="o">===</span><span class="nx">b</span><span class="p">.</span><span class="nx">adapter</span><span class="p">){</span><span class="nx">e</span><span class="o">=</span><span class="nx">Lawnchair</span><span class="p">.</span><span class="nx">adapters</span><span class="p">[</span><span class="nx">c</span><span class="p">].</span><span class="nx">valid</span><span class="p">()</span><span class="o">?</span><span class="nx">Lawnchair</span><span class="p">.</span><span class="nx">adapters</span><span class="p">[</span><span class="nx">c</span><span class="p">]</span><span class="o">:</span><span class="k">void</span> <span class="mi">0</span><span class="p">;</span><span class="k">break</span><span class="p">}}</span><span class="k">else</span><span class="p">{</span><span class="nx">c</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="nx">d</span><span class="o">=</span><span class="nx">Lawnchair</span><span class="p">.</span><span class="nx">adapters</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">c</span><span class="o">&lt;</span><span class="nx">d</span><span class="p">;</span><span class="nx">c</span><span class="o">++</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="nx">e</span><span class="o">=</span><span class="nx">Lawnchair</span><span class="p">.</span><span class="nx">adapters</span><span class="p">[</span><span class="nx">c</span><span class="p">].</span><span class="nx">valid</span><span class="p">()</span><span class="o">?</span><span class="nx">Lawnchair</span><span class="p">.</span><span class="nx">adapters</span><span class="p">[</span><span class="nx">c</span><span class="p">]</span><span class="o">:</span><span class="k">void</span> <span class="mi">0</span><span class="p">)</span><span class="k">break</span><span class="p">}</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">e</span><span class="p">)</span><span class="k">throw</span><span class="s2">&quot;No valid adapter.&quot;</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">f</span> <span class="k">in</span> <span class="nx">e</span><span class="p">)</span><span class="k">this</span><span class="p">[</span><span class="nx">f</span><span class="p">]</span><span class="o">=</span><span class="nx">e</span><span class="p">[</span><span class="nx">f</span><span class="p">];</span><span class="nx">c</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="nx">d</span><span class="o">=</span><span class="nx">Lawnchair</span><span class="p">.</span><span class="nx">plugins</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">c</span><span class="o">&lt;</span><span class="nx">d</span><span class="p">;</span><span class="nx">c</span><span class="o">++</span><span class="p">)</span><span class="nx">Lawnchair</span><span class="p">.</span><span class="nx">plugins</span><span class="p">[</span><span class="nx">c</span><span class="p">].</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span><span class="k">this</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="p">)};</span><span class="nx">Lawnchair</span><span class="p">.</span><span class="nx">adapters</span><span class="o">=</span><span class="p">[];</span>
<span class="nx">Lawnchair</span><span class="p">.</span><span class="nx">adapter</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">adapter</span><span class="o">=</span><span class="nx">b</span><span class="p">;</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="s2">&quot;adapter valid init keys save batch get exists all remove nuke&quot;</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">),</span><span class="nx">c</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">,</span><span class="nx">d</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="nx">d</span> <span class="k">in</span> <span class="nx">a</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="nx">c</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">d</span><span class="p">)</span><span class="o">===-</span><span class="mi">1</span><span class="p">)</span><span class="k">throw</span><span class="s2">&quot;Invalid adapter! Nonstandard method: &quot;</span><span class="o">+</span><span class="nx">d</span><span class="p">;</span><span class="nx">Lawnchair</span><span class="p">.</span><span class="nx">adapters</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">a</span><span class="p">)};</span><span class="nx">Lawnchair</span><span class="p">.</span><span class="nx">plugins</span><span class="o">=</span><span class="p">[];</span><span class="nx">Lawnchair</span><span class="p">.</span><span class="nx">plugin</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">a</span> <span class="k">in</span> <span class="nx">b</span><span class="p">)</span><span class="nx">a</span><span class="o">===</span><span class="s2">&quot;init&quot;</span><span class="o">?</span><span class="nx">Lawnchair</span><span class="p">.</span><span class="nx">plugins</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">b</span><span class="p">[</span><span class="nx">a</span><span class="p">])</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">prototype</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="o">=</span><span class="nx">b</span><span class="p">[</span><span class="nx">a</span><span class="p">]};</span>
<span class="nx">Lawnchair</span><span class="p">.</span><span class="nx">prototype</span><span class="o">=</span><span class="p">{</span><span class="nx">isArray</span><span class="o">:</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="o">||</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span><span class="o">===</span><span class="s2">&quot;[object Array]&quot;</span><span class="p">},</span><span class="nx">indexOf</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">)</span><span class="k">return</span> <span class="nx">b</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="nx">e</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">e</span><span class="o">&lt;</span><span class="nx">c</span><span class="p">;</span><span class="nx">e</span><span class="o">++</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="p">[</span><span class="nx">e</span><span class="p">]</span><span class="o">===</span><span class="nx">a</span><span class="p">)</span><span class="k">return</span> <span class="nx">e</span><span class="p">;</span><span class="k">return</span><span class="o">-</span><span class="mi">1</span><span class="p">},</span><span class="nx">lambda</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">fn</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">record</span><span class="p">,</span><span class="nx">b</span><span class="p">)},</span><span class="nx">fn</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="k">typeof</span> <span class="nx">a</span><span class="o">==</span><span class="s2">&quot;string&quot;</span><span class="o">?</span><span class="k">new</span> <span class="nb">Function</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="p">)</span><span class="o">:</span><span class="nx">a</span><span class="p">},</span><span class="nx">uuid</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span><span class="p">((</span><span class="mi">1</span><span class="o">+</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">())</span><span class="o">*</span><span class="mi">65536</span><span class="o">|</span><span class="mi">0</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">).</span><span class="nx">substring</span><span class="p">(</span><span class="mi">1</span><span class="p">)};</span><span class="k">return</span> <span class="nx">b</span><span class="p">()</span><span class="o">+</span><span class="nx">b</span><span class="p">()</span><span class="o">+</span><span class="s2">&quot;-&quot;</span><span class="o">+</span><span class="nx">b</span><span class="p">()</span><span class="o">+</span><span class="s2">&quot;-&quot;</span><span class="o">+</span><span class="nx">b</span><span class="p">()</span><span class="o">+</span><span class="s2">&quot;-&quot;</span><span class="o">+</span><span class="nx">b</span><span class="p">()</span><span class="o">+</span><span class="s2">&quot;-&quot;</span><span class="o">+</span><span class="nx">b</span><span class="p">()</span><span class="o">+</span><span class="nx">b</span><span class="p">()</span><span class="o">+</span><span class="nx">b</span><span class="p">()},</span><span class="nx">each</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span>
<span class="k">this</span><span class="p">.</span><span class="nx">lambda</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">__results</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">__results</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">b</span><span class="o">&lt;</span><span class="nx">e</span><span class="p">;</span><span class="nx">b</span><span class="o">++</span><span class="p">)</span><span class="nx">a</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">__results</span><span class="p">[</span><span class="nx">b</span><span class="p">],</span><span class="nx">b</span><span class="p">);</span><span class="k">else</span> <span class="k">this</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">c</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">b</span><span class="o">&lt;</span><span class="nx">e</span><span class="p">;</span><span class="nx">b</span><span class="o">++</span><span class="p">)</span><span class="nx">a</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">c</span><span class="p">[</span><span class="nx">b</span><span class="p">],</span><span class="nx">b</span><span class="p">)});</span><span class="k">return</span> <span class="k">this</span><span class="p">}};</span>
<span class="nx">Lawnchair</span><span class="p">.</span><span class="nx">adapter</span><span class="p">(</span><span class="s2">&quot;webkit-sqlite&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;error in sqlite adaptor!&quot;</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">)};</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">)</span><span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="p">[].</span><span class="nx">slice</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="nx">d</span><span class="o">=</span><span class="k">this</span><span class="p">,</span><span class="nx">f</span><span class="o">=</span><span class="kd">function</span><span class="p">(){},</span><span class="nx">g</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span> <span class="k">instanceof</span> <span class="nx">f</span><span class="o">?</span><span class="k">this</span><span class="o">:</span><span class="nx">b</span><span class="o">||</span><span class="p">{},</span><span class="nx">c</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">)))};</span><span class="nx">f</span><span class="p">.</span><span class="nx">prototype</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">prototype</span><span class="p">;</span><span class="nx">g</span><span class="p">.</span><span class="nx">prototype</span><span class="o">=</span><span class="k">new</span> <span class="nx">f</span><span class="p">;</span><span class="k">return</span> <span class="nx">g</span><span class="p">};</span><span class="k">return</span><span class="p">{</span><span class="nx">valid</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span><span class="o">!!</span><span class="nb">window</span><span class="p">.</span><span class="nx">openDatabase</span><span class="p">},</span><span class="nx">init</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="k">this</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">fn</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span><span class="nx">e</span><span class="p">),</span><span class="nx">f</span><span class="o">=</span><span class="s2">&quot;CREATE TABLE IF NOT EXISTS &quot;</span><span class="o">+</span>
<span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="o">+</span><span class="s2">&quot; (id NVARCHAR(32) UNIQUE PRIMARY KEY, value TEXT, timestamp REAL)&quot;</span><span class="p">,</span><span class="nx">g</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">c</span><span class="p">)};</span><span class="k">this</span><span class="p">.</span><span class="nx">db</span><span class="o">=</span><span class="nx">openDatabase</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span><span class="s2">&quot;1.0.0&quot;</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span><span class="mi">65536</span><span class="p">);</span><span class="k">this</span><span class="p">.</span><span class="nx">db</span><span class="p">.</span><span class="nx">transaction</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">c</span><span class="p">){</span><span class="nx">c</span><span class="p">.</span><span class="nx">executeSql</span><span class="p">(</span><span class="nx">f</span><span class="p">,[],</span><span class="nx">g</span><span class="p">,</span><span class="nx">b</span><span class="p">)})},</span><span class="nx">keys</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">lambda</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span><span class="nx">c</span><span class="o">=</span><span class="k">this</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="s2">&quot;SELECT id FROM &quot;</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="o">+</span><span class="s2">&quot; ORDER BY timestamp DESC&quot;</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">db</span><span class="p">.</span><span class="nx">transaction</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">executeSql</span><span class="p">(</span><span class="nx">d</span><span class="p">,[],</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">rows</span><span class="p">.</span><span class="nx">length</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span><span class="nx">e</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">c</span><span class="p">,[]);</span><span class="k">else</span><span class="p">{</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="p">[],</span><span class="nx">f</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">j</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">rows</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">f</span><span class="o">&lt;</span><span class="nx">j</span><span class="p">;</span><span class="nx">f</span><span class="o">++</span><span class="p">)</span><span class="nx">d</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">rows</span><span class="p">.</span><span class="nx">item</span><span class="p">(</span><span class="nx">f</span><span class="p">).</span><span class="nx">id</span><span class="p">);</span><span class="nx">e</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span>
<span class="nx">d</span><span class="p">)}},</span><span class="nx">b</span><span class="p">)});</span><span class="k">return</span> <span class="k">this</span><span class="p">},</span><span class="nx">save</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="k">this</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">key</span><span class="o">||</span><span class="nx">c</span><span class="p">.</span><span class="nx">uuid</span><span class="p">(),</span><span class="nx">f</span><span class="o">=</span><span class="s2">&quot;INSERT INTO &quot;</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="o">+</span><span class="s2">&quot; (value, timestamp, id) VALUES (?,?,?)&quot;</span><span class="p">,</span><span class="nx">g</span><span class="o">=</span><span class="s2">&quot;UPDATE &quot;</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="o">+</span><span class="s2">&quot; SET value=?, timestamp=? WHERE id=?&quot;</span><span class="p">,</span><span class="nx">k</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">if</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="nx">a</span><span class="p">.</span><span class="nx">key</span><span class="o">=</span><span class="nx">d</span><span class="p">,</span><span class="nx">c</span><span class="p">.</span><span class="nx">lambda</span><span class="p">(</span><span class="nx">e</span><span class="p">).</span><span class="nx">call</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">a</span><span class="p">)},</span><span class="nx">h</span><span class="o">=</span><span class="p">[</span><span class="k">new</span> <span class="nb">Date</span><span class="p">,</span><span class="nx">d</span><span class="p">];</span><span class="nx">c</span><span class="p">.</span><span class="nx">exists</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">key</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span><span class="nx">c</span><span class="p">.</span><span class="nx">db</span><span class="p">.</span><span class="nx">transaction</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">c</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">delete</span> <span class="nx">a</span><span class="p">.</span><span class="nx">key</span><span class="p">;</span><span class="nx">h</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">a</span><span class="p">));</span><span class="nx">c</span><span class="p">.</span><span class="nx">executeSql</span><span class="p">(</span><span class="nx">g</span><span class="p">,</span><span class="nx">h</span><span class="p">,</span><span class="nx">k</span><span class="p">,</span><span class="nx">b</span><span class="p">)};</span><span class="nx">e</span><span class="o">?</span><span class="nx">d</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">:</span><span class="p">(</span><span class="nx">h</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">a</span><span class="p">)),</span><span class="nx">c</span><span class="p">.</span><span class="nx">executeSql</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span><span class="nx">h</span><span class="p">,</span><span class="nx">k</span><span class="p">,</span><span class="nx">b</span><span class="p">))})});</span><span class="k">return</span> <span class="k">this</span><span class="p">},</span><span class="nx">batch</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span>
<span class="p">[],</span><span class="nx">d</span><span class="o">=!</span><span class="mi">1</span><span class="p">,</span><span class="nx">f</span><span class="o">=</span><span class="k">this</span><span class="p">,</span><span class="nx">g</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="nx">c</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span><span class="nx">d</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">length</span><span class="o">===</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">},</span><span class="nx">k</span><span class="o">=</span><span class="nx">setInterval</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="nx">d</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">b</span><span class="o">&amp;&amp;</span><span class="nx">f</span><span class="p">.</span><span class="nx">lambda</span><span class="p">(</span><span class="nx">b</span><span class="p">).</span><span class="nx">call</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span><span class="nx">c</span><span class="p">),</span><span class="nx">clearInterval</span><span class="p">(</span><span class="nx">k</span><span class="p">))},</span><span class="mi">200</span><span class="p">),</span><span class="nx">h</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">i</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">h</span><span class="o">&lt;</span><span class="nx">i</span><span class="p">;</span><span class="nx">h</span><span class="o">++</span><span class="p">)</span><span class="k">this</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">h</span><span class="p">],</span><span class="nx">g</span><span class="p">);</span><span class="k">return</span> <span class="k">this</span><span class="p">},</span><span class="nx">get</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="k">this</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">?</span><span class="s2">&quot;SELECT id, value FROM &quot;</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="o">+</span><span class="s2">&quot; WHERE id IN (&#39;&quot;</span><span class="o">+</span><span class="nx">a</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;&#39;,&#39;&quot;</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;&#39;)&quot;</span><span class="o">:</span><span class="s2">&quot;SELECT id, value FROM &quot;</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="o">+</span><span class="s2">&quot; WHERE id = &#39;&quot;</span><span class="o">+</span><span class="nx">a</span><span class="o">+</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span><span class="nx">f</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">d</span><span class="p">){</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="kc">null</span><span class="p">,</span><span class="nx">i</span><span class="o">=</span><span class="p">[];</span><span class="k">if</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">rows</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">j</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">l</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">rows</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">j</span><span class="o">&lt;</span><span class="nx">l</span><span class="p">;</span><span class="nx">j</span><span class="o">++</span><span class="p">)</span><span class="nx">f</span><span class="o">=</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">rows</span><span class="p">.</span><span class="nx">item</span><span class="p">(</span><span class="nx">j</span><span class="p">).</span><span class="nx">value</span><span class="p">),</span><span class="nx">f</span><span class="p">.</span><span class="nx">key</span><span class="o">=</span>
<span class="nx">d</span><span class="p">.</span><span class="nx">rows</span><span class="p">.</span><span class="nx">item</span><span class="p">(</span><span class="nx">j</span><span class="p">).</span><span class="nx">id</span><span class="p">,</span><span class="nx">i</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">f</span><span class="p">);</span><span class="nx">c</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">||</span><span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="nx">i</span><span class="p">.</span><span class="nx">length</span><span class="o">?</span><span class="nx">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">:</span><span class="kc">null</span><span class="p">);</span><span class="nx">e</span><span class="o">&amp;&amp;</span><span class="nx">c</span><span class="p">.</span><span class="nx">lambda</span><span class="p">(</span><span class="nx">e</span><span class="p">).</span><span class="nx">call</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">i</span><span class="p">)};</span><span class="k">this</span><span class="p">.</span><span class="nx">db</span><span class="p">.</span><span class="nx">transaction</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">executeSql</span><span class="p">(</span><span class="nx">d</span><span class="p">,[],</span><span class="nx">f</span><span class="p">,</span><span class="nx">b</span><span class="p">)});</span><span class="k">return</span> <span class="k">this</span><span class="p">},</span><span class="nx">exists</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="s2">&quot;SELECT * FROM &quot;</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="o">+</span><span class="s2">&quot; WHERE id = ?&quot;</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="k">this</span><span class="p">,</span><span class="nx">f</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="p">){</span><span class="nx">e</span><span class="o">&amp;&amp;</span><span class="nx">d</span><span class="p">.</span><span class="nx">fn</span><span class="p">(</span><span class="s2">&quot;exists&quot;</span><span class="p">,</span><span class="nx">e</span><span class="p">).</span><span class="nx">call</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">rows</span><span class="p">.</span><span class="nx">length</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">)};</span><span class="k">this</span><span class="p">.</span><span class="nx">db</span><span class="p">.</span><span class="nx">transaction</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">){</span><span class="nx">d</span><span class="p">.</span><span class="nx">executeSql</span><span class="p">(</span><span class="nx">c</span><span class="p">,[</span><span class="nx">a</span><span class="p">],</span><span class="nx">f</span><span class="p">,</span><span class="nx">b</span><span class="p">)});</span><span class="k">return</span> <span class="k">this</span><span class="p">},</span><span class="nx">all</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="k">this</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="s2">&quot;SELECT * FROM &quot;</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="p">[],</span><span class="nx">f</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">fn</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span><span class="nx">a</span><span class="p">)</span><span class="o">||</span><span class="k">void</span> <span class="mi">0</span><span class="p">,</span><span class="nx">g</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">rows</span><span class="p">.</span><span class="nx">length</span><span class="o">!=</span><span class="mi">0</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span>
<span class="mi">0</span><span class="p">,</span><span class="nx">g</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">rows</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">c</span><span class="o">&lt;</span><span class="nx">g</span><span class="p">;</span><span class="nx">c</span><span class="o">++</span><span class="p">){</span><span class="kd">var</span> <span class="nx">l</span><span class="o">=</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">rows</span><span class="p">.</span><span class="nx">item</span><span class="p">(</span><span class="nx">c</span><span class="p">).</span><span class="nx">value</span><span class="p">);</span><span class="nx">l</span><span class="p">.</span><span class="nx">key</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">rows</span><span class="p">.</span><span class="nx">item</span><span class="p">(</span><span class="nx">c</span><span class="p">).</span><span class="nx">id</span><span class="p">;</span><span class="nx">d</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">l</span><span class="p">)}</span><span class="nx">f</span><span class="o">&amp;&amp;</span><span class="nx">f</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">d</span><span class="p">)};</span><span class="k">this</span><span class="p">.</span><span class="nx">db</span><span class="p">.</span><span class="nx">transaction</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">executeSql</span><span class="p">(</span><span class="nx">c</span><span class="p">,[],</span><span class="nx">g</span><span class="p">,</span><span class="nx">b</span><span class="p">)});</span><span class="k">return</span> <span class="k">this</span><span class="p">},</span><span class="nx">remove</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="k">this</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="k">typeof</span> <span class="nx">a</span><span class="o">===</span><span class="s2">&quot;string&quot;</span><span class="o">?</span><span class="nx">a</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">key</span><span class="p">,</span><span class="nx">f</span><span class="o">=</span><span class="s2">&quot;DELETE FROM &quot;</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="o">+</span><span class="s2">&quot; WHERE id = ?&quot;</span><span class="p">,</span><span class="nx">g</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="nx">e</span><span class="o">&amp;&amp;</span><span class="nx">c</span><span class="p">.</span><span class="nx">lambda</span><span class="p">(</span><span class="nx">e</span><span class="p">).</span><span class="nx">call</span><span class="p">(</span><span class="nx">c</span><span class="p">)};</span><span class="k">this</span><span class="p">.</span><span class="nx">db</span><span class="p">.</span><span class="nx">transaction</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">executeSql</span><span class="p">(</span><span class="nx">f</span><span class="p">,[</span><span class="nx">d</span><span class="p">],</span><span class="nx">g</span><span class="p">,</span><span class="nx">b</span><span class="p">)});</span><span class="k">return</span> <span class="k">this</span><span class="p">},</span><span class="nx">nuke</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="s2">&quot;DELETE FROM &quot;</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="k">this</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="o">?</span><span class="kd">function</span><span class="p">(){</span><span class="nx">c</span><span class="p">.</span><span class="nx">lambda</span><span class="p">(</span><span class="nx">a</span><span class="p">).</span><span class="nx">call</span><span class="p">(</span><span class="nx">c</span><span class="p">)}</span><span class="o">:</span><span class="kd">function</span><span class="p">(){};</span>
<span class="k">this</span><span class="p">.</span><span class="nx">db</span><span class="p">.</span><span class="nx">transaction</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">executeSql</span><span class="p">(</span><span class="nx">e</span><span class="p">,[],</span><span class="nx">d</span><span class="p">,</span><span class="nx">b</span><span class="p">)});</span><span class="k">return</span> <span class="k">this</span><span class="p">}}}());</span>
<span class="cm">/**</span>
<span class="cm">* Bootstrap.js by @fat &amp; @mdo</span>
<span class="cm">* plugins: bootstrap-transition.js, bootstrap-modal.js, bootstrap-tooltip.js, bootstrap-popover.js, bootstrap-alert.js, bootstrap-button.js</span>
<span class="cm">* Copyright 2012 Twitter, Inc.</span>
<span class="cm">* http://www.apache.org/licenses/LICENSE-2.0.txt</span>
<span class="cm">*/</span>
<span class="o">!</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="s2">&quot;use strict&quot;</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">transition</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="o">||</span><span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">style</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">transition</span><span class="o">!==</span><span class="kc">undefined</span><span class="o">||</span><span class="nx">c</span><span class="p">.</span><span class="nx">WebkitTransition</span><span class="o">!==</span><span class="kc">undefined</span><span class="o">||</span><span class="nx">c</span><span class="p">.</span><span class="nx">MozTransition</span><span class="o">!==</span><span class="kc">undefined</span><span class="o">||</span><span class="nx">c</span><span class="p">.</span><span class="nx">MsTransition</span><span class="o">!==</span><span class="kc">undefined</span><span class="o">||</span><span class="nx">c</span><span class="p">.</span><span class="nx">OTransition</span><span class="o">!==</span><span class="kc">undefined</span><span class="p">;</span><span class="k">return</span> <span class="nx">d</span><span class="o">&amp;&amp;</span><span class="p">{</span><span class="nx">end</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="s2">&quot;TransitionEnd&quot;</span><span class="p">;</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">browser</span><span class="p">.</span><span class="nx">webkit</span><span class="o">?</span><span class="nx">b</span><span class="o">=</span><span class="s2">&quot;webkitTransitionEnd&quot;</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">browser</span><span class="p">.</span><span class="nx">mozilla</span><span class="o">?</span><span class="nx">b</span><span class="o">=</span><span class="s2">&quot;transitionend&quot;</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">browser</span><span class="p">.</span><span class="nx">opera</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">b</span><span class="o">=</span><span class="s2">&quot;oTransitionEnd&quot;</span><span class="p">),</span><span class="nx">b</span><span class="p">}()}}()})}(</span><span class="nb">window</span><span class="p">.</span><span class="nx">jQuery</span><span class="p">),</span><span class="o">!</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">function</span> <span class="nx">c</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="nx">b</span><span class="p">.</span><span class="nx">$element</span><span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">transition</span><span class="p">.</span><span class="nx">end</span><span class="p">),</span><span class="nx">d</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">b</span><span class="p">)},</span><span class="mi">500</span><span class="p">);</span><span class="k">this</span><span class="p">.</span><span class="nx">$element</span><span class="p">.</span><span class="nx">one</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">transition</span><span class="p">.</span><span class="nx">end</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span><span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">c</span><span class="p">),</span><span class="nx">d</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">b</span><span class="p">)})}</span><span class="kd">function</span> <span class="nx">d</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">$element</span><span class="p">.</span><span class="nx">hide</span><span class="p">().</span><span class="nx">trigger</span><span class="p">(</span><span class="s2">&quot;hidden&quot;</span><span class="p">),</span><span class="nx">e</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">e</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="k">this</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">$element</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="s2">&quot;fade&quot;</span><span class="p">)</span><span class="o">?</span><span class="s2">&quot;fade&quot;</span><span class="o">:</span><span class="s2">&quot;&quot;</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">isShown</span><span class="o">&amp;&amp;</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">backdrop</span><span class="p">){</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">transition</span><span class="o">&amp;&amp;</span><span class="nx">d</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">$backdrop</span><span class="o">=</span><span class="nx">a</span><span class="p">(</span><span class="s1">&#39;&lt;div class=&quot;modal-backdrop &#39;</span><span class="o">+</span><span class="nx">d</span><span class="o">+</span><span class="s1">&#39;&quot; /&gt;&#39;</span><span class="p">).</span><span class="nx">appendTo</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">backdrop</span><span class="o">!=</span><span class="s2">&quot;static&quot;</span><span class="o">&amp;&amp;</span><span class="k">this</span><span class="p">.</span><span class="nx">$backdrop</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">hide</span><span class="p">,</span><span class="k">this</span><span class="p">)),</span><span class="nx">e</span><span class="o">&amp;&amp;</span><span class="k">this</span><span class="p">.</span><span class="nx">$backdrop</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">offsetWidth</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">$backdrop</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="s2">&quot;in&quot;</span><span class="p">),</span><span class="nx">e</span><span class="o">?</span><span class="k">this</span><span class="p">.</span><span class="nx">$backdrop</span><span class="p">.</span><span class="nx">one</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">transition</span><span class="p">.</span><span class="nx">end</span><span class="p">,</span><span class="nx">b</span><span class="p">)</span><span class="o">:</span><span class="nx">b</span><span class="p">()}</span><span class="k">else</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">isShown</span><span class="o">&amp;&amp;</span><span class="k">this</span><span class="p">.</span><span class="nx">$backdrop</span><span class="o">?</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">$backdrop</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="s2">&quot;in&quot;</span><span class="p">),</span><span class="nx">a</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">transition</span><span class="o">&amp;&amp;</span><span class="k">this</span><span class="p">.</span><span class="nx">$element</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="s2">&quot;fade&quot;</span><span class="p">)</span><span class="o">?</span><span class="k">this</span><span class="p">.</span><span class="nx">$backdrop</span><span class="p">.</span><span class="nx">one</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">transition</span><span class="p">.</span><span class="nx">end</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span><span class="k">this</span><span class="p">))</span><span class="o">:</span><span class="nx">f</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">))</span><span class="o">:</span><span class="nx">b</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">()}</span><span class="kd">function</span> <span class="nx">f</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">$backdrop</span><span class="p">.</span><span class="nx">remove</span><span class="p">(),</span><span class="k">this</span><span class="p">.</span><span class="nx">$backdrop</span><span class="o">=</span><span class="kc">null</span><span class="p">}</span><span class="kd">function</span> <span class="nx">g</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">isShown</span><span class="o">&amp;&amp;</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">keyboard</span><span class="o">?</span><span class="nx">a</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;keyup.dismiss.modal&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">which</span><span class="o">==</span><span class="mi">27</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">.</span><span class="nx">hide</span><span class="p">()})</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">isShown</span><span class="o">||</span><span class="nx">a</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">off</span><span class="p">(</span><span class="s2">&quot;keyup.dismiss.modal&quot;</span><span class="p">)}</span><span class="s2">&quot;use strict&quot;</span><span class="p">;</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="o">=</span><span class="nx">c</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">$element</span><span class="o">=</span><span class="nx">a</span><span class="p">(</span><span class="nx">b</span><span class="p">).</span><span class="nx">delegate</span><span class="p">(</span><span class="s1">&#39;[data-dismiss=&quot;modal&quot;]&#39;</span><span class="p">,</span><span class="s2">&quot;click.dismiss.modal&quot;</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">hide</span><span class="p">,</span><span class="k">this</span><span class="p">))};</span><span class="nx">b</span><span class="p">.</span><span class="nx">prototype</span><span class="o">=</span><span class="p">{</span><span class="nx">constructor</span><span class="o">:</span><span class="nx">b</span><span class="p">,</span><span class="nx">toggle</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">isShown</span><span class="o">?</span><span class="s2">&quot;hide&quot;</span><span class="o">:</span><span class="s2">&quot;show&quot;</span><span class="p">]()},</span><span class="nx">show</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">isShown</span><span class="p">)</span><span class="k">return</span><span class="p">;</span><span class="nx">a</span><span class="p">(</span><span class="s2">&quot;body&quot;</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s2">&quot;modal-open&quot;</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">isShown</span><span class="o">=!</span><span class="mi">0</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">$element</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s2">&quot;show&quot;</span><span class="p">),</span><span class="nx">g</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">),</span><span class="nx">e</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">transition</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">.</span><span class="nx">$element</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="s2">&quot;fade&quot;</span><span class="p">);</span><span class="o">!</span><span class="nx">b</span><span class="p">.</span><span class="nx">$element</span><span class="p">.</span><span class="nx">parent</span><span class="p">().</span><span class="nx">length</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">.</span><span class="nx">$element</span><span class="p">.</span><span class="nx">appendTo</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">),</span><span class="nx">b</span><span class="p">.</span><span class="nx">$element</span><span class="p">.</span><span class="nx">show</span><span class="p">(),</span><span class="nx">c</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">.</span><span class="nx">$element</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">offsetWidth</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">$element</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="s2">&quot;in&quot;</span><span class="p">),</span><span class="nx">c</span><span class="o">?</span><span class="nx">b</span><span class="p">.</span><span class="nx">$element</span><span class="p">.</span><span class="nx">one</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">transition</span><span class="p">.</span><span class="nx">end</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span><span class="nx">b</span><span class="p">.</span><span class="nx">$element</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s2">&quot;shown&quot;</span><span class="p">)})</span><span class="o">:</span><span class="nx">b</span><span class="p">.</span><span class="nx">$element</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s2">&quot;shown&quot;</span><span class="p">)})},</span><span class="nx">hide</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="nx">b</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">isShown</span><span class="p">)</span><span class="k">return</span><span class="p">;</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="k">this</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">isShown</span><span class="o">=!</span><span class="mi">1</span><span class="p">,</span><span class="nx">a</span><span class="p">(</span><span class="s2">&quot;body&quot;</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="s2">&quot;modal-open&quot;</span><span class="p">),</span><span class="nx">g</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">$element</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s2">&quot;hide&quot;</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="s2">&quot;in&quot;</span><span class="p">),</span><span class="nx">a</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">transition</span><span class="o">&amp;&amp;</span><span class="k">this</span><span class="p">.</span><span class="nx">$element</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="s2">&quot;fade&quot;</span><span class="p">)</span><span class="o">?</span><span class="nx">c</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">)</span><span class="o">:</span><span class="nx">d</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">)}},</span><span class="nx">a</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">modal</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">c</span><span class="p">){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">(</span><span class="k">this</span><span class="p">),</span><span class="nx">e</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s2">&quot;modal&quot;</span><span class="p">),</span><span class="nx">f</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span><span class="nx">a</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">modal</span><span class="p">.</span><span class="nx">defaults</span><span class="p">,</span><span class="k">typeof</span> <span class="nx">c</span><span class="o">==</span><span class="s2">&quot;object&quot;</span><span class="o">&amp;&amp;</span><span class="nx">c</span><span class="p">);</span><span class="nx">e</span><span class="o">||</span><span class="nx">d</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s2">&quot;modal&quot;</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="k">new</span> <span class="nx">b</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">f</span><span class="p">)),</span><span class="k">typeof</span> <span class="nx">c</span><span class="o">==</span><span class="s2">&quot;string&quot;</span><span class="o">?</span><span class="nx">e</span><span class="p">[</span><span class="nx">c</span><span class="p">]()</span><span class="o">:</span><span class="nx">f</span><span class="p">.</span><span class="nx">show</span><span class="o">&amp;&amp;</span><span class="nx">e</span><span class="p">.</span><span class="nx">show</span><span class="p">()})},</span><span class="nx">a</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">modal</span><span class="p">.</span><span class="nx">defaults</span><span class="o">=</span><span class="p">{</span><span class="nx">backdrop</span><span class="o">:!</span><span class="mi">0</span><span class="p">,</span><span class="nx">keyboard</span><span class="o">:!</span><span class="mi">0</span><span class="p">,</span><span class="nx">show</span><span class="o">:!</span><span class="mi">0</span><span class="p">},</span><span class="nx">a</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">modal</span><span class="p">.</span><span class="nx">Constructor</span><span class="o">=</span><span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="nx">a</span><span class="p">(</span><span class="s2">&quot;body&quot;</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;click.modal.data-api&quot;</span><span class="p">,</span><span class="s1">&#39;[data-toggle=&quot;modal&quot;]&#39;</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">a</span><span class="p">(</span><span class="k">this</span><span class="p">),</span><span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="nx">a</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;data-target&quot;</span><span class="p">)</span><span class="o">||</span><span class="p">(</span><span class="nx">d</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;href&quot;</span><span class="p">))</span><span class="o">&amp;&amp;</span><span class="nx">d</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/.*(?=#[^\s]+$)/</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)),</span><span class="nx">f</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s2">&quot;modal&quot;</span><span class="p">)</span><span class="o">?</span><span class="s2">&quot;toggle&quot;</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span><span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">(),</span><span class="nx">c</span><span class="p">.</span><span class="nx">data</span><span class="p">());</span><span class="nx">b</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">(),</span><span class="nx">e</span><span class="p">.</span><span class="nx">modal</span><span class="p">(</span><span class="nx">f</span><span class="p">)})})}(</span><span class="nb">window</span><span class="p">.</span><span class="nx">jQuery</span><span class="p">),</span><span class="o">!</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="s2">&quot;use strict&quot;</span><span class="p">;</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span><span class="s2">&quot;tooltip&quot;</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">)};</span><span class="nx">b</span><span class="p">.</span><span class="nx">prototype</span><span class="o">=</span><span class="p">{</span><span class="nx">constructor</span><span class="o">:</span><span class="nx">b</span><span class="p">,</span><span class="nx">init</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">){</span><span class="kd">var</span> <span class="nx">e</span><span class="p">,</span><span class="nx">f</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">type</span><span class="o">=</span><span class="nx">b</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">$element</span><span class="o">=</span><span class="nx">a</span><span class="p">(</span><span class="nx">c</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">getOptions</span><span class="p">(</span><span class="nx">d</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">enabled</span><span class="o">=!</span><span class="mi">0</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">trigger</span><span class="o">!=</span><span class="s2">&quot;manual&quot;</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">e</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">trigger</span><span class="o">==</span><span class="s2">&quot;hover&quot;</span><span class="o">?</span><span class="s2">&quot;mouseenter&quot;</span><span class="o">:</span><span class="s2">&quot;focus&quot;</span><span class="p">,</span><span class="nx">f</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">trigger</span><span class="o">==</span><span class="s2">&quot;hover&quot;</span><span class="o">?</span><span class="s2">&quot;mouseleave&quot;</span><span class="o">:</span><span class="s2">&quot;blur&quot;</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">$element</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">selector</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">enter</span><span class="p">,</span><span class="k">this</span><span class="p">)),</span><span class="k">this</span><span class="p">.</span><span class="nx">$element</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">selector</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">leave</span><span class="p">,</span><span class="k">this</span><span class="p">))),</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">selector</span><span class="o">?</span><span class="k">this</span><span class="p">.</span><span class="nx">_options</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">,{</span><span class="nx">trigger</span><span class="o">:</span><span class="s2">&quot;manual&quot;</span><span class="p">,</span><span class="nx">selector</span><span class="o">:</span><span class="s2">&quot;&quot;</span><span class="p">})</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">fixTitle</span><span class="p">()},</span><span class="nx">getOptions</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span> <span class="nx">b</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span><span class="nx">a</span><span class="p">.</span><span class="nx">fn</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">type</span><span class="p">].</span><span class="nx">defaults</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">$element</span><span class="p">.</span><span class="nx">data</span><span class="p">()),</span><span class="nx">b</span><span class="p">.</span><span class="nx">delay</span><span class="o">&amp;&amp;</span><span class="k">typeof</span> <span class="nx">b</span><span class="p">.</span><span class="nx">delay</span><span class="o">==</span><span class="s2">&quot;number&quot;</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">delay</span><span class="o">=</span><span class="p">{</span><span class="nx">show</span><span class="o">:</span><span class="nx">b</span><span class="p">.</span><span class="nx">delay</span><span class="p">,</span><span class="nx">hide</span><span class="o">:</span><span class="nx">b</span><span class="p">.</span><span class="nx">delay</span><span class="p">}),</span><span class="nx">b</span><span class="p">},</span><span class="nx">enter</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">a</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">currentTarget</span><span class="p">)[</span><span class="k">this</span><span class="p">.</span><span class="nx">type</span><span class="p">](</span><span class="k">this</span><span class="p">.</span><span class="nx">_options</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">type</span><span class="p">);</span><span class="o">!</span><span class="nx">c</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">delay</span><span class="o">||!</span><span class="nx">c</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">delay</span><span class="p">.</span><span class="nx">show</span><span class="o">?</span><span class="nx">c</span><span class="p">.</span><span class="nx">show</span><span class="p">()</span><span class="o">:</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">hoverState</span><span class="o">=</span><span class="s2">&quot;in&quot;</span><span class="p">,</span><span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="nx">c</span><span class="p">.</span><span class="nx">hoverState</span><span class="o">==</span><span class="s2">&quot;in&quot;</span><span class="o">&amp;&amp;</span><span class="nx">c</span><span class="p">.</span><span class="nx">show</span><span class="p">()},</span><span class="nx">c</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">delay</span><span class="p">.</span><span class="nx">show</span><span class="p">))},</span><span class="nx">leave</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">a</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">currentTarget</span><span class="p">)[</span><span class="k">this</span><span class="p">.</span><span class="nx">type</span><span class="p">](</span><span class="k">this</span><span class="p">.</span><span class="nx">_options</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">type</span><span class="p">);</span><span class="o">!</span><span class="nx">c</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">delay</span><span class="o">||!</span><span class="nx">c</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">delay</span><span class="p">.</span><span class="nx">hide</span><span class="o">?</span><span class="nx">c</span><span class="p">.</span><span class="nx">hide</span><span class="p">()</span><span class="o">:</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">hoverState</span><span class="o">=</span><span class="s2">&quot;out&quot;</span><span class="p">,</span><span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="nx">c</span><span class="p">.</span><span class="nx">hoverState</span><span class="o">==</span><span class="s2">&quot;out&quot;</span><span class="o">&amp;&amp;</span><span class="nx">c</span><span class="p">.</span><span class="nx">hide</span><span class="p">()},</span><span class="nx">c</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">delay</span><span class="p">.</span><span class="nx">hide</span><span class="p">))},</span><span class="nx">show</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">f</span><span class="p">,</span><span class="nx">g</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">hasContent</span><span class="p">()</span><span class="o">&amp;&amp;</span><span class="k">this</span><span class="p">.</span><span class="nx">enabled</span><span class="p">){</span><span class="nx">a</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">tip</span><span class="p">(),</span><span class="k">this</span><span class="p">.</span><span class="nx">setContent</span><span class="p">(),</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">animation</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="s2">&quot;fade&quot;</span><span class="p">),</span><span class="nx">f</span><span class="o">=</span><span class="k">typeof</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">placement</span><span class="o">==</span><span class="s2">&quot;function&quot;</span><span class="o">?</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">placement</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="k">this</span><span class="p">.</span><span class="nx">$element</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">placement</span><span class="p">,</span><span class="nx">b</span><span class="o">=</span><span class="sr">/in/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">f</span><span class="p">),</span><span class="nx">a</span><span class="p">.</span><span class="nx">remove</span><span class="p">().</span><span class="nx">css</span><span class="p">({</span><span class="nx">top</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="nx">left</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="nx">display</span><span class="o">:</span><span class="s2">&quot;block&quot;</span><span class="p">}).</span><span class="nx">appendTo</span><span class="p">(</span><span class="nx">b</span><span class="o">?</span><span class="k">this</span><span class="p">.</span><span class="nx">$element</span><span class="o">:</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">),</span><span class="nx">c</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">getPosition</span><span class="p">(</span><span class="nx">b</span><span class="p">),</span><span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">offsetWidth</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">offsetHeight</span><span class="p">;</span><span class="k">switch</span><span class="p">(</span><span class="nx">b</span><span class="o">?</span><span class="nx">f</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">:</span><span class="nx">f</span><span class="p">){</span><span class="k">case</span><span class="s2">&quot;bottom&quot;</span><span class="o">:</span><span class="nx">g</span><span class="o">=</span><span class="p">{</span><span class="nx">top</span><span class="o">:</span><span class="nx">c</span><span class="p">.</span><span class="nx">top</span><span class="o">+</span><span class="nx">c</span><span class="p">.</span><span class="nx">height</span><span class="p">,</span><span class="nx">left</span><span class="o">:</span><span class="nx">c</span><span class="p">.</span><span class="nx">left</span><span class="o">+</span><span class="nx">c</span><span class="p">.</span><span class="nx">width</span><span class="o">/</span><span class="mi">2</span><span class="o">-</span><span class="nx">d</span><span class="o">/</span><span class="mi">2</span><span class="p">};</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;top&quot;</span><span class="o">:</span><span class="nx">g</span><span class="o">=</span><span class="p">{</span><span class="nx">top</span><span class="o">:</span><span class="nx">c</span><span class="p">.</span><span class="nx">top</span><span class="o">-</span><span class="nx">e</span><span class="p">,</span><span class="nx">left</span><span class="o">:</span><span class="nx">c</span><span class="p">.</span><span class="nx">left</span><span class="o">+</span><span class="nx">c</span><span class="p">.</span><span class="nx">width</span><span class="o">/</span><span class="mi">2</span><span class="o">-</span><span class="nx">d</span><span class="o">/</span><span class="mi">2</span><span class="p">};</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;left&quot;</span><span class="o">:</span><span class="nx">g</span><span class="o">=</span><span class="p">{</span><span class="nx">top</span><span class="o">:</span><span class="nx">c</span><span class="p">.</span><span class="nx">top</span><span class="o">+</span><span class="nx">c</span><span class="p">.</span><span class="nx">height</span><span class="o">/</span><span class="mi">2</span><span class="o">-</span><span class="nx">e</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="nx">left</span><span class="o">:</span><span class="nx">c</span><span class="p">.</span><span class="nx">left</span><span class="o">-</span><span class="nx">d</span><span class="p">};</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;right&quot;</span><span class="o">:</span><span class="nx">g</span><span class="o">=</span><span class="p">{</span><span class="nx">top</span><span class="o">:</span><span class="nx">c</span><span class="p">.</span><span class="nx">top</span><span class="o">+</span><span class="nx">c</span><span class="p">.</span><span class="nx">height</span><span class="o">/</span><span class="mi">2</span><span class="o">-</span><span class="nx">e</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="nx">left</span><span class="o">:</span><span class="nx">c</span><span class="p">.</span><span class="nx">left</span><span class="o">+</span><span class="nx">c</span><span class="p">.</span><span class="nx">width</span><span class="p">}}</span><span class="nx">a</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="nx">g</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">f</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s2">&quot;in&quot;</span><span class="p">)}},</span><span class="nx">setContent</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">tip</span><span class="p">();</span><span class="nx">a</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;.tooltip-inner&quot;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getTitle</span><span class="p">()),</span><span class="nx">a</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="s2">&quot;fade in top bottom left right&quot;</span><span class="p">)},</span><span class="nx">hide</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="kd">function</span> <span class="nx">d</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="nx">c</span><span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">transition</span><span class="p">.</span><span class="nx">end</span><span class="p">).</span><span class="nx">remove</span><span class="p">()},</span><span class="mi">500</span><span class="p">);</span><span class="nx">c</span><span class="p">.</span><span class="nx">one</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">transition</span><span class="p">.</span><span class="nx">end</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span><span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">b</span><span class="p">),</span><span class="nx">c</span><span class="p">.</span><span class="nx">remove</span><span class="p">()})}</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">tip</span><span class="p">();</span><span class="nx">c</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="s2">&quot;in&quot;</span><span class="p">),</span><span class="nx">a</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">transition</span><span class="o">&amp;&amp;</span><span class="k">this</span><span class="p">.</span><span class="nx">$tip</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="s2">&quot;fade&quot;</span><span class="p">)</span><span class="o">?</span><span class="nx">d</span><span class="p">()</span><span class="o">:</span><span class="nx">c</span><span class="p">.</span><span class="nx">remove</span><span class="p">()},</span><span class="nx">fixTitle</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">$element</span><span class="p">;(</span><span class="nx">a</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;title&quot;</span><span class="p">)</span><span class="o">||</span><span class="k">typeof</span> <span class="nx">a</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;data-original-title&quot;</span><span class="p">)</span><span class="o">!=</span><span class="s2">&quot;string&quot;</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;data-original-title&quot;</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;title&quot;</span><span class="p">)</span><span class="o">||</span><span class="s2">&quot;&quot;</span><span class="p">).</span><span class="nx">removeAttr</span><span class="p">(</span><span class="s2">&quot;title&quot;</span><span class="p">)},</span><span class="nx">hasContent</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">getTitle</span><span class="p">()},</span><span class="nx">getPosition</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span><span class="nx">b</span><span class="o">?</span><span class="p">{</span><span class="nx">top</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="nx">left</span><span class="o">:</span><span class="mi">0</span><span class="p">}</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">$element</span><span class="p">.</span><span class="nx">offset</span><span class="p">(),{</span><span class="nx">width</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">$element</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">offsetWidth</span><span class="p">,</span><span class="nx">height</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">$element</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">offsetHeight</span><span class="p">})},</span><span class="nx">getTitle</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">$element</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">;</span><span class="k">return</span> <span class="nx">a</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;data-original-title&quot;</span><span class="p">)</span><span class="o">||</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">c</span><span class="p">.</span><span class="nx">title</span><span class="o">==</span><span class="s2">&quot;function&quot;</span><span class="o">?</span><span class="nx">c</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">b</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">:</span><span class="nx">c</span><span class="p">.</span><span class="nx">title</span><span class="p">),</span><span class="nx">a</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">toString</span><span class="p">().</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/(^\s*|\s*$)/</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">),</span><span class="nx">a</span><span class="p">},</span><span class="nx">tip</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">$tip</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">$tip</span><span class="o">||</span><span class="nx">a</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">template</span><span class="p">)},</span><span class="nx">validate</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">$element</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">parentNode</span><span class="o">||</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">hide</span><span class="p">(),</span><span class="k">this</span><span class="p">.</span><span class="nx">$element</span><span class="o">=</span><span class="kc">null</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="o">=</span><span class="kc">null</span><span class="p">)},</span><span class="nx">enable</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">enabled</span><span class="o">=!</span><span class="mi">0</span><span class="p">},</span><span class="nx">disable</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">enabled</span><span class="o">=!</span><span class="mi">1</span><span class="p">},</span><span class="nx">toggleEnabled</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">enabled</span><span class="o">=!</span><span class="k">this</span><span class="p">.</span><span class="nx">enabled</span><span class="p">},</span><span class="nx">toggle</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">tip</span><span class="p">().</span><span class="nx">hasClass</span><span class="p">(</span><span class="s2">&quot;in&quot;</span><span class="p">)</span><span class="o">?</span><span class="s2">&quot;hide&quot;</span><span class="o">:</span><span class="s2">&quot;show&quot;</span><span class="p">]()}},</span><span class="nx">a</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">tooltip</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">c</span><span class="p">){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">(</span><span class="k">this</span><span class="p">),</span><span class="nx">e</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s2">&quot;tooltip&quot;</span><span class="p">),</span><span class="nx">f</span><span class="o">=</span><span class="k">typeof</span> <span class="nx">c</span><span class="o">==</span><span class="s2">&quot;object&quot;</span><span class="o">&amp;&amp;</span><span class="nx">c</span><span class="p">;</span><span class="nx">e</span><span class="o">||</span><span class="nx">d</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s2">&quot;tooltip&quot;</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="k">new</span> <span class="nx">b</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">f</span><span class="p">)),</span><span class="k">typeof</span> <span class="nx">c</span><span class="o">==</span><span class="s2">&quot;string&quot;</span><span class="o">&amp;&amp;</span><span class="nx">e</span><span class="p">[</span><span class="nx">c</span><span class="p">]()})},</span><span class="nx">a</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">tooltip</span><span class="p">.</span><span class="nx">Constructor</span><span class="o">=</span><span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">tooltip</span><span class="p">.</span><span class="nx">defaults</span><span class="o">=</span><span class="p">{</span><span class="nx">animation</span><span class="o">:!</span><span class="mi">0</span><span class="p">,</span><span class="nx">delay</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="nx">selector</span><span class="o">:!</span><span class="mi">1</span><span class="p">,</span><span class="nx">placement</span><span class="o">:</span><span class="s2">&quot;top&quot;</span><span class="p">,</span><span class="nx">trigger</span><span class="o">:</span><span class="s2">&quot;hover&quot;</span><span class="p">,</span><span class="nx">title</span><span class="o">:</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">template</span><span class="o">:</span><span class="s1">&#39;&lt;div class=&quot;tooltip&quot;&gt;&lt;div class=&quot;tooltip-arrow&quot;&gt;&lt;/div&gt;&lt;div class=&quot;tooltip-inner&quot;&gt;&lt;/div&gt;&lt;/div&gt;&#39;</span><span class="p">}}(</span><span class="nb">window</span><span class="p">.</span><span class="nx">jQuery</span><span class="p">),</span><span class="o">!</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="s2">&quot;use strict&quot;</span><span class="p">;</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span><span class="s2">&quot;popover&quot;</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">)};</span><span class="nx">b</span><span class="p">.</span><span class="nx">prototype</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span><span class="nx">a</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">tooltip</span><span class="p">.</span><span class="nx">Constructor</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,{</span><span class="nx">constructor</span><span class="o">:</span><span class="nx">b</span><span class="p">,</span><span class="nx">setContent</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">tip</span><span class="p">(),</span><span class="nx">c</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">getTitle</span><span class="p">(),</span><span class="nx">d</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">getContent</span><span class="p">();</span><span class="nx">b</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;.popover-title&quot;</span><span class="p">)[</span><span class="nx">a</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span><span class="nx">c</span><span class="p">)</span><span class="o">==</span><span class="s2">&quot;object&quot;</span><span class="o">?</span><span class="s2">&quot;append&quot;</span><span class="o">:</span><span class="s2">&quot;html&quot;</span><span class="p">](</span><span class="nx">c</span><span class="p">),</span><span class="nx">b</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;.popover-content &gt; *&quot;</span><span class="p">)[</span><span class="nx">a</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span><span class="o">==</span><span class="s2">&quot;object&quot;</span><span class="o">?</span><span class="s2">&quot;append&quot;</span><span class="o">:</span><span class="s2">&quot;html&quot;</span><span class="p">](</span><span class="nx">d</span><span class="p">),</span><span class="nx">b</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="s2">&quot;fade top bottom left right in&quot;</span><span class="p">)},</span><span class="nx">hasContent</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">getTitle</span><span class="p">()</span><span class="o">||</span><span class="k">this</span><span class="p">.</span><span class="nx">getContent</span><span class="p">()},</span><span class="nx">getContent</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">$element</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">;</span><span class="k">return</span> <span class="nx">a</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;data-content&quot;</span><span class="p">)</span><span class="o">||</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">c</span><span class="p">.</span><span class="nx">content</span><span class="o">==</span><span class="s2">&quot;function&quot;</span><span class="o">?</span><span class="nx">c</span><span class="p">.</span><span class="nx">content</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">b</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">:</span><span class="nx">c</span><span class="p">.</span><span class="nx">content</span><span class="p">),</span><span class="nx">a</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">toString</span><span class="p">().</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/(^\s*|\s*$)/</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">),</span><span class="nx">a</span><span class="p">},</span><span class="nx">tip</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">$tip</span><span class="o">||</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">$tip</span><span class="o">=</span><span class="nx">a</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">template</span><span class="p">)),</span><span class="k">this</span><span class="p">.</span><span class="nx">$tip</span><span class="p">}}),</span><span class="nx">a</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">popover</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">c</span><span class="p">){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">(</span><span class="k">this</span><span class="p">),</span><span class="nx">e</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s2">&quot;popover&quot;</span><span class="p">),</span><span class="nx">f</span><span class="o">=</span><span class="k">typeof</span> <span class="nx">c</span><span class="o">==</span><span class="s2">&quot;object&quot;</span><span class="o">&amp;&amp;</span><span class="nx">c</span><span class="p">;</span><span class="nx">e</span><span class="o">||</span><span class="nx">d</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s2">&quot;popover&quot;</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="k">new</span> <span class="nx">b</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">f</span><span class="p">)),</span><span class="k">typeof</span> <span class="nx">c</span><span class="o">==</span><span class="s2">&quot;string&quot;</span><span class="o">&amp;&amp;</span><span class="nx">e</span><span class="p">[</span><span class="nx">c</span><span class="p">]()})},</span><span class="nx">a</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">popover</span><span class="p">.</span><span class="nx">Constructor</span><span class="o">=</span><span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">popover</span><span class="p">.</span><span class="nx">defaults</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span><span class="nx">a</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">tooltip</span><span class="p">.</span><span class="nx">defaults</span><span class="p">,{</span><span class="nx">placement</span><span class="o">:</span><span class="s2">&quot;right&quot;</span><span class="p">,</span><span class="nx">content</span><span class="o">:</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">template</span><span class="o">:</span><span class="s1">&#39;&lt;div class=&quot;popover&quot;&gt;&lt;div class=&quot;arrow&quot;&gt;&lt;/div&gt;&lt;div class=&quot;popover-inner&quot;&gt;&lt;h3 class=&quot;popover-title&quot;&gt;&lt;/h3&gt;&lt;div class=&quot;popover-content&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&#39;</span><span class="p">})}(</span><span class="nb">window</span><span class="p">.</span><span class="nx">jQuery</span><span class="p">),</span><span class="o">!</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="s2">&quot;use strict&quot;</span><span class="p">;</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="s1">&#39;[data-dismiss=&quot;alert&quot;]&#39;</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">c</span><span class="p">){</span><span class="nx">a</span><span class="p">(</span><span class="nx">c</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">close</span><span class="p">)};</span><span class="nx">c</span><span class="p">.</span><span class="nx">prototype</span><span class="o">=</span><span class="p">{</span><span class="nx">constructor</span><span class="o">:</span><span class="nx">c</span><span class="p">,</span><span class="nx">close</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="kd">function</span> <span class="nx">f</span><span class="p">(){</span><span class="nx">e</span><span class="p">.</span><span class="nx">remove</span><span class="p">(),</span><span class="nx">e</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s2">&quot;closed&quot;</span><span class="p">)}</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">a</span><span class="p">(</span><span class="k">this</span><span class="p">),</span><span class="nx">d</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;data-target&quot;</span><span class="p">),</span><span class="nx">e</span><span class="p">;</span><span class="nx">d</span><span class="o">||</span><span class="p">(</span><span class="nx">d</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;href&quot;</span><span class="p">),</span><span class="nx">d</span><span class="o">=</span><span class="nx">d</span><span class="o">&amp;&amp;</span><span class="nx">d</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/.*(?=#[^\s]*$)/</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)),</span><span class="nx">e</span><span class="o">=</span><span class="nx">a</span><span class="p">(</span><span class="nx">d</span><span class="p">),</span><span class="nx">e</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s2">&quot;close&quot;</span><span class="p">),</span><span class="nx">b</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">(),</span><span class="nx">e</span><span class="p">.</span><span class="nx">length</span><span class="o">||</span><span class="p">(</span><span class="nx">e</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="s2">&quot;alert&quot;</span><span class="p">)</span><span class="o">?</span><span class="nx">c</span><span class="o">:</span><span class="nx">c</span><span class="p">.</span><span class="nx">parent</span><span class="p">()),</span><span class="nx">e</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="s2">&quot;in&quot;</span><span class="p">),</span><span class="nx">a</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">transition</span><span class="o">&amp;&amp;</span><span class="nx">e</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="s2">&quot;fade&quot;</span><span class="p">)</span><span class="o">?</span><span class="nx">e</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">transition</span><span class="p">.</span><span class="nx">end</span><span class="p">,</span><span class="nx">f</span><span class="p">)</span><span class="o">:</span><span class="nx">f</span><span class="p">()}},</span><span class="nx">a</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">alert</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">(</span><span class="k">this</span><span class="p">),</span><span class="nx">e</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s2">&quot;alert&quot;</span><span class="p">);</span><span class="nx">e</span><span class="o">||</span><span class="nx">d</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s2">&quot;alert&quot;</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="k">new</span> <span class="nx">c</span><span class="p">(</span><span class="k">this</span><span class="p">)),</span><span class="k">typeof</span> <span class="nx">b</span><span class="o">==</span><span class="s2">&quot;string&quot;</span><span class="o">&amp;&amp;</span><span class="nx">e</span><span class="p">[</span><span class="nx">b</span><span class="p">].</span><span class="nx">call</span><span class="p">(</span><span class="nx">d</span><span class="p">)})},</span><span class="nx">a</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">alert</span><span class="p">.</span><span class="nx">Constructor</span><span class="o">=</span><span class="nx">c</span><span class="p">,</span><span class="nx">a</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="nx">a</span><span class="p">(</span><span class="s2">&quot;body&quot;</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;click.alert.data-api&quot;</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">close</span><span class="p">)})}(</span><span class="nb">window</span><span class="p">.</span><span class="nx">jQuery</span><span class="p">),</span><span class="o">!</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="s2">&quot;use strict&quot;</span><span class="p">;</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">$element</span><span class="o">=</span><span class="nx">a</span><span class="p">(</span><span class="nx">b</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span><span class="nx">a</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">button</span><span class="p">.</span><span class="nx">defaults</span><span class="p">,</span><span class="nx">c</span><span class="p">)};</span><span class="nx">b</span><span class="p">.</span><span class="nx">prototype</span><span class="o">=</span><span class="p">{</span><span class="nx">constructor</span><span class="o">:</span><span class="nx">b</span><span class="p">,</span><span class="nx">setState</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="s2">&quot;disabled&quot;</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">$element</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">data</span><span class="p">(),</span><span class="nx">e</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s2">&quot;input&quot;</span><span class="p">)</span><span class="o">?</span><span class="s2">&quot;val&quot;</span><span class="o">:</span><span class="s2">&quot;html&quot;</span><span class="p">;</span><span class="nx">a</span><span class="o">+=</span><span class="s2">&quot;Text&quot;</span><span class="p">,</span><span class="nx">d</span><span class="p">.</span><span class="nx">resetText</span><span class="o">||</span><span class="nx">c</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s2">&quot;resetText&quot;</span><span class="p">,</span><span class="nx">c</span><span class="p">[</span><span class="nx">e</span><span class="p">]()),</span><span class="nx">c</span><span class="p">[</span><span class="nx">e</span><span class="p">](</span><span class="nx">d</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="o">||</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">[</span><span class="nx">a</span><span class="p">]),</span><span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="nx">a</span><span class="o">==</span><span class="s2">&quot;loadingText&quot;</span><span class="o">?</span><span class="nx">c</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">b</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">b</span><span class="p">)</span><span class="o">:</span><span class="nx">c</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">b</span><span class="p">).</span><span class="nx">removeAttr</span><span class="p">(</span><span class="nx">b</span><span class="p">)},</span><span class="mi">0</span><span class="p">)},</span><span class="nx">toggle</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">$element</span><span class="p">.</span><span class="nx">parent</span><span class="p">(</span><span class="s1">&#39;[data-toggle=&quot;buttons-radio&quot;]&#39;</span><span class="p">);</span><span class="nx">a</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;.active&quot;</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="s2">&quot;active&quot;</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">$element</span><span class="p">.</span><span class="nx">toggleClass</span><span class="p">(</span><span class="s2">&quot;active&quot;</span><span class="p">)}},</span><span class="nx">a</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">button</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">c</span><span class="p">){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">(</span><span class="k">this</span><span class="p">),</span><span class="nx">e</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s2">&quot;button&quot;</span><span class="p">),</span><span class="nx">f</span><span class="o">=</span><span class="k">typeof</span> <span class="nx">c</span><span class="o">==</span><span class="s2">&quot;object&quot;</span><span class="o">&amp;&amp;</span><span class="nx">c</span><span class="p">;</span><span class="nx">e</span><span class="o">||</span><span class="nx">d</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s2">&quot;button&quot;</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="k">new</span> <span class="nx">b</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">f</span><span class="p">)),</span><span class="nx">c</span><span class="o">==</span><span class="s2">&quot;toggle&quot;</span><span class="o">?</span><span class="nx">e</span><span class="p">.</span><span class="nx">toggle</span><span class="p">()</span><span class="o">:</span><span class="nx">c</span><span class="o">&amp;&amp;</span><span class="nx">e</span><span class="p">.</span><span class="nx">setState</span><span class="p">(</span><span class="nx">c</span><span class="p">)})},</span><span class="nx">a</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">button</span><span class="p">.</span><span class="nx">defaults</span><span class="o">=</span><span class="p">{</span><span class="nx">loadingText</span><span class="o">:</span><span class="s2">&quot;loading...&quot;</span><span class="p">},</span><span class="nx">a</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">button</span><span class="p">.</span><span class="nx">Constructor</span><span class="o">=</span><span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="nx">a</span><span class="p">(</span><span class="s2">&quot;body&quot;</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;click.button.data-api&quot;</span><span class="p">,</span><span class="s2">&quot;[data-toggle^=button]&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="nx">a</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">target</span><span class="p">).</span><span class="nx">button</span><span class="p">(</span><span class="s2">&quot;toggle&quot;</span><span class="p">)})})}(</span><span class="nb">window</span><span class="p">.</span><span class="nx">jQuery</span><span class="p">);</span> <span class="c1">//&lt;== MUST put a semicolon here because twitter bootstrap is written by a bunch of smelly hipsters</span>
<span class="cm">/*! Copyright (c) 2011 Brandon Aaron (http://brandonaaron.net)</span>
<span class="cm"> * Licensed under the MIT License (LICENSE.txt).</span>
<span class="cm"> *</span>
<span class="cm"> * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.</span>
<span class="cm"> * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.</span>
<span class="cm"> * Thanks to: Seamus Leahy for adding deltaX and deltaY</span>
<span class="cm"> *</span>
<span class="cm"> * Version: 3.0.6</span>
<span class="cm"> * </span>
<span class="cm"> * Requires: 1.2.2+</span>
<span class="cm"> */</span>
<span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">){</span><span class="kd">function</span> <span class="nx">e</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">a</span><span class="o">||</span><span class="nb">window</span><span class="p">.</span><span class="nx">event</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="nx">f</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">g</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">a</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">fix</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span><span class="nx">a</span><span class="p">.</span><span class="nx">type</span><span class="o">=</span><span class="s2">&quot;mousewheel&quot;</span><span class="p">;</span><span class="nx">b</span><span class="p">.</span><span class="nx">wheelDelta</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">f</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">wheelDelta</span><span class="o">/</span><span class="mi">120</span><span class="p">);</span><span class="nx">b</span><span class="p">.</span><span class="nx">detail</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">f</span><span class="o">=-</span><span class="nx">b</span><span class="p">.</span><span class="nx">detail</span><span class="o">/</span><span class="mi">3</span><span class="p">);</span><span class="nx">g</span><span class="o">=</span><span class="nx">f</span><span class="p">;</span><span class="nx">b</span><span class="p">.</span><span class="nx">axis</span><span class="o">!==</span><span class="k">void</span> <span class="mi">0</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">.</span><span class="nx">axis</span><span class="o">===</span><span class="nx">b</span><span class="p">.</span><span class="nx">HORIZONTAL_AXIS</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">g</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">e</span><span class="o">=-</span><span class="mi">1</span><span class="o">*</span><span class="nx">f</span><span class="p">);</span><span class="nx">b</span><span class="p">.</span><span class="nx">wheelDeltaY</span><span class="o">!==</span><span class="k">void</span> <span class="mi">0</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">g</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">wheelDeltaY</span><span class="o">/</span><span class="mi">120</span><span class="p">);</span><span class="nx">b</span><span class="p">.</span><span class="nx">wheelDeltaX</span><span class="o">!==</span><span class="k">void</span> <span class="mi">0</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">e</span><span class="o">=-</span><span class="mi">1</span><span class="o">*</span><span class="nx">b</span><span class="p">.</span><span class="nx">wheelDeltaX</span><span class="o">/</span><span class="mi">120</span><span class="p">);</span><span class="nx">c</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">f</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">g</span><span class="p">);</span><span class="k">return</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">dispatch</span><span class="o">||</span><span class="nx">d</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">handle</span><span class="p">).</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">c</span><span class="p">)}</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;DOMMouseScroll&quot;</span><span class="p">,</span><span class="s2">&quot;mousewheel&quot;</span><span class="p">];</span><span class="k">if</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">fixHooks</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">h</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">h</span><span class="p">;)</span><span class="nx">d</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">fixHooks</span><span class="p">[</span><span class="nx">c</span><span class="p">[</span><span class="o">--</span><span class="nx">h</span><span class="p">]]</span><span class="o">=</span>
<span class="nx">d</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">mouseHooks</span><span class="p">;</span><span class="nx">d</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">special</span><span class="p">.</span><span class="nx">mousewheel</span><span class="o">=</span><span class="p">{</span><span class="nx">setup</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">a</span><span class="p">;)</span><span class="k">this</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="nx">c</span><span class="p">[</span><span class="o">--</span><span class="nx">a</span><span class="p">],</span><span class="nx">e</span><span class="p">,</span><span class="o">!</span><span class="mi">1</span><span class="p">);</span><span class="k">else</span> <span class="k">this</span><span class="p">.</span><span class="nx">onmousewheel</span><span class="o">=</span><span class="nx">e</span><span class="p">},</span><span class="nx">teardown</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">a</span><span class="p">;)</span><span class="k">this</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="nx">c</span><span class="p">[</span><span class="o">--</span><span class="nx">a</span><span class="p">],</span><span class="nx">e</span><span class="p">,</span><span class="o">!</span><span class="mi">1</span><span class="p">);</span><span class="k">else</span> <span class="k">this</span><span class="p">.</span><span class="nx">onmousewheel</span><span class="o">=</span><span class="kc">null</span><span class="p">}};</span><span class="nx">d</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span><span class="nx">mousewheel</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="o">?</span><span class="k">this</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s2">&quot;mousewheel&quot;</span><span class="p">,</span><span class="nx">a</span><span class="p">)</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s2">&quot;mousewheel&quot;</span><span class="p">)},</span><span class="nx">unmousewheel</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">unbind</span><span class="p">(</span><span class="s2">&quot;mousewheel&quot;</span><span class="p">,</span><span class="nx">a</span><span class="p">)}})})(</span><span class="nx">jQuery</span><span class="p">);</span>
<span class="cm">/*</span>
<span class="cm">* Pan and Zoom (c) 2012 Matthew Robertson</span>
<span class="cm">*/</span>
<span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">){</span><span class="kd">var</span> <span class="nx">g</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">startRect</span><span class="o">=</span><span class="nx">a</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">top</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">top</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">left</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">left</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">scale</span><span class="o">=</span><span class="mi">1</span><span class="p">};</span><span class="nx">g</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">applyConstraints</span><span class="o">=</span><span class="kd">function</span><span class="p">(){};</span><span class="nx">g</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getZoom</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="o">/</span><span class="k">this</span><span class="p">.</span><span class="nx">startRect</span><span class="p">.</span><span class="nx">height</span><span class="p">};</span><span class="nx">g</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getOffsetX</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">left</span><span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">startRect</span><span class="p">.</span><span class="nx">left</span><span class="p">)</span><span class="o">/</span><span class="k">this</span><span class="p">.</span><span class="nx">scale</span><span class="p">};</span><span class="nx">g</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getOffsetY</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">top</span><span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">startRect</span><span class="p">.</span><span class="nx">top</span><span class="p">)</span><span class="o">/</span><span class="k">this</span><span class="p">.</span><span class="nx">scale</span><span class="p">};</span><span class="nx">g</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">pan</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">top</span><span class="o">+=</span><span class="nx">b</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">left</span><span class="o">+=</span><span class="nx">a</span><span class="p">};</span><span class="nx">g</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">zoom</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span>
<span class="nx">c</span><span class="p">){</span><span class="nx">a</span><span class="o">=</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="o">+</span><span class="nx">c</span><span class="p">)</span><span class="o">/</span><span class="k">this</span><span class="p">.</span><span class="nx">startRect</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span><span class="nx">b</span><span class="o">=</span><span class="nx">a</span><span class="o">*</span><span class="k">this</span><span class="p">.</span><span class="nx">startRect</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="o">=</span><span class="nx">a</span><span class="o">*</span><span class="k">this</span><span class="p">.</span><span class="nx">startRect</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="o">=</span><span class="nx">b</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">scale</span><span class="o">=</span><span class="nx">a</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">top</span><span class="o">-=</span><span class="mi">0</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">left</span><span class="o">-=</span><span class="mi">0</span><span class="p">};</span><span class="nx">g</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">applyScale</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="nx">c</span><span class="o">&gt;</span><span class="mi">4</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">c</span><span class="o">=</span><span class="mi">4</span><span class="p">);</span><span class="nx">c</span><span class="o">&lt;</span><span class="mf">0.1</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">c</span><span class="o">=</span><span class="mf">0.1</span><span class="p">);</span><span class="nx">a</span><span class="o">=</span><span class="nx">c</span><span class="o">*</span><span class="k">this</span><span class="p">.</span><span class="nx">startRect</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="o">=</span><span class="nx">c</span><span class="o">*</span><span class="k">this</span><span class="p">.</span><span class="nx">startRect</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="o">=</span><span class="nx">a</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">scale</span><span class="o">=</span><span class="nx">c</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">top</span><span class="o">-=</span><span class="mi">0</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">left</span><span class="o">-=</span><span class="mi">0</span><span class="p">};</span><span class="kd">var</span> <span class="nx">k</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="s2">&quot;scale(&quot;</span><span class="o">+</span><span class="nx">a</span><span class="p">.</span><span class="nx">getZoom</span><span class="p">()</span><span class="o">+</span><span class="s2">&quot;) &quot;</span><span class="p">;</span><span class="nx">b</span><span class="o">+=</span><span class="s2">&quot;translate(&quot;</span><span class="o">+</span><span class="nx">a</span><span class="p">.</span><span class="nx">getOffsetX</span><span class="p">()</span><span class="o">+</span><span class="s2">&quot;px, &quot;</span><span class="o">+</span><span class="nx">a</span><span class="p">.</span><span class="nx">getOffsetY</span><span class="p">()</span><span class="o">+</span><span class="s2">&quot;px)&quot;</span><span class="p">;</span><span class="k">return</span> <span class="nx">b</span><span class="p">},</span><span class="nx">l</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">h</span><span class="p">){</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span><span class="nx">a</span><span class="p">.</span><span class="nx">mousewheel</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span>
<span class="nx">j</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span><span class="nx">b</span><span class="p">.</span><span class="nx">zoom</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">offsetX</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">offsetY</span><span class="p">,</span><span class="nx">j</span><span class="o">*</span><span class="nx">h</span><span class="p">.</span><span class="nx">scaleRate</span><span class="p">);</span><span class="nx">e</span><span class="o">&amp;&amp;</span><span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span><span class="nx">c</span><span class="p">();</span><span class="nx">e</span><span class="o">=</span><span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="nx">d</span><span class="p">()},</span><span class="mi">35</span><span class="p">)})},</span><span class="nx">m</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">){</span><span class="kd">var</span> <span class="nx">h</span><span class="o">=!</span><span class="mi">1</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">f</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">a</span><span class="p">.</span><span class="nx">mousedown</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">h</span><span class="o">=!</span><span class="mi">0</span><span class="p">;</span><span class="nx">e</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">clientX</span><span class="p">;</span><span class="nx">f</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">clientY</span><span class="p">;</span><span class="nx">c</span><span class="p">()}).</span><span class="nx">mouseup</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="nx">h</span><span class="o">=!</span><span class="mi">1</span><span class="p">;</span><span class="nx">d</span><span class="p">()}).</span><span class="nx">mousemove</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">h</span><span class="p">)</span><span class="nx">b</span><span class="p">.</span><span class="nx">pan</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">clientX</span><span class="o">-</span><span class="nx">e</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">clientY</span><span class="o">-</span><span class="nx">f</span><span class="p">),</span><span class="nx">b</span><span class="p">.</span><span class="nx">applyConstraints</span><span class="p">(),</span><span class="nx">e</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">clientX</span><span class="p">,</span><span class="nx">f</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">clientY</span><span class="p">})},</span><span class="nx">n</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;gesturestart&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span><span class="nx">c</span><span class="p">()}).</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;gestureend&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span><span class="nx">d</span><span class="p">()}).</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;gesturechange&quot;</span><span class="p">,</span>
<span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span><span class="nx">b</span><span class="p">.</span><span class="nx">applyScale</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">originalEvent</span><span class="p">.</span><span class="nx">scale</span><span class="p">);</span><span class="nx">c</span><span class="p">()})};</span><span class="nx">i</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">zoomAndScale</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="o">=</span><span class="nx">i</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span><span class="nx">i</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">zoomAndScale</span><span class="p">.</span><span class="nx">defaults</span><span class="p">,</span><span class="nx">a</span><span class="p">);</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">i</span><span class="p">(</span><span class="k">this</span><span class="p">),</span><span class="nx">c</span><span class="o">=</span><span class="nx">i</span><span class="p">(</span><span class="s2">&quot;body&quot;</span><span class="p">),</span><span class="nx">d</span><span class="o">=</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">width</span><span class="p">()</span><span class="o">-</span><span class="nx">c</span><span class="p">.</span><span class="nx">width</span><span class="p">())</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="nx">h</span><span class="o">=</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">height</span><span class="p">()</span><span class="o">-</span><span class="nx">c</span><span class="p">.</span><span class="nx">height</span><span class="p">())</span><span class="o">/</span><span class="mi">2</span><span class="o">+</span><span class="mi">20</span><span class="p">;</span><span class="nx">d</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">.</span><span class="nx">css</span><span class="p">({</span><span class="nx">position</span><span class="o">:</span><span class="s2">&quot;relative&quot;</span><span class="p">,</span><span class="nx">right</span><span class="o">:</span><span class="nx">d</span><span class="o">+</span><span class="s2">&quot;px&quot;</span><span class="p">,</span><span class="nx">top</span><span class="o">:</span><span class="s2">&quot;-&quot;</span><span class="o">+</span><span class="nx">h</span><span class="o">+</span><span class="s2">&quot;px&quot;</span><span class="p">});</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=!</span><span class="mi">0</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="p">{</span><span class="nx">top</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="nx">left</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="nx">width</span><span class="o">:</span><span class="nx">b</span><span class="p">.</span><span class="nx">width</span><span class="p">(),</span><span class="nx">height</span><span class="o">:</span><span class="nx">b</span><span class="p">.</span><span class="nx">height</span><span class="p">()},</span><span class="nx">f</span><span class="o">=</span><span class="k">new</span> <span class="nx">g</span><span class="p">(</span><span class="nx">d</span><span class="p">);</span><span class="nx">f</span><span class="p">.</span><span class="nx">applyScale</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="nx">c</span><span class="p">.</span><span class="nx">height</span><span class="p">()</span><span class="o">/</span><span class="nx">b</span><span class="p">.</span><span class="nx">height</span><span class="p">()</span><span class="o">*</span><span class="mf">0.9</span><span class="p">);</span><span class="nx">b</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">&quot;-webkit-transform&quot;</span><span class="p">,</span><span class="nx">k</span><span class="p">(</span><span class="nx">f</span><span class="p">));</span><span class="nx">b</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">&quot;-webkit-transform&quot;</span><span class="p">,</span><span class="nx">k</span><span class="p">(</span><span class="nx">f</span><span class="p">));</span>
<span class="kd">var</span> <span class="nx">j</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="nx">e</span><span class="o">||</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">&quot;-webkit-transform&quot;</span><span class="p">,</span><span class="nx">k</span><span class="p">(</span><span class="nx">f</span><span class="p">)),</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">j</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">frameRate</span><span class="p">))},</span><span class="nx">c</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="nx">e</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">e</span><span class="o">=!</span><span class="mi">1</span><span class="p">,</span><span class="nx">j</span><span class="p">())},</span><span class="nx">d</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="nx">e</span><span class="o">=!</span><span class="mi">0</span><span class="p">};</span><span class="nx">m</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">f</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">a</span><span class="p">);</span><span class="nx">l</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">f</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">a</span><span class="p">);</span><span class="nx">n</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">f</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">a</span><span class="p">)})};</span><span class="nx">i</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">zoomAndScale</span><span class="p">.</span><span class="nx">defaults</span><span class="o">=</span><span class="p">{</span><span class="nx">frameRate</span><span class="o">:</span><span class="mi">30</span><span class="p">,</span><span class="nx">scaleRate</span><span class="o">:</span><span class="mi">30</span><span class="p">}})(</span><span class="nx">jQuery</span><span class="p">);</span>
<span class="cm">/**</span>
<span class="cm">* Jath is free software provided under the MIT license.</span>
<span class="cm">*	See LICENSE file for full text of the license.</span>
<span class="cm">*	Copyright 2010 Dan Newcome.</span>
<span class="cm">*/</span>
<span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="kd">function</span> <span class="nx">f</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="nx">c</span><span class="o">===</span><span class="k">void</span> <span class="mi">0</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">c</span><span class="o">=</span><span class="nx">b</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">h</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">===</span><span class="s2">&quot;array&quot;</span><span class="p">){</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="p">[];</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">!=</span><span class="kc">null</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="nx">g</span><span class="o">==</span><span class="s2">&quot;msie&quot;</span><span class="p">){</span><span class="nx">b</span><span class="p">.</span><span class="nx">setProperty</span><span class="p">(</span><span class="s2">&quot;SelectionLanguage&quot;</span><span class="p">,</span><span class="s2">&quot;XPath&quot;</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">selectNodes</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span><span class="nx">d</span><span class="p">;</span><span class="nx">d</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">nextNode</span><span class="p">();)</span><span class="nx">e</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="nx">b</span><span class="p">,</span><span class="nx">d</span><span class="p">))}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">g</span><span class="o">==</span><span class="s2">&quot;node&quot;</span><span class="p">){</span><span class="nx">c</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span><span class="k">for</span><span class="p">(</span><span class="nx">d</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">d</span><span class="o">&lt;</span><span class="nx">c</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">d</span><span class="o">++</span><span class="p">)</span><span class="nx">e</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">[</span><span class="nx">d</span><span class="p">]))}</span><span class="k">else</span> <span class="k">for</span><span class="p">(</span><span class="nx">c</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">evaluate</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="nx">c</span><span class="p">,</span><span class="nx">Jath</span><span class="p">.</span><span class="nx">resolver</span><span class="p">,</span><span class="nx">XPathResult</span><span class="p">.</span><span class="nx">ANY_TYPE</span><span class="p">,</span><span class="kc">null</span><span class="p">);</span><span class="nx">d</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">iterateNext</span><span class="p">();)</span><span class="nx">e</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="nx">b</span><span class="p">,</span><span class="nx">d</span><span class="p">));</span><span class="k">else</span> <span class="k">for</span><span class="p">(</span><span class="nx">d</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="nx">d</span><span class="o">&lt;</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">d</span><span class="o">++</span><span class="p">)</span><span class="nx">e</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">d</span><span class="p">],</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">));</span><span class="nx">a</span><span class="o">=</span><span class="nx">e</span><span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">h</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">===</span><span class="s2">&quot;object&quot;</span><span class="p">){</span><span class="nx">d</span><span class="o">=</span><span class="p">{};</span><span class="k">for</span><span class="p">(</span><span class="nx">e</span> <span class="k">in</span> <span class="nx">a</span><span class="p">)</span><span class="nx">d</span><span class="p">[</span><span class="nx">e</span><span class="p">]</span><span class="o">=</span>
<span class="nx">f</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">e</span><span class="p">],</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">);</span><span class="nx">a</span><span class="o">=</span><span class="nx">d</span><span class="p">}</span><span class="k">else</span> <span class="nx">e</span><span class="o">=</span><span class="nx">c</span><span class="p">,</span><span class="nx">g</span><span class="o">==</span><span class="s2">&quot;msie&quot;</span><span class="o">?</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">setProperty</span><span class="p">(</span><span class="s2">&quot;SelectionLanguage&quot;</span><span class="p">,</span><span class="s2">&quot;XPath&quot;</span><span class="p">),</span><span class="nx">a</span><span class="o">=</span><span class="nx">h</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">==</span><span class="s2">&quot;string&quot;</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="o">!=</span><span class="nx">Jath</span><span class="p">.</span><span class="nx">literalChar</span><span class="o">?</span><span class="nx">e</span><span class="p">.</span><span class="nx">selectSingleNode</span><span class="p">(</span><span class="nx">a</span><span class="p">).</span><span class="nx">text</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span><span class="o">:</span><span class="nx">g</span><span class="o">==</span><span class="s2">&quot;node&quot;</span><span class="o">?</span><span class="p">(</span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;sys&quot;</span><span class="p">).</span><span class="nx">puts</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span><span class="nx">a</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">a</span><span class="p">).</span><span class="nx">text</span><span class="p">())</span><span class="o">:</span><span class="nx">a</span><span class="o">=</span><span class="nx">h</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">==</span><span class="s2">&quot;string&quot;</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">!=</span><span class="nx">Jath</span><span class="p">.</span><span class="nx">literalChar</span><span class="o">?</span><span class="nx">b</span><span class="p">.</span><span class="nx">evaluate</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">Jath</span><span class="p">.</span><span class="nx">resolver</span><span class="p">,</span><span class="nx">XPathResult</span><span class="p">.</span><span class="nx">STRING_TYPE</span><span class="p">,</span><span class="kc">null</span><span class="p">).</span><span class="nx">stringValue</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="k">return</span> <span class="nx">a</span><span class="p">}</span><span class="kd">function</span> <span class="nx">h</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">typeof</span> <span class="nx">a</span><span class="p">;</span><span class="nx">b</span><span class="o">===</span><span class="s2">&quot;object&quot;</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">a</span><span class="o">?</span><span class="k">typeof</span> <span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="o">===</span><span class="s2">&quot;number&quot;</span><span class="o">&amp;&amp;!</span><span class="nx">a</span><span class="p">.</span><span class="nx">propertyIsEnumerable</span><span class="p">(</span><span class="s2">&quot;length&quot;</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="k">typeof</span> <span class="nx">a</span><span class="p">.</span><span class="nx">splice</span><span class="o">===</span><span class="s2">&quot;function&quot;</span><span class="o">&amp;&amp;</span>
<span class="p">(</span><span class="nx">b</span><span class="o">=</span><span class="s2">&quot;array&quot;</span><span class="p">)</span><span class="o">:</span><span class="nx">b</span><span class="o">=</span><span class="s2">&quot;null&quot;</span><span class="p">);</span><span class="k">return</span> <span class="nx">b</span><span class="p">}</span><span class="nx">Jath</span><span class="o">=</span><span class="p">{};</span><span class="nx">Jath</span><span class="p">.</span><span class="nx">parse</span><span class="o">=</span><span class="nx">f</span><span class="p">;</span><span class="nx">Jath</span><span class="p">.</span><span class="nx">resolver</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span><span class="nx">Jath</span><span class="p">.</span><span class="nx">literalChar</span><span class="o">=</span><span class="s2">&quot;:&quot;</span><span class="p">;</span><span class="kd">var</span> <span class="nx">g</span><span class="p">;</span><span class="k">typeof</span> <span class="nx">WScript</span><span class="o">!=</span><span class="s2">&quot;undefined&quot;</span><span class="o">?</span><span class="nx">g</span><span class="o">=</span><span class="s2">&quot;msie&quot;</span><span class="o">:</span><span class="k">typeof</span> <span class="nx">process</span><span class="o">!=</span><span class="s2">&quot;undefined&quot;</span><span class="o">?</span><span class="p">(</span><span class="nx">g</span><span class="o">=</span><span class="s2">&quot;node&quot;</span><span class="p">,</span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;libxmljs&quot;</span><span class="p">),</span><span class="nx">exports</span><span class="p">.</span><span class="nx">parse</span><span class="o">=</span><span class="nx">f</span><span class="p">)</span><span class="o">:</span><span class="nx">g</span><span class="o">=</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">().</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;msie&quot;</span><span class="p">)</span><span class="o">&gt;-</span><span class="mi">1</span><span class="o">?</span><span class="s2">&quot;msie&quot;</span><span class="o">:</span><span class="s2">&quot;standards&quot;</span><span class="p">})();</span>

<span class="cm">/*</span>
<span class="cm"> * An URI datatype.  Based upon examples in RFC3986.</span>
<span class="cm"> *</span>
<span class="cm"> * TODO %-escaping</span>
<span class="cm"> * TODO split apart authority</span>
<span class="cm"> * TODO split apart query_string (on demand, anyway)</span>
<span class="cm"> *</span>
<span class="cm"> * @(#) $Id$</span>
<span class="cm"> */</span>

<span class="kd">function</span> <span class="nx">URI</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="nx">b</span><span class="o">||</span><span class="p">(</span><span class="nx">b</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">);</span><span class="nx">b</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/^(?:([^:\/?\#]+):)?(?:\/\/([^\/?\#]*))?([^?\#]*)(?:\?([^\#]*))?(?:\#(.*))?/</span><span class="p">);</span><span class="k">this</span><span class="p">.</span><span class="nx">scheme</span><span class="o">=</span><span class="nx">b</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">||</span><span class="kc">null</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">authority</span><span class="o">=</span><span class="nx">b</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">||</span><span class="kc">null</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">path</span><span class="o">=</span><span class="nx">b</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">||</span><span class="kc">null</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">query</span><span class="o">=</span><span class="nx">b</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">||</span><span class="kc">null</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">fragment</span><span class="o">=</span><span class="nx">b</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="o">||</span><span class="kc">null</span><span class="p">}</span><span class="nx">URI</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">scheme</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">b</span><span class="o">+=</span><span class="k">this</span><span class="p">.</span><span class="nx">scheme</span><span class="o">+</span><span class="s2">&quot;:&quot;</span><span class="p">);</span><span class="k">this</span><span class="p">.</span><span class="nx">authority</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">b</span><span class="o">+=</span><span class="s2">&quot;//&quot;</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">authority</span><span class="p">);</span><span class="k">this</span><span class="p">.</span><span class="nx">path</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">b</span><span class="o">+=</span><span class="k">this</span><span class="p">.</span><span class="nx">path</span><span class="p">);</span><span class="k">this</span><span class="p">.</span><span class="nx">query</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">b</span><span class="o">+=</span><span class="s2">&quot;?&quot;</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">query</span><span class="p">);</span><span class="k">this</span><span class="p">.</span><span class="nx">fragment</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">b</span><span class="o">+=</span><span class="s2">&quot;#&quot;</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">fragment</span><span class="p">);</span><span class="k">return</span> <span class="nx">b</span><span class="p">};</span>
<span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="kd">function</span> <span class="nx">b</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">a</span><span class="p">)</span><span class="k">return</span><span class="s2">&quot;&quot;</span><span class="p">;</span><span class="nx">a</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\/\.\//g</span><span class="p">,</span><span class="s2">&quot;/&quot;</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="nx">a</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\/\.$/</span><span class="p">,</span><span class="s2">&quot;/&quot;</span><span class="p">);</span><span class="nx">a</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">e</span><span class="p">);)</span><span class="nx">a</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="s2">&quot;/&quot;</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="nx">a</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\/([^\/]*)\/\.\.$/</span><span class="p">,</span><span class="s2">&quot;/&quot;</span><span class="p">);</span><span class="nx">a</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/\/\.\.\//</span><span class="p">);)</span><span class="nx">a</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\/\.\.\//</span><span class="p">,</span><span class="s2">&quot;/&quot;</span><span class="p">);</span><span class="k">return</span> <span class="nx">a</span><span class="p">}</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="sr">/\/((?!\.\.\/)[^\/]*)\/\.\.\//</span><span class="p">;</span><span class="nx">URI</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">resolve</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="k">new</span> <span class="nx">URI</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">scheme</span><span class="p">)</span><span class="nx">c</span><span class="p">.</span><span class="nx">scheme</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">scheme</span><span class="p">,</span><span class="nx">c</span><span class="p">.</span><span class="nx">authority</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">authority</span><span class="p">,</span><span class="nx">c</span><span class="p">.</span><span class="nx">path</span><span class="o">=</span><span class="nx">b</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">path</span><span class="p">),</span><span class="nx">c</span><span class="p">.</span><span class="nx">query</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">query</span><span class="p">;</span><span class="k">else</span><span class="p">{</span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">authority</span><span class="p">)</span><span class="nx">c</span><span class="p">.</span><span class="nx">authority</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">authority</span><span class="p">,</span><span class="nx">c</span><span class="p">.</span><span class="nx">path</span><span class="o">=</span><span class="nx">b</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">path</span><span class="p">),</span><span class="nx">c</span><span class="p">.</span><span class="nx">query</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">query</span><span class="p">;</span>
<span class="k">else</span><span class="p">{</span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">path</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">path</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">===</span><span class="s2">&quot;/&quot;</span><span class="p">)</span><span class="nx">c</span><span class="p">.</span><span class="nx">path</span><span class="o">=</span><span class="nx">b</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">path</span><span class="p">);</span><span class="k">else</span><span class="p">{</span><span class="kd">var</span> <span class="nx">d</span><span class="p">;</span><span class="nx">d</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">path</span><span class="p">;</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="sr">/^(.*)\//</span><span class="p">;</span><span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">authority</span><span class="o">&amp;&amp;!</span><span class="nx">a</span><span class="p">.</span><span class="nx">path</span><span class="o">?</span><span class="s2">&quot;/&quot;</span><span class="o">+</span><span class="nx">d</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">path</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">e</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="nx">d</span><span class="p">;</span><span class="nx">c</span><span class="p">.</span><span class="nx">path</span><span class="o">=</span><span class="nx">d</span><span class="p">;</span><span class="nx">c</span><span class="p">.</span><span class="nx">path</span><span class="o">=</span><span class="nx">b</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">path</span><span class="p">)}</span><span class="nx">c</span><span class="p">.</span><span class="nx">query</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">query</span><span class="p">}</span><span class="k">else</span> <span class="nx">c</span><span class="p">.</span><span class="nx">path</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">path</span><span class="p">,</span><span class="nx">c</span><span class="p">.</span><span class="nx">query</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">query</span><span class="o">?</span><span class="k">this</span><span class="p">.</span><span class="nx">query</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">query</span><span class="p">;</span><span class="nx">c</span><span class="p">.</span><span class="nx">authority</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">authority</span><span class="p">}</span><span class="nx">c</span><span class="p">.</span><span class="nx">scheme</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">scheme</span><span class="p">}</span><span class="nx">c</span><span class="p">.</span><span class="nx">fragment</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">fragment</span><span class="p">;</span><span class="k">return</span> <span class="nx">c</span><span class="p">}})();</span>
 </pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>ZipFile.complete.js</p>

<p>Tue 05/10/2011</p>

<p>=======================================================</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>JSIO.core.js</p>

<p>core methods for Javascript IO.</p>

<p>by Dino Chiesa</p>

<p>Tue, 19 Jan 2010  17:44</p>

<p>Licensed under the Ms-PL, see
the accompanying License.txt file</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">JSIO</span><span class="o">==</span><span class="s2">&quot;object&quot;</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;JSIO is already defined&quot;</span><span class="p">);</span><span class="nx">d</span><span class="p">.</span><span class="nx">source</span><span class="o">=</span><span class="s2">&quot;JSIO.core.js&quot;</span><span class="p">;</span><span class="k">throw</span> <span class="nx">d</span><span class="p">;}</span><span class="nx">JSIO</span><span class="o">=</span><span class="p">{</span><span class="nx">version</span><span class="o">:</span><span class="s2">&quot;1.3 2011May10&quot;</span><span class="p">,</span><span class="nx">decimalToHexString</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="nx">c</span><span class="o">&lt;</span><span class="mi">0</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">c</span><span class="o">=</span><span class="mi">4294967295</span><span class="o">+</span><span class="nx">c</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">).</span><span class="nx">toUpperCase</span><span class="p">();</span><span class="nx">e</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">b</span><span class="o">=</span><span class="s2">&quot;00000000&quot;</span><span class="o">+</span><span class="nx">b</span><span class="p">,</span><span class="nx">b</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="nx">e</span><span class="p">));</span><span class="k">return</span> <span class="nx">b</span><span class="p">},</span><span class="nx">FileType</span><span class="o">:</span><span class="p">{</span><span class="nx">Text</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="nx">Binary</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span><span class="nx">XML</span><span class="o">:</span><span class="mi">2</span><span class="p">,</span><span class="nx">Unknown</span><span class="o">:</span><span class="mi">3</span><span class="p">}};</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">guessFileType</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">c</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">c</span><span class="o">==</span><span class="s2">&quot;makefile&quot;</span><span class="p">)</span><span class="k">return</span> <span class="nx">JSIO</span><span class="p">.</span><span class="nx">FileType</span><span class="p">.</span><span class="nx">Text</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">c</span><span class="o">==</span><span class="s2">&quot;mimetype&quot;</span><span class="p">)</span><span class="k">return</span> <span class="nx">JSIO</span><span class="p">.</span><span class="nx">FileType</span><span class="p">.</span><span class="nx">Text</span><span class="p">;</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">lastIndexOf</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">e</span><span class="o">&lt;=</span><span class="mi">0</span><span class="p">)</span><span class="k">return</span> <span class="nx">JSIO</span><span class="p">.</span><span class="nx">FileType</span><span class="p">.</span><span class="nx">Unknown</span><span class="p">;</span>
<span class="nx">c</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span><span class="k">return</span> <span class="nx">c</span><span class="o">==</span><span class="s2">&quot;.zip&quot;</span><span class="o">?</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">FileType</span><span class="p">.</span><span class="nx">Binary</span><span class="o">:</span><span class="nx">c</span><span class="o">==</span><span class="s2">&quot;.xlsx&quot;</span><span class="o">?</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">FileType</span><span class="p">.</span><span class="nx">Binary</span><span class="o">:</span><span class="nx">c</span><span class="o">==</span><span class="s2">&quot;.docx&quot;</span><span class="o">?</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">FileType</span><span class="p">.</span><span class="nx">Binary</span><span class="o">:</span><span class="nx">c</span><span class="o">==</span><span class="s2">&quot;.dll&quot;</span><span class="o">?</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">FileType</span><span class="p">.</span><span class="nx">Binary</span><span class="o">:</span><span class="nx">c</span><span class="o">==</span><span class="s2">&quot;.obj&quot;</span><span class="o">?</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">FileType</span><span class="p">.</span><span class="nx">Binary</span><span class="o">:</span><span class="nx">c</span><span class="o">==</span><span class="s2">&quot;.pdb&quot;</span><span class="o">?</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">FileType</span><span class="p">.</span><span class="nx">Binary</span><span class="o">:</span><span class="nx">c</span><span class="o">==</span><span class="s2">&quot;.exe&quot;</span><span class="o">?</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">FileType</span><span class="p">.</span><span class="nx">Binary</span><span class="o">:</span><span class="nx">c</span><span class="o">==</span><span class="s2">&quot;.xml&quot;</span><span class="o">?</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">FileType</span><span class="p">.</span><span class="nx">XML</span><span class="o">:</span><span class="nx">c</span><span class="o">==</span><span class="s2">&quot;.xsl&quot;</span><span class="o">?</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">FileType</span><span class="p">.</span><span class="nx">XML</span><span class="o">:</span><span class="nx">c</span><span class="o">==</span><span class="s2">&quot;.csproj&quot;</span><span class="o">?</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">FileType</span><span class="p">.</span><span class="nx">XML</span><span class="o">:</span><span class="nx">c</span><span class="o">==</span><span class="s2">&quot;.vbproj&quot;</span><span class="o">?</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">FileType</span><span class="p">.</span><span class="nx">XML</span><span class="o">:</span><span class="nx">c</span><span class="o">==</span><span class="s2">&quot;.shfbproj&quot;</span><span class="o">?</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">FileType</span><span class="p">.</span><span class="nx">XML</span><span class="o">:</span><span class="nx">c</span><span class="o">==</span><span class="s2">&quot;.resx&quot;</span><span class="o">?</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">FileType</span><span class="p">.</span><span class="nx">XML</span><span class="o">:</span><span class="nx">c</span><span class="o">==</span><span class="s2">&quot;.xslt&quot;</span><span class="o">?</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">FileType</span><span class="p">.</span><span class="nx">XML</span><span class="o">:</span><span class="nx">c</span><span class="o">==</span><span class="s2">&quot;.sln&quot;</span><span class="o">?</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">FileType</span><span class="p">.</span><span class="nx">Text</span><span class="o">:</span><span class="nx">c</span><span class="o">==</span><span class="s2">&quot;.htm&quot;</span><span class="o">?</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">FileType</span><span class="p">.</span><span class="nx">Text</span><span class="o">:</span>
<span class="nx">c</span><span class="o">==</span><span class="s2">&quot;.html&quot;</span><span class="o">?</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">FileType</span><span class="p">.</span><span class="nx">Text</span><span class="o">:</span><span class="nx">c</span><span class="o">==</span><span class="s2">&quot;.js&quot;</span><span class="o">?</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">FileType</span><span class="p">.</span><span class="nx">Text</span><span class="o">:</span><span class="nx">c</span><span class="o">==</span><span class="s2">&quot;.vb&quot;</span><span class="o">?</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">FileType</span><span class="p">.</span><span class="nx">Text</span><span class="o">:</span><span class="nx">c</span><span class="o">==</span><span class="s2">&quot;.txt&quot;</span><span class="o">?</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">FileType</span><span class="p">.</span><span class="nx">Text</span><span class="o">:</span><span class="nx">c</span><span class="o">==</span><span class="s2">&quot;.rels&quot;</span><span class="o">?</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">FileType</span><span class="p">.</span><span class="nx">Text</span><span class="o">:</span><span class="nx">c</span><span class="o">==</span><span class="s2">&quot;.css&quot;</span><span class="o">?</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">FileType</span><span class="p">.</span><span class="nx">Text</span><span class="o">:</span><span class="nx">c</span><span class="o">==</span><span class="s2">&quot;.cs&quot;</span><span class="o">?</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">FileType</span><span class="p">.</span><span class="nx">Text</span><span class="o">:</span><span class="nx">c</span><span class="o">==</span><span class="s2">&quot;.ncx&quot;</span><span class="o">?</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">FileType</span><span class="p">.</span><span class="nx">Text</span><span class="o">:</span><span class="nx">c</span><span class="o">==</span><span class="s2">&quot;.xhtml&quot;</span><span class="o">?</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">FileType</span><span class="p">.</span><span class="nx">Text</span><span class="o">:</span><span class="nx">c</span><span class="o">==</span><span class="s2">&quot;.opf&quot;</span><span class="o">?</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">FileType</span><span class="p">.</span><span class="nx">Text</span><span class="o">:</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">FileType</span><span class="p">.</span><span class="nx">Unknown</span><span class="p">};</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">stringOfLength</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">a</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">a</span><span class="o">&lt;</span><span class="nx">e</span><span class="p">;</span><span class="nx">a</span><span class="o">++</span><span class="p">)</span><span class="nx">b</span><span class="o">+=</span><span class="nb">String</span><span class="p">.</span><span class="nx">fromCharCode</span><span class="p">(</span><span class="nx">c</span><span class="p">);</span><span class="k">return</span> <span class="nx">b</span><span class="p">};</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">formatByteArray</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">c</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="s2">&quot;0000  &quot;</span><span class="p">,</span><span class="nx">b</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">a</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">a</span><span class="o">&lt;</span><span class="nx">c</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">a</span><span class="o">++</span><span class="p">)</span><span class="nx">a</span><span class="o">!==</span><span class="mi">0</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="o">%</span><span class="mi">16</span><span class="o">===</span><span class="mi">0</span><span class="o">&amp;&amp;</span>
<span class="p">(</span><span class="nx">e</span><span class="o">+=</span><span class="s2">&quot;    &quot;</span><span class="o">+</span><span class="nx">b</span><span class="o">+</span><span class="s2">&quot;\n&quot;</span><span class="o">+</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">decimalToHexString</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;  &quot;</span><span class="p">,</span><span class="nx">b</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">),</span><span class="nx">e</span><span class="o">+=</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">decimalToHexString</span><span class="p">(</span><span class="nx">c</span><span class="p">[</span><span class="nx">a</span><span class="p">],</span><span class="mi">2</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot; &quot;</span><span class="p">,</span><span class="nx">b</span><span class="o">+=</span><span class="nx">c</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="o">&gt;=</span><span class="mi">32</span><span class="o">&amp;&amp;</span><span class="nx">c</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="o">&lt;=</span><span class="mi">126</span><span class="o">?</span><span class="nb">String</span><span class="p">.</span><span class="nx">fromCharCode</span><span class="p">(</span><span class="nx">c</span><span class="p">[</span><span class="nx">a</span><span class="p">])</span><span class="o">:</span><span class="s2">&quot;.&quot;</span><span class="p">;</span><span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">e</span><span class="o">+=</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">stringOfLength</span><span class="p">(</span><span class="mi">32</span><span class="p">,(</span><span class="nx">a</span><span class="o">%</span><span class="mi">16</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">?</span><span class="p">(</span><span class="mi">16</span><span class="o">-</span><span class="nx">a</span><span class="o">%</span><span class="mi">16</span><span class="p">)</span><span class="o">*</span><span class="mi">3</span><span class="o">:</span><span class="mi">0</span><span class="p">)</span><span class="o">+</span><span class="mi">4</span><span class="p">)</span><span class="o">+</span><span class="nx">b</span><span class="p">);</span><span class="k">return</span> <span class="nx">e</span><span class="p">};</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">htmlEscape</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">c</span><span class="p">){</span><span class="k">return</span> <span class="nx">c</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nb">RegExp</span><span class="p">(</span><span class="s2">&quot;&amp;&quot;</span><span class="p">,</span><span class="s2">&quot;g&quot;</span><span class="p">),</span><span class="s2">&quot;&amp;amp;&quot;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="nb">RegExp</span><span class="p">(</span><span class="s2">&quot;&lt;&quot;</span><span class="p">,</span><span class="s2">&quot;g&quot;</span><span class="p">),</span><span class="s2">&quot;&amp;lt;&quot;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="nb">RegExp</span><span class="p">(</span><span class="s2">&quot;&gt;&quot;</span><span class="p">,</span><span class="s2">&quot;g&quot;</span><span class="p">),</span><span class="s2">&quot;&amp;gt;&quot;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="nb">RegExp</span><span class="p">(</span><span class="s2">&quot;\u0013&quot;</span><span class="p">,</span><span class="s2">&quot;g&quot;</span><span class="p">),</span><span class="s2">&quot;&lt;br/&gt;&quot;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="nb">RegExp</span><span class="p">(</span><span class="s2">&quot;\u0010&quot;</span><span class="p">,</span><span class="s2">&quot;g&quot;</span><span class="p">),</span><span class="s2">&quot;&lt;br/&gt;&quot;</span><span class="p">)}})();</span>
<span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="k">typeof</span> <span class="nx">JSIO</span><span class="o">!==</span><span class="s2">&quot;object&quot;</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">JSIO</span><span class="o">=</span><span class="p">{});</span><span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">JSIO</span><span class="p">.</span><span class="nx">version</span><span class="o">!==</span><span class="s2">&quot;string&quot;</span><span class="p">)</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">version</span><span class="o">=</span><span class="s2">&quot;1.3 2011May10&quot;</span><span class="p">;</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">version</span><span class="p">.</span><span class="nx">length</span><span class="o">&lt;</span><span class="mi">3</span><span class="o">||</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">version</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span><span class="o">!==</span><span class="s2">&quot;1.3&quot;</span><span class="p">)</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">version</span><span class="o">+=</span><span class="s2">&quot; 1.3 2011May10&quot;</span><span class="p">;</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="o">=</span><span class="mi">0</span><span class="p">};</span><span class="nx">d</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">readToEnd</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="p">[],</span><span class="nx">a</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">readByte</span><span class="p">();</span><span class="nx">a</span><span class="o">!==</span><span class="kc">null</span><span class="p">;)</span><span class="nx">b</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span><span class="nx">a</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">readByte</span><span class="p">();</span><span class="k">return</span> <span class="nx">b</span><span class="p">};</span><span class="nx">d</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">beginReadToEnd</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="p">[],</span><span class="nx">e</span><span class="o">=</span><span class="k">this</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">f</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">readByte</span><span class="p">();</span><span class="nx">f</span><span class="o">!==</span><span class="kc">null</span><span class="p">;){</span><span class="nx">a</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">f</span><span class="p">);</span><span class="nx">d</span><span class="o">++</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">d</span><span class="o">&gt;=</span><span class="mi">1024</span><span class="p">)</span><span class="k">break</span><span class="p">;</span><span class="nx">f</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">readByte</span><span class="p">()}</span><span class="nx">f</span><span class="o">!==</span>
<span class="kc">null</span><span class="o">?</span><span class="k">typeof</span> <span class="nx">setTimeout</span><span class="o">==</span><span class="s2">&quot;undefined&quot;</span><span class="o">?</span><span class="nx">c</span><span class="p">()</span><span class="o">:</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="o">:</span><span class="nx">b</span><span class="p">(</span><span class="nx">a</span><span class="p">)};</span><span class="nx">c</span><span class="p">();</span><span class="k">return</span> <span class="kc">null</span><span class="p">};</span><span class="nx">d</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">readBytes</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="p">[],</span><span class="nx">e</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">e</span><span class="o">&lt;</span><span class="nx">b</span><span class="p">;</span><span class="o">++</span><span class="nx">e</span><span class="p">)</span><span class="nx">a</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">readByte</span><span class="p">());</span><span class="k">return</span> <span class="nx">a</span><span class="p">};</span><span class="nx">d</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">beginReadBytes</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="p">[],</span><span class="nx">c</span><span class="o">=</span><span class="k">this</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="nx">b</span><span class="p">,</span><span class="nx">f</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">j</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">readByte</span><span class="p">();</span><span class="nx">d</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">&amp;&amp;</span><span class="nx">j</span><span class="o">!==</span><span class="kc">null</span><span class="p">;){</span><span class="nx">e</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">j</span><span class="p">);</span><span class="nx">b</span><span class="o">++</span><span class="p">;</span><span class="nx">d</span><span class="o">--</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="o">&gt;=</span><span class="mi">1024</span><span class="p">)</span><span class="k">break</span><span class="p">;</span><span class="nx">j</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">readByte</span><span class="p">()}</span><span class="nx">d</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">&amp;&amp;</span><span class="nx">j</span><span class="o">!==</span><span class="kc">null</span><span class="o">?</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="o">:</span><span class="nx">a</span><span class="p">(</span><span class="nx">e</span><span class="p">)};</span><span class="nx">f</span><span class="p">();</span><span class="k">return</span> <span class="kc">null</span><span class="p">};</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">_ByteReaderBase</span><span class="o">=</span><span class="nx">d</span><span class="p">;</span><span class="nx">d</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="k">this</span> <span class="k">instanceof</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">callee</span><span class="p">)){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;you must use new to instantiate this class&quot;</span><span class="p">);</span>
<span class="nx">a</span><span class="p">.</span><span class="nx">source</span><span class="o">=</span><span class="s2">&quot;JSIO.ArrayReader&quot;</span><span class="p">;</span><span class="k">throw</span> <span class="nx">a</span><span class="p">;}</span><span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">array</span><span class="o">=</span><span class="nx">b</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">_typename</span><span class="o">=</span><span class="s2">&quot;JSIO.ArrayReader&quot;</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">_version</span><span class="o">=</span><span class="s2">&quot;1.3 2011May10&quot;</span><span class="p">;</span><span class="k">return</span> <span class="k">this</span><span class="p">};</span><span class="nx">d</span><span class="p">.</span><span class="nx">prototype</span><span class="o">=</span><span class="k">new</span> <span class="nx">JSIO</span><span class="p">.</span><span class="nx">_ByteReaderBase</span><span class="p">;</span><span class="nx">d</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">readByte</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="o">&gt;=</span><span class="k">this</span><span class="p">.</span><span class="nx">array</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span><span class="k">return</span> <span class="kc">null</span><span class="p">;</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">array</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="p">];</span><span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="o">++</span><span class="p">;</span><span class="k">return</span> <span class="nx">b</span><span class="p">};</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="k">this</span> <span class="k">instanceof</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">callee</span><span class="p">)){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;you must use new to instantiate this class&quot;</span><span class="p">);</span><span class="nx">a</span><span class="p">.</span><span class="nx">source</span><span class="o">=</span><span class="s2">&quot;JSIO.StreamReader&quot;</span><span class="p">;</span><span class="k">throw</span> <span class="nx">a</span><span class="p">;}</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">b</span><span class="p">)</span><span class="k">throw</span> <span class="nx">a</span><span class="o">=</span><span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;you must pass a non-null stream.&quot;</span><span class="p">),</span>
<span class="nx">a</span><span class="p">.</span><span class="nx">source</span><span class="o">=</span><span class="s2">&quot;JSIO.StreamReader&quot;</span><span class="p">,</span><span class="nx">a</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">stream</span><span class="o">=</span><span class="nx">b</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">_typeName</span><span class="o">=</span><span class="s2">&quot;JSIO.StreamReader&quot;</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">_version</span><span class="o">=</span><span class="s2">&quot;1.3 2011May10&quot;</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">getLength</span><span class="p">();</span><span class="k">return</span> <span class="k">this</span><span class="p">};</span><span class="nx">c</span><span class="p">.</span><span class="nx">prototype</span><span class="o">=</span><span class="k">new</span> <span class="nx">JSIO</span><span class="p">.</span><span class="nx">_ByteReaderBase</span><span class="p">;</span><span class="nx">c</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">readByte</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="o">&gt;=</span><span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span><span class="k">return</span> <span class="kc">null</span><span class="p">;</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">stream</span><span class="p">.</span><span class="nx">readByteAt</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="p">);</span><span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="o">++</span><span class="p">;</span><span class="k">return</span> <span class="nx">b</span><span class="p">};</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="k">this</span> <span class="k">instanceof</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">callee</span><span class="p">)){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;you must use new to instantiate this class&quot;</span><span class="p">);</span><span class="nx">c</span><span class="p">.</span><span class="nx">source</span><span class="o">=</span><span class="s2">&quot;JSIO.StreamSegmentReader&quot;</span><span class="p">;</span>
<span class="k">throw</span> <span class="nx">c</span><span class="p">;}</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">b</span><span class="p">)</span><span class="k">throw</span> <span class="nx">c</span><span class="o">=</span><span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;you must pass a non-null stream.&quot;</span><span class="p">),</span><span class="nx">c</span><span class="p">.</span><span class="nx">source</span><span class="o">=</span><span class="s2">&quot;JSIO.StreamSegmentReader&quot;</span><span class="p">,</span><span class="nx">c</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">stream</span><span class="o">=</span><span class="nx">b</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="o">=</span><span class="nx">a</span><span class="o">||</span><span class="mi">0</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">limit</span><span class="o">=</span><span class="nx">e</span><span class="o">?</span><span class="nx">a</span><span class="o">+</span><span class="nx">e</span><span class="o">:</span><span class="mi">0</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">_typeName</span><span class="o">=</span><span class="s2">&quot;JSIO.StreamSegmentReader&quot;</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">_version</span><span class="o">=</span><span class="s2">&quot;1.3 2011May10&quot;</span><span class="p">;</span><span class="k">return</span> <span class="k">this</span><span class="p">};</span><span class="nx">e</span><span class="p">.</span><span class="nx">prototype</span><span class="o">=</span><span class="k">new</span> <span class="nx">JSIO</span><span class="p">.</span><span class="nx">_ByteReaderBase</span><span class="p">;</span><span class="nx">e</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">readByte</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">limit</span><span class="o">!==</span><span class="mi">0</span><span class="o">&amp;&amp;</span><span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="o">&gt;=</span><span class="k">this</span><span class="p">.</span><span class="nx">limit</span><span class="p">)</span><span class="k">return</span> <span class="kc">null</span><span class="p">;</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">stream</span><span class="p">.</span><span class="nx">readByteAt</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="p">);</span><span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="o">++</span><span class="p">;</span><span class="k">return</span> <span class="nx">b</span><span class="p">};</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">ArrayReader</span><span class="o">=</span><span class="nx">d</span><span class="p">;</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">StreamReader</span><span class="o">=</span><span class="nx">c</span><span class="p">;</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">StreamSegmentReader</span><span class="o">=</span><span class="nx">e</span><span class="p">})();</span>
<span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">JSIO</span><span class="o">!==</span><span class="s2">&quot;object&quot;</span><span class="o">||</span><span class="k">typeof</span> <span class="nx">JSIO</span><span class="p">.</span><span class="nx">version</span><span class="o">!==</span><span class="s2">&quot;string&quot;</span><span class="o">||</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">version</span><span class="p">.</span><span class="nx">length</span><span class="o">&lt;</span><span class="mi">3</span><span class="o">||</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">version</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span><span class="o">!==</span><span class="s2">&quot;1.3&quot;</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;This extension requires JSIO.core.js v1.3&quot;</span><span class="p">);</span><span class="nx">d</span><span class="p">.</span><span class="nx">source</span><span class="o">=</span><span class="s2">&quot;JSIO.BinaryUrlStream.js&quot;</span><span class="p">;</span><span class="k">throw</span> <span class="nx">d</span><span class="p">;}</span><span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">JSIO</span><span class="p">.</span><span class="nx">_ByteReaderBase</span><span class="o">!==</span><span class="s2">&quot;function&quot;</span><span class="p">)</span><span class="k">throw</span> <span class="nx">d</span><span class="o">=</span><span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;This class requires JSIO.BasicByteReaders.js&quot;</span><span class="p">),</span><span class="nx">d</span><span class="p">.</span><span class="nx">source</span><span class="o">=</span><span class="s2">&quot;JSIO.BinaryUrlStream.js&quot;</span><span class="p">,</span><span class="nx">d</span><span class="p">;</span><span class="sr">/msie/i</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">)</span><span class="o">&amp;&amp;!</span><span class="sr">/opera/i</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="nb">document</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="s2">&quot;&lt;\!-- IEBinaryToArray_ByteStr --\&gt;\r\n&lt;script type=&#39;text/vbscript&#39;&gt;\r\nFunction IEBinaryToArray_ByteStr(Binary)\r\n   IEBinaryToArray_ByteStr = CStr(Binary)\r\nEnd Function\r\nFunction IEBinaryToArray_ByteStr_Last(Binary)\r\n   Dim lastIndex\r\n   lastIndex = LenB(Binary)\r\n   if lastIndex mod 2 Then\r\n           IEBinaryToArray_ByteStr_Last = Chr( AscB( MidB( Binary, lastIndex, 1 ) ) )\r\n   Else\r\n           IEBinaryToArray_ByteStr_Last = \&quot;\&quot;\r\n   End If\r\nEnd Function\r\n&lt;\/script&gt;\r\n&quot;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="p">){</span><span class="k">switch</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span><span class="k">case</span> <span class="mi">1</span><span class="o">:</span><span class="nx">e</span><span class="o">=</span><span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;Failed to load &quot;&#39;</span><span class="o">+</span><span class="nx">b</span><span class="o">+</span><span class="s1">&#39;&quot;&#39;</span><span class="p">);</span><span class="k">break</span><span class="p">;</span><span class="k">case</span> <span class="mi">2</span><span class="o">:</span><span class="nx">e</span><span class="o">=</span><span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;Error: EOF reached&quot;</span><span class="p">);</span><span class="k">break</span><span class="p">;</span><span class="k">case</span> <span class="mi">3</span><span class="o">:</span><span class="nx">e</span><span class="o">=</span><span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;Error: cannot instantiate XMLHttpRequest&quot;</span><span class="p">);</span><span class="k">break</span><span class="p">;</span><span class="k">case</span> <span class="mi">4</span><span class="o">:</span><span class="nx">e</span><span class="o">=</span><span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;Error: cannot seek&quot;</span><span class="p">);</span><span class="k">break</span><span class="p">;</span><span class="k">default</span><span class="o">:</span><span class="nx">e</span><span class="o">=</span><span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;Unknown Error.&quot;</span><span class="p">)}</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="nx">e</span><span class="p">.</span><span class="nx">message</span><span class="o">=</span><span class="nx">a</span><span class="p">;</span><span class="nx">e</span><span class="p">.</span><span class="nx">source</span><span class="o">=</span><span class="s2">&quot;JSIO.BinaryUrlStream&quot;</span><span class="p">;</span><span class="k">throw</span> <span class="nx">e</span><span class="p">;},</span><span class="nx">d</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="k">this</span> <span class="k">instanceof</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">callee</span><span class="p">)){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;you must use new to instantiate this class&quot;</span><span class="p">);</span><span class="nx">a</span><span class="p">.</span><span class="nx">source</span><span class="o">=</span><span class="s2">&quot;JSIO.BinaryUrlStream.ctor&quot;</span><span class="p">;</span><span class="k">throw</span> <span class="nx">a</span><span class="p">;}</span><span class="k">this</span><span class="p">.</span><span class="nx">callback</span><span class="o">=</span><span class="nx">b</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">readByteAt</span><span class="o">=</span>
<span class="kc">null</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">fileSize</span><span class="o">=-</span><span class="mi">1</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">filePointer</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">req</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">_typename</span><span class="o">=</span><span class="s2">&quot;JSIO.BinaryUrlStream&quot;</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">_version</span><span class="o">=</span><span class="s2">&quot;1.3 2011May10&quot;</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">status</span><span class="o">=</span><span class="s2">&quot;-none-&quot;</span><span class="p">;</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="k">this</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="p">{},</span><span class="nx">e</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">e</span><span class="o">&lt;</span><span class="mi">256</span><span class="p">;</span><span class="nx">e</span><span class="o">++</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">p</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">p</span><span class="o">&lt;</span><span class="mi">256</span><span class="p">;</span><span class="nx">p</span><span class="o">++</span><span class="p">)</span><span class="nx">a</span><span class="p">[</span><span class="nb">String</span><span class="p">.</span><span class="nx">fromCharCode</span><span class="p">(</span><span class="nx">e</span><span class="o">+</span><span class="nx">p</span><span class="o">*</span><span class="mi">256</span><span class="p">)]</span><span class="o">=</span><span class="nb">String</span><span class="p">.</span><span class="nx">fromCharCode</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="o">+</span><span class="nb">String</span><span class="p">.</span><span class="nx">fromCharCode</span><span class="p">(</span><span class="nx">p</span><span class="p">);</span><span class="nx">e</span><span class="o">=</span><span class="nx">IEBinaryToArray_ByteStr</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span><span class="nx">b</span><span class="o">=</span><span class="nx">IEBinaryToArray_ByteStr_Last</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span><span class="k">return</span> <span class="nx">e</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/[\s\S]/g</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="p">[</span><span class="nx">b</span><span class="p">]})</span><span class="o">+</span><span class="nx">b</span><span class="p">};</span><span class="k">this</span><span class="p">.</span><span class="nx">req</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">if</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">XMLHttpRequest</span><span class="p">)</span><span class="k">return</span> <span class="k">new</span> <span class="nb">window</span><span class="p">.</span><span class="nx">XMLHttpRequest</span><span class="p">;</span>
<span class="k">else</span> <span class="k">try</span><span class="p">{</span><span class="k">return</span> <span class="k">new</span> <span class="nx">ActiveXObject</span><span class="p">(</span><span class="s2">&quot;MSXML2.XMLHTTP&quot;</span><span class="p">)}</span><span class="k">catch</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span> <span class="kc">null</span><span class="p">}}();</span><span class="k">this</span><span class="p">.</span><span class="nx">req</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s2">&quot;GET&quot;</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="o">!</span><span class="mi">0</span><span class="p">);</span><span class="k">this</span><span class="p">.</span><span class="nx">req</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="s2">&quot;Accept-Charset&quot;</span><span class="p">,</span><span class="s2">&quot;x-user-defined&quot;</span><span class="p">);</span><span class="k">this</span><span class="p">.</span><span class="nx">req</span><span class="p">.</span><span class="nx">onreadystatechange</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">req</span><span class="p">.</span><span class="nx">readyState</span><span class="o">==</span><span class="mi">4</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">status</span><span class="o">=</span><span class="s2">&quot;Status: &quot;</span><span class="o">+</span><span class="nx">a</span><span class="p">.</span><span class="nx">req</span><span class="p">.</span><span class="nx">status</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">req</span><span class="p">.</span><span class="nx">status</span><span class="o">==</span><span class="mi">200</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">e</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">req</span><span class="p">.</span><span class="nx">responseBody</span><span class="p">);</span><span class="nx">a</span><span class="p">.</span><span class="nx">fileSize</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span><span class="nx">a</span><span class="p">.</span><span class="nx">fileSize</span><span class="o">&lt;</span><span class="mi">0</span><span class="o">&amp;&amp;</span><span class="nx">c</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="s2">&quot;after converting&quot;</span><span class="p">);</span><span class="nx">a</span><span class="p">.</span><span class="nx">readByteAt</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">charCodeAt</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span><span class="o">&amp;</span><span class="mi">255</span><span class="p">};</span><span class="k">typeof</span> <span class="nx">a</span><span class="p">.</span><span class="nx">callback</span><span class="o">==</span><span class="s2">&quot;function&quot;</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">callback</span><span class="p">(</span><span class="nx">a</span><span class="p">)}</span><span class="k">else</span> <span class="nx">c</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="s2">&quot;http status code &quot;</span><span class="o">+</span><span class="nx">a</span><span class="p">.</span><span class="nx">req</span><span class="p">.</span><span class="nx">status</span><span class="p">)};</span>
<span class="k">this</span><span class="p">.</span><span class="nx">req</span><span class="p">.</span><span class="nx">send</span><span class="p">()},</span><span class="nx">d</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="k">this</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">req</span><span class="o">=</span><span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">req</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s2">&quot;GET&quot;</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="o">!</span><span class="mi">0</span><span class="p">);</span><span class="k">this</span><span class="p">.</span><span class="nx">req</span><span class="p">.</span><span class="nx">onreadystatechange</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">req</span><span class="p">.</span><span class="nx">readyState</span><span class="o">==</span><span class="mi">4</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">status</span><span class="o">=</span><span class="s2">&quot;Status: &quot;</span><span class="o">+</span><span class="nx">a</span><span class="p">.</span><span class="nx">req</span><span class="p">.</span><span class="nx">status</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">req</span><span class="p">.</span><span class="nx">status</span><span class="o">==</span><span class="mi">200</span><span class="p">){</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">req</span><span class="p">.</span><span class="nx">responseText</span><span class="p">;</span><span class="nx">a</span><span class="p">.</span><span class="nx">fileSize</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">a</span><span class="p">.</span><span class="nx">readByteAt</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span> <span class="nx">e</span><span class="p">.</span><span class="nx">charCodeAt</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span><span class="o">&amp;</span><span class="mi">255</span><span class="p">};</span><span class="k">typeof</span> <span class="nx">a</span><span class="p">.</span><span class="nx">callback</span><span class="o">==</span><span class="s2">&quot;function&quot;</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">callback</span><span class="p">(</span><span class="nx">a</span><span class="p">)}</span><span class="k">else</span> <span class="nx">c</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="nx">b</span><span class="p">)};</span><span class="k">this</span><span class="p">.</span><span class="nx">req</span><span class="p">.</span><span class="nx">overrideMimeType</span><span class="p">(</span><span class="s2">&quot;text/plain; charset=x-user-defined&quot;</span><span class="p">);</span><span class="k">this</span><span class="p">.</span><span class="nx">req</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="kc">null</span><span class="p">)};</span><span class="sr">/msie/i</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">)</span><span class="o">&amp;&amp;!</span><span class="sr">/opera/i</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">)</span><span class="o">?</span>
<span class="nx">a</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,[</span><span class="nx">e</span><span class="p">])</span><span class="o">:</span><span class="nx">d</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,[</span><span class="nx">e</span><span class="p">])};</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">SeekOrigin</span><span class="o">=</span><span class="p">{</span><span class="nx">Current</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span><span class="nx">Begin</span><span class="o">:</span><span class="mi">2</span><span class="p">};</span><span class="nx">d</span><span class="p">.</span><span class="nx">prototype</span><span class="o">=</span><span class="k">new</span> <span class="nx">JSIO</span><span class="p">.</span><span class="nx">_ByteReaderBase</span><span class="p">;</span><span class="nx">d</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getLength</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">fileSize</span><span class="p">};</span><span class="nx">d</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getPosition</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">filePointer</span><span class="p">};</span><span class="nx">d</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">seek</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="p">){</span><span class="k">typeof</span> <span class="nx">a</span><span class="o">!=</span><span class="s2">&quot;undefined&quot;</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">verbose</span><span class="o">&gt;</span><span class="mi">1</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">status</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;INFO: Seek &quot;</span><span class="o">+</span><span class="nx">e</span><span class="o">+</span><span class="s2">&quot; bytes, origin(&quot;</span><span class="o">+</span><span class="nx">b</span><span class="o">+</span><span class="s2">&quot;) start(0x&quot;</span><span class="o">+</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">decimalToHexString</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">filePointer</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;/&quot;</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">filePointer</span><span class="o">+</span><span class="s2">&quot;)&quot;</span><span class="p">);</span><span class="k">switch</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="k">case</span> <span class="nx">JSIO</span><span class="p">.</span><span class="nx">SeekOrigin</span><span class="p">.</span><span class="nx">Current</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">seek</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">filePointer</span><span class="o">+</span><span class="nx">e</span><span class="p">,</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">SeekOrigin</span><span class="p">.</span><span class="nx">Begin</span><span class="p">);</span>
<span class="k">break</span><span class="p">;</span><span class="k">case</span> <span class="nx">JSIO</span><span class="p">.</span><span class="nx">SeekOrigin</span><span class="p">.</span><span class="nx">Begin</span><span class="o">:</span><span class="nx">e</span><span class="o">&lt;</span><span class="mi">0</span><span class="o">?</span><span class="k">this</span><span class="p">.</span><span class="nx">filePointer</span><span class="o">=</span><span class="mi">0</span><span class="o">:</span><span class="nx">e</span><span class="o">&gt;</span><span class="k">this</span><span class="p">.</span><span class="nx">getLength</span><span class="p">()</span><span class="o">?</span><span class="nx">c</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">filePointer</span><span class="o">=</span><span class="nx">e</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">default</span><span class="o">:</span><span class="nx">c</span><span class="p">(</span><span class="mi">4</span><span class="p">)}</span><span class="k">typeof</span> <span class="nx">a</span><span class="o">!=</span><span class="s2">&quot;undefined&quot;</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">verbose</span><span class="o">&gt;</span><span class="mi">1</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">status</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;INFO: Seek end(0x&quot;</span><span class="o">+</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">decimalToHexString</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">filePointer</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;/&quot;</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">filePointer</span><span class="o">+</span><span class="s2">&quot;)&quot;</span><span class="p">);</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">filePointer</span><span class="p">};</span><span class="nx">d</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">read</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">e</span><span class="o">===</span><span class="mi">0</span><span class="p">)</span><span class="k">return</span><span class="p">[];</span><span class="k">if</span><span class="p">(</span><span class="nx">e</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">)</span><span class="k">throw</span> <span class="nx">e</span><span class="o">=</span><span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;invalid read length.&quot;</span><span class="p">),</span><span class="nx">e</span><span class="p">.</span><span class="nx">source</span><span class="o">=</span><span class="s2">&quot;BinaryUrlStream.read()&quot;</span><span class="p">,</span><span class="nx">e</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">filePointer</span><span class="p">,</span><span class="nx">a</span><span class="o">=</span><span class="p">[],</span><span class="nx">c</span><span class="o">=</span><span class="nx">b</span><span class="p">;</span><span class="nx">c</span><span class="o">&lt;</span><span class="nx">b</span><span class="o">+</span><span class="nx">e</span><span class="p">;</span><span class="nx">c</span><span class="o">++</span><span class="p">)</span><span class="nx">a</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">readByteAt</span><span class="p">(</span><span class="nx">c</span><span class="p">));</span><span class="k">this</span><span class="p">.</span><span class="nx">filePointer</span><span class="o">+=</span><span class="nx">e</span><span class="p">;</span>
<span class="k">return</span> <span class="nx">a</span><span class="p">};</span><span class="nx">d</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">readByte</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">read</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="k">return</span> <span class="nx">e</span><span class="p">.</span><span class="nx">length</span><span class="o">==</span><span class="mi">1</span><span class="o">?</span><span class="nx">e</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">:</span><span class="kc">null</span><span class="p">};</span><span class="nx">d</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">beginRead</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="nx">e</span><span class="o">===</span><span class="mi">0</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">e</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;invalid read length.&quot;</span><span class="p">);</span><span class="nx">a</span><span class="p">.</span><span class="nx">source</span><span class="o">=</span><span class="s2">&quot;BinaryUrlStream.beginRead()&quot;</span><span class="p">;</span><span class="k">throw</span> <span class="nx">a</span><span class="p">;}</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="p">[],</span><span class="nx">d</span><span class="o">=</span><span class="k">this</span><span class="p">,</span><span class="nx">g</span><span class="o">=</span><span class="nx">e</span><span class="p">,</span><span class="nx">f</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">filePointer</span><span class="p">;</span><span class="nx">g</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">;)</span><span class="k">if</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">readByteAt</span><span class="p">(</span><span class="nx">a</span><span class="o">+</span><span class="nx">e</span><span class="p">)),</span><span class="nx">a</span><span class="o">++</span><span class="p">,</span><span class="nx">g</span><span class="o">--</span><span class="p">,</span><span class="nx">a</span><span class="o">&gt;=</span><span class="mi">1024</span><span class="p">)</span><span class="k">break</span><span class="p">;</span><span class="nx">d</span><span class="p">.</span><span class="nx">filePointer</span><span class="o">+=</span><span class="nx">a</span><span class="p">;</span><span class="nx">g</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">?</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="o">:</span><span class="nx">b</span><span class="p">(</span><span class="nx">c</span><span class="p">)};</span><span class="nx">f</span><span class="p">();</span><span class="k">return</span> <span class="kc">null</span><span class="p">};</span><span class="nx">d</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">readNumber</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="nx">e</span><span class="o">||</span><span class="mi">1</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="nx">b</span><span class="o">||</span><span class="k">this</span><span class="p">.</span><span class="nx">filePointer</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">g</span><span class="o">=</span><span class="nx">c</span><span class="o">+</span><span class="nx">a</span><span class="p">;</span><span class="nx">g</span><span class="o">&gt;</span><span class="nx">c</span><span class="p">;</span><span class="nx">g</span><span class="o">--</span><span class="p">)</span><span class="nx">d</span><span class="o">=</span>
<span class="nx">d</span><span class="o">*</span><span class="mi">256</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">readByteAt</span><span class="p">(</span><span class="nx">g</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span><span class="k">this</span><span class="p">.</span><span class="nx">filePointer</span><span class="o">=</span><span class="nx">c</span><span class="o">+</span><span class="nx">a</span><span class="p">;</span><span class="k">return</span> <span class="nx">d</span><span class="p">};</span><span class="nx">d</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">readString</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="nx">e</span><span class="o">||</span><span class="mi">1</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="nx">b</span><span class="o">||</span><span class="k">this</span><span class="p">.</span><span class="nx">filePointer</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">g</span><span class="o">=</span><span class="nx">c</span><span class="o">+</span><span class="nx">a</span><span class="p">;</span><span class="nx">c</span><span class="o">&lt;</span><span class="nx">g</span><span class="p">;</span><span class="nx">c</span><span class="o">++</span><span class="p">)</span><span class="nx">d</span><span class="o">+=</span><span class="nb">String</span><span class="p">.</span><span class="nx">fromCharCode</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">readByteAt</span><span class="p">(</span><span class="nx">c</span><span class="p">));</span><span class="k">this</span><span class="p">.</span><span class="nx">filePointer</span><span class="o">+=</span><span class="nx">a</span><span class="p">;</span><span class="k">return</span> <span class="nx">d</span><span class="p">};</span><span class="nx">d</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">readNullTerminatedString</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="nx">e</span><span class="o">||</span><span class="k">this</span><span class="p">.</span><span class="nx">filePointer</span><span class="p">,</span><span class="nx">b</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">a</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="nb">String</span><span class="p">.</span><span class="nx">fromCharCode</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">readByteAt</span><span class="p">(</span><span class="nx">e</span><span class="o">+</span><span class="nx">c</span><span class="p">));</span><span class="nx">d</span><span class="o">!==</span><span class="kc">null</span><span class="p">;)</span><span class="nx">a</span><span class="o">+=</span><span class="nx">d</span><span class="p">,</span><span class="nx">c</span><span class="o">++</span><span class="p">,</span><span class="nx">c</span><span class="o">&gt;=</span><span class="mi">1024</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">b</span><span class="o">+=</span><span class="nx">a</span><span class="p">,</span><span class="nx">a</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">e</span><span class="o">+=</span><span class="nx">c</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">filePointer</span><span class="o">+=</span><span class="nx">c</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span><span class="nx">d</span><span class="o">=</span><span class="nb">String</span><span class="p">.</span><span class="nx">fromCharCode</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">readByteAt</span><span class="p">(</span><span class="nx">e</span><span class="o">+</span><span class="nx">c</span><span class="p">));</span><span class="k">this</span><span class="p">.</span><span class="nx">filePointer</span><span class="o">=</span><span class="nx">e</span><span class="o">+</span><span class="nx">c</span><span class="p">;</span><span class="k">return</span> <span class="nx">b</span><span class="o">+</span>
<span class="nx">a</span><span class="p">};</span><span class="nx">d</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">beginReadNullTerminatedString</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="nx">b</span><span class="o">||</span><span class="k">this</span><span class="p">.</span><span class="nx">filePointer</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">g</span><span class="o">=</span><span class="k">this</span><span class="p">,</span><span class="nx">f</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">j</span><span class="o">=</span><span class="nb">String</span><span class="p">.</span><span class="nx">fromCharCode</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">readByteAt</span><span class="p">(</span><span class="nx">a</span><span class="o">+</span><span class="nx">b</span><span class="p">));</span><span class="nx">j</span><span class="o">!==</span><span class="kc">null</span><span class="p">;){</span><span class="nx">d</span><span class="o">+=</span><span class="nx">j</span><span class="p">;</span><span class="nx">b</span><span class="o">++</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="o">&gt;=</span><span class="mi">1024</span><span class="p">){</span><span class="nx">c</span><span class="o">+=</span><span class="nx">d</span><span class="p">;</span><span class="nx">d</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">;</span><span class="nx">a</span><span class="o">+=</span><span class="nx">b</span><span class="p">;</span><span class="nx">g</span><span class="p">.</span><span class="nx">filePointer</span><span class="o">+=</span><span class="nx">b</span><span class="p">;</span><span class="nx">b</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="k">break</span><span class="p">}</span><span class="nx">j</span><span class="o">=</span><span class="nb">String</span><span class="p">.</span><span class="nx">fromCharCodet</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">readByteAt</span><span class="p">(</span><span class="nx">i</span><span class="p">))}</span><span class="nx">g</span><span class="p">.</span><span class="nx">filePointer</span><span class="o">=</span><span class="nx">a</span><span class="o">+</span><span class="nx">b</span><span class="p">;</span><span class="nx">j</span><span class="o">!==</span><span class="kc">null</span><span class="o">?</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="o">:</span><span class="nx">e</span><span class="p">(</span><span class="nx">c</span><span class="o">+</span><span class="nx">d</span><span class="p">)};</span><span class="nx">f</span><span class="p">();</span><span class="k">return</span> <span class="kc">null</span><span class="p">};</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">BinaryUrlStream</span><span class="o">=</span><span class="nx">d</span><span class="p">})();</span>
<span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">JSIO</span><span class="o">!==</span><span class="s2">&quot;object&quot;</span><span class="o">||</span><span class="k">typeof</span> <span class="nx">JSIO</span><span class="p">.</span><span class="nx">version</span><span class="o">!==</span><span class="s2">&quot;string&quot;</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;This extension requires JSIO.core.js v1.3&quot;</span><span class="p">);</span><span class="nx">d</span><span class="p">.</span><span class="nx">source</span><span class="o">=</span><span class="s2">&quot;JSIO.TextDecoder.js&quot;</span><span class="p">;</span><span class="k">throw</span> <span class="nx">d</span><span class="p">;}</span><span class="k">if</span><span class="p">(</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">version</span><span class="p">.</span><span class="nx">length</span><span class="o">&lt;</span><span class="mi">3</span><span class="o">||</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">version</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span><span class="o">!==</span><span class="s2">&quot;1.3&quot;</span><span class="p">)</span><span class="k">throw</span> <span class="nx">d</span><span class="o">=</span><span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;This extension requires JSIO.core.js v1.3&quot;</span><span class="p">),</span><span class="nx">d</span><span class="p">.</span><span class="nx">source</span><span class="o">=</span><span class="s2">&quot;JSIO.TextDecoder.js&quot;</span><span class="p">,</span><span class="nx">d</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">JSIO</span><span class="p">.</span><span class="nx">_ByteReaderBase</span><span class="o">!==</span><span class="s2">&quot;function&quot;</span><span class="p">)</span><span class="k">throw</span> <span class="nx">d</span><span class="o">=</span><span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;This class requires JSIO.BasicByteReaders.js&quot;</span><span class="p">),</span><span class="nx">d</span><span class="p">.</span><span class="nx">source</span><span class="o">=</span><span class="s2">&quot;JSIO.TextDecoder.js&quot;</span><span class="p">,</span><span class="nx">d</span><span class="p">;</span><span class="nx">d</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="k">this</span> <span class="k">instanceof</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">callee</span><span class="p">)){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span>
<span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;you must use new to instantiate this class&quot;</span><span class="p">);</span><span class="nx">a</span><span class="p">.</span><span class="nx">source</span><span class="o">=</span><span class="s2">&quot;JSIO.TextDecoder.Default.ctor&quot;</span><span class="p">;</span><span class="k">throw</span> <span class="nx">a</span><span class="p">;}</span><span class="k">this</span><span class="p">.</span><span class="nx">byteReader</span><span class="o">=</span><span class="nx">b</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">_version</span><span class="o">=</span><span class="s2">&quot;1.3 2011May10&quot;</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">_typename</span><span class="o">=</span><span class="s2">&quot;JSIO.TextDecoder.Default&quot;</span><span class="p">;</span><span class="k">return</span> <span class="k">this</span><span class="p">};</span><span class="nx">d</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">readChar</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">byteReader</span><span class="p">.</span><span class="nx">readByte</span><span class="p">();</span><span class="k">return</span> <span class="nx">b</span><span class="o">&lt;</span><span class="mi">0</span><span class="o">?</span><span class="kc">null</span><span class="o">:</span><span class="nb">String</span><span class="p">.</span><span class="nx">fromCharCode</span><span class="p">(</span><span class="nx">b</span><span class="p">)};</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="k">this</span> <span class="k">instanceof</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">callee</span><span class="p">)){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;you must use new to instantiate this class&quot;</span><span class="p">);</span><span class="nx">a</span><span class="p">.</span><span class="nx">source</span><span class="o">=</span><span class="s2">&quot;JSIO.TextDecoder.Utf16.ctor&quot;</span><span class="p">;</span><span class="k">throw</span> <span class="nx">a</span><span class="p">;}</span><span class="k">this</span><span class="p">.</span><span class="nx">byteReader</span><span class="o">=</span><span class="nx">b</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">bomState</span><span class="o">=</span>
<span class="mi">0</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">_version</span><span class="o">=</span><span class="s2">&quot;1.3 2011May10&quot;</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">_typename</span><span class="o">=</span><span class="s2">&quot;JSIO.TextDecoder.Utf16&quot;</span><span class="p">;</span><span class="k">return</span> <span class="k">this</span><span class="p">};</span><span class="nx">c</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">readChar</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">byteReader</span><span class="p">.</span><span class="nx">readByte</span><span class="p">();</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">)</span><span class="k">return</span> <span class="kc">null</span><span class="p">;</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">byteReader</span><span class="p">.</span><span class="nx">readByte</span><span class="p">();</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">)</span><span class="k">throw</span> <span class="nx">b</span><span class="o">=</span><span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;Incomplete UTF16 character&quot;</span><span class="p">),</span><span class="nx">b</span><span class="p">.</span><span class="nx">source</span><span class="o">=</span><span class="s2">&quot;JSIO.TextDecoder.Utf16.readChar()&quot;</span><span class="p">,</span><span class="nx">b</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">bomState</span><span class="o">===</span><span class="mi">0</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="o">+</span><span class="nx">a</span><span class="o">==</span><span class="mi">509</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">bomState</span><span class="o">=</span><span class="nx">a</span><span class="o">==</span><span class="mi">254</span><span class="o">?</span><span class="mi">1</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span><span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">byteReader</span><span class="p">.</span><span class="nx">readByte</span><span class="p">();</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">)</span><span class="k">return</span> <span class="kc">null</span><span class="p">;</span><span class="nx">a</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">byteReader</span><span class="p">.</span><span class="nx">readByte</span><span class="p">();</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">)</span><span class="k">throw</span> <span class="nx">b</span><span class="o">=</span><span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;Incomplete UTF16 character&quot;</span><span class="p">),</span><span class="nx">b</span><span class="p">.</span><span class="nx">source</span><span class="o">=</span><span class="s2">&quot;JSIO.TextDecoder.Utf16.readChar()&quot;</span><span class="p">,</span>
<span class="nx">b</span><span class="p">;}</span><span class="k">else</span> <span class="k">this</span><span class="p">.</span><span class="nx">bomState</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="k">return</span> <span class="nb">String</span><span class="p">.</span><span class="nx">fromCharCode</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">bomState</span><span class="o">==</span><span class="mi">1</span><span class="o">?</span><span class="nx">a</span><span class="o">&lt;&lt;</span><span class="mi">8</span><span class="o">|</span><span class="nx">b</span><span class="o">:</span><span class="nx">b</span><span class="o">&lt;&lt;</span><span class="mi">8</span><span class="o">|</span><span class="nx">a</span><span class="p">)};</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="k">this</span> <span class="k">instanceof</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">callee</span><span class="p">)){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;you must use new to instantiate this class&quot;</span><span class="p">);</span><span class="nx">a</span><span class="p">.</span><span class="nx">source</span><span class="o">=</span><span class="s2">&quot;JSIO.TextDecoder.Utf8.ctor&quot;</span><span class="p">;</span><span class="k">throw</span> <span class="nx">a</span><span class="p">;}</span><span class="k">this</span><span class="p">.</span><span class="nx">byteReader</span><span class="o">=</span><span class="nx">b</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">waitBom</span><span class="o">=!</span><span class="mi">0</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">strict</span><span class="o">=!</span><span class="mi">1</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">pendingChar</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">_version</span><span class="o">=</span><span class="s2">&quot;1.3 2011May10&quot;</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">_typename</span><span class="o">=</span><span class="s2">&quot;JSIO.TextDecoder.Utf8&quot;</span><span class="p">;</span><span class="k">return</span> <span class="k">this</span><span class="p">};</span><span class="nx">e</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">readChar</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span><span class="k">do</span><span class="p">{</span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">pendingChar</span><span class="o">!==</span><span class="kc">null</span><span class="p">)</span><span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">pendingChar</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">pendingChar</span><span class="o">=</span>
<span class="kc">null</span><span class="p">;</span><span class="k">else</span><span class="p">{</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">byteReader</span><span class="p">.</span><span class="nx">readByte</span><span class="p">();</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="o">===</span><span class="kc">null</span><span class="p">)</span><span class="k">return</span> <span class="kc">null</span><span class="p">;</span><span class="k">if</span><span class="p">((</span><span class="nx">a</span><span class="o">&amp;</span><span class="mi">128</span><span class="p">)</span><span class="o">===</span><span class="mi">0</span><span class="p">)</span><span class="nx">b</span><span class="o">=</span><span class="nb">String</span><span class="p">.</span><span class="nx">fromCharCode</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span><span class="k">else</span><span class="p">{</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="mi">192</span><span class="p">,</span><span class="nx">b</span><span class="o">=</span><span class="mi">5</span><span class="p">;</span><span class="k">do</span><span class="p">{</span><span class="k">if</span><span class="p">((</span><span class="nx">a</span><span class="o">&amp;</span><span class="p">(</span><span class="nx">e</span><span class="o">&gt;&gt;</span><span class="mi">1</span><span class="o">|</span><span class="mi">128</span><span class="p">))</span><span class="o">==</span><span class="nx">e</span><span class="p">)</span><span class="k">break</span><span class="p">;</span><span class="nx">e</span><span class="o">=</span><span class="nx">e</span><span class="o">&gt;&gt;</span><span class="mi">1</span><span class="o">|</span><span class="mi">128</span><span class="p">;</span><span class="o">--</span><span class="nx">b</span><span class="p">}</span><span class="k">while</span><span class="p">(</span><span class="nx">b</span><span class="o">&gt;=</span><span class="mi">0</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">){</span><span class="nx">a</span><span class="o">&amp;=</span><span class="p">(</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="nx">b</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="nx">e</span><span class="o">=</span><span class="mi">5</span><span class="p">;</span><span class="nx">e</span><span class="o">&gt;=</span><span class="nx">b</span><span class="p">;</span><span class="o">--</span><span class="nx">e</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">byteReader</span><span class="p">.</span><span class="nx">readByte</span><span class="p">();</span><span class="k">if</span><span class="p">((</span><span class="nx">c</span><span class="o">&amp;</span><span class="mi">192</span><span class="p">)</span><span class="o">!=</span><span class="mi">128</span><span class="p">)</span><span class="k">throw</span> <span class="nx">b</span><span class="o">=</span><span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;Invalid sequence character&quot;</span><span class="p">),</span><span class="nx">b</span><span class="p">.</span><span class="nx">source</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">_typename</span><span class="o">+</span><span class="s2">&quot;.readChar&quot;</span><span class="p">,</span><span class="nx">b</span><span class="p">;</span><span class="nx">a</span><span class="o">=</span><span class="nx">a</span><span class="o">&lt;&lt;</span><span class="mi">6</span><span class="o">|</span><span class="nx">c</span><span class="o">&amp;</span><span class="mi">63</span><span class="p">}</span><span class="nx">a</span><span class="o">&lt;=</span><span class="mi">65535</span><span class="o">?</span><span class="nx">b</span><span class="o">=</span><span class="nx">a</span><span class="o">==</span><span class="mi">65279</span><span class="o">&amp;&amp;</span><span class="k">this</span><span class="p">.</span><span class="nx">waitBom</span><span class="o">?</span><span class="kc">null</span><span class="o">:</span><span class="nb">String</span><span class="p">.</span><span class="nx">fromCharCode</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">:</span><span class="p">(</span><span class="nx">b</span><span class="o">=</span><span class="nx">a</span><span class="o">-</span><span class="mi">65536</span><span class="p">,</span><span class="nx">a</span><span class="o">=</span><span class="mi">55296</span><span class="o">|</span><span class="nx">b</span><span class="o">&gt;&gt;</span><span class="mi">10</span><span class="o">&amp;</span><span class="mi">1023</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">pendingChar</span><span class="o">=</span><span class="nb">String</span><span class="p">.</span><span class="nx">fromCharCode</span><span class="p">(</span><span class="mi">56320</span><span class="o">|</span><span class="nx">b</span><span class="o">&amp;</span>
<span class="mi">1023</span><span class="p">),</span><span class="nx">b</span><span class="o">=</span><span class="nb">String</span><span class="p">.</span><span class="nx">fromCharCode</span><span class="p">(</span><span class="nx">a</span><span class="p">))}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">strict</span><span class="p">)</span><span class="k">throw</span> <span class="nx">b</span><span class="o">=</span><span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;Invalid character&quot;</span><span class="p">),</span><span class="nx">b</span><span class="p">.</span><span class="nx">source</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">_typename</span><span class="o">+</span><span class="s2">&quot;.readChar&quot;</span><span class="p">,</span><span class="nx">b</span><span class="p">;</span><span class="k">else</span> <span class="nx">b</span><span class="o">=</span><span class="nb">String</span><span class="p">.</span><span class="nx">fromCharCode</span><span class="p">(</span><span class="nx">a</span><span class="p">)}}</span><span class="k">this</span><span class="p">.</span><span class="nx">waitBom</span><span class="o">=!</span><span class="mi">1</span><span class="p">}</span><span class="k">while</span><span class="p">(</span><span class="nx">b</span><span class="o">===</span><span class="kc">null</span><span class="p">);</span><span class="k">return</span> <span class="nx">b</span><span class="p">};</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">TextDecoder</span><span class="o">=</span><span class="p">{</span><span class="nx">Default</span><span class="o">:</span><span class="nx">d</span><span class="p">,</span><span class="nx">Utf16</span><span class="o">:</span><span class="nx">c</span><span class="p">,</span><span class="nx">Utf8</span><span class="o">:</span><span class="nx">e</span><span class="p">}})();</span>
<span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">JSIO</span><span class="p">.</span><span class="nx">TextDecoder</span><span class="p">.</span><span class="nx">Utf8</span><span class="o">!==</span><span class="s2">&quot;function&quot;</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;This class requires JSIO.TextDecoder.js&quot;</span><span class="p">);</span><span class="nx">d</span><span class="p">.</span><span class="nx">source</span><span class="o">=</span><span class="s2">&quot;JSIO.TextReader.js&quot;</span><span class="p">;</span><span class="k">throw</span> <span class="nx">d</span><span class="p">;}</span><span class="nx">d</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">c</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="k">this</span> <span class="k">instanceof</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">callee</span><span class="p">)){</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;you must use new to instantiate this class&quot;</span><span class="p">);</span><span class="nx">e</span><span class="p">.</span><span class="nx">source</span><span class="o">=</span><span class="s2">&quot;JSIO.TextReader.ctor&quot;</span><span class="p">;</span><span class="k">throw</span> <span class="nx">e</span><span class="p">;}</span><span class="k">this</span><span class="p">.</span><span class="nx">decoder</span><span class="o">=</span><span class="nx">c</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">_version</span><span class="o">=</span><span class="s2">&quot;1.3 2011May10&quot;</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">_typename</span><span class="o">=</span><span class="s2">&quot;JSIO.TextReader&quot;</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">unreads</span><span class="o">=</span><span class="p">[]};</span><span class="nx">d</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">readChar</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">unreads</span><span class="p">.</span><span class="nx">length</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">?</span><span class="k">this</span><span class="p">.</span><span class="nx">unreads</span><span class="p">.</span><span class="nx">pop</span><span class="p">()</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">decoder</span><span class="p">.</span><span class="nx">readChar</span><span class="p">()};</span>
<span class="nx">d</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">read</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">c</span><span class="p">){</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="nx">vari</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">c</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">readChar</span><span class="p">();</span><span class="nx">b</span><span class="o">!==</span><span class="kc">null</span><span class="o">?</span><span class="nx">e</span><span class="o">+=</span><span class="nx">b</span><span class="o">:</span><span class="nx">i</span><span class="o">=</span><span class="nx">c</span><span class="p">}</span><span class="k">return</span> <span class="nx">e</span><span class="p">};</span><span class="nx">d</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">unreadChar</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">c</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">unreads</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">c</span><span class="p">)};</span><span class="nx">d</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">readToEnd</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">b</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">a</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">readChar</span><span class="p">();</span><span class="nx">a</span><span class="o">!==</span><span class="kc">null</span><span class="p">;)</span><span class="nx">e</span><span class="o">+=</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="o">++</span><span class="p">,</span><span class="nx">b</span><span class="o">&gt;=</span><span class="mi">1024</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">c</span><span class="o">+=</span><span class="nx">e</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">b</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span><span class="nx">a</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">readChar</span><span class="p">();</span><span class="k">return</span> <span class="nx">c</span><span class="o">+</span><span class="nx">e</span><span class="p">};</span><span class="nx">d</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">beginReadToEnd</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">c</span><span class="p">){</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">b</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">a</span><span class="o">=</span><span class="k">this</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">m</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">g</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">readChar</span><span class="p">();</span><span class="nx">g</span><span class="o">!==</span><span class="kc">null</span><span class="p">;){</span><span class="nx">b</span><span class="o">+=</span><span class="nx">g</span><span class="p">;</span><span class="nx">m</span><span class="o">++</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">m</span><span class="o">&gt;=</span><span class="mi">1024</span><span class="p">){</span><span class="nx">e</span><span class="o">+=</span><span class="nx">b</span><span class="p">;</span><span class="nx">b</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">;</span><span class="k">break</span><span class="p">}</span><span class="nx">g</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">readChar</span><span class="p">()}</span><span class="nx">g</span><span class="o">!==</span><span class="kc">null</span><span class="o">?</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="o">:</span><span class="nx">c</span><span class="p">(</span><span class="nx">e</span><span class="o">+</span>
<span class="nx">b</span><span class="p">)};</span><span class="nx">d</span><span class="p">();</span><span class="k">return</span> <span class="kc">null</span><span class="p">};</span><span class="nx">d</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">readLine</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">readChar</span><span class="p">();</span><span class="k">if</span><span class="p">(</span><span class="nx">e</span><span class="o">===</span><span class="kc">null</span><span class="p">)</span><span class="k">return</span> <span class="kc">null</span><span class="p">;</span><span class="k">for</span><span class="p">(;</span><span class="nx">e</span><span class="o">!=</span><span class="s2">&quot;\r&quot;</span><span class="o">&amp;&amp;</span><span class="nx">e</span><span class="o">!=</span><span class="s2">&quot;\n&quot;</span><span class="p">;)</span><span class="k">if</span><span class="p">(</span><span class="nx">c</span><span class="o">+=</span><span class="nx">e</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">readChar</span><span class="p">(),</span><span class="nx">e</span><span class="o">===</span><span class="kc">null</span><span class="p">)</span><span class="k">return</span> <span class="nx">c</span><span class="p">;</span><span class="nx">e</span><span class="o">==</span><span class="s2">&quot;\r&quot;</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">e</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">readChar</span><span class="p">(),</span><span class="nx">e</span><span class="o">!==</span><span class="kc">null</span><span class="o">&amp;&amp;</span><span class="nx">e</span><span class="o">!=</span><span class="s2">&quot;\n&quot;</span><span class="o">&amp;&amp;</span><span class="k">this</span><span class="p">.</span><span class="nx">unreadChar</span><span class="p">(</span><span class="nx">e</span><span class="p">));</span><span class="k">return</span> <span class="nx">c</span><span class="p">};</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">TextReader</span><span class="o">=</span><span class="nx">d</span><span class="p">})();</span>
<span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">JSIO</span><span class="p">.</span><span class="nx">_ByteReaderBase</span><span class="o">!==</span><span class="s2">&quot;function&quot;</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;This extension requires JSIO.BasicByteReaders.js&quot;</span><span class="p">);</span><span class="nx">d</span><span class="p">.</span><span class="nx">source</span><span class="o">=</span><span class="s2">&quot;JSIO.Crc32.js&quot;</span><span class="p">;</span><span class="k">throw</span> <span class="nx">d</span><span class="p">;}</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">crc32Table</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">crc32Polynomial</span><span class="o">=</span><span class="mi">3988292384</span><span class="p">;</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">crc32Table</span><span class="p">){</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">crc32Table</span><span class="o">=</span><span class="nb">Array</span><span class="p">(</span><span class="mi">256</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">b</span><span class="o">&lt;</span><span class="mi">256</span><span class="p">;</span><span class="nx">b</span><span class="o">++</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="nx">b</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">e</span><span class="o">&lt;</span><span class="mi">8</span><span class="p">;</span><span class="nx">e</span><span class="o">++</span><span class="p">)</span><span class="nx">a</span><span class="o">&amp;</span><span class="mi">1</span><span class="o">?</span><span class="nx">a</span><span class="o">=</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">crc32Polynomial</span><span class="o">^</span><span class="nx">a</span><span class="o">&gt;&gt;&gt;</span><span class="mi">1</span><span class="o">:</span><span class="nx">a</span><span class="o">&gt;&gt;&gt;=</span><span class="mi">1</span><span class="p">;</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">crc32Table</span><span class="p">[</span><span class="nx">b</span><span class="p">]</span><span class="o">=</span><span class="nx">a</span><span class="p">}}};</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">computeCrc32</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="nx">c</span><span class="p">();</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="mi">4294967295</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">b</span><span class="o">==</span><span class="s2">&quot;object&quot;</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">d</span><span class="o">&lt;</span><span class="nx">e</span><span class="p">;</span><span class="nx">d</span><span class="o">++</span><span class="p">)</span><span class="nx">a</span><span class="o">=</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">crc32Table</span><span class="p">[</span><span class="nx">a</span><span class="o">&amp;</span>
<span class="mi">255</span><span class="o">^</span><span class="nx">b</span><span class="p">[</span><span class="nx">d</span><span class="p">]]</span><span class="o">^</span><span class="nx">a</span><span class="o">&gt;&gt;&gt;</span><span class="mi">8</span><span class="p">;</span><span class="k">else</span> <span class="k">for</span><span class="p">(</span><span class="nx">d</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">d</span><span class="o">&lt;</span><span class="nx">e</span><span class="p">;</span><span class="nx">d</span><span class="o">++</span><span class="p">)</span><span class="nx">a</span><span class="o">=</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">crc32Table</span><span class="p">[</span><span class="nx">a</span><span class="o">&amp;</span><span class="mi">255</span><span class="o">^</span><span class="nx">b</span><span class="p">.</span><span class="nx">charCodeAt</span><span class="p">(</span><span class="nx">d</span><span class="p">)]</span><span class="o">^</span><span class="nx">a</span><span class="o">&gt;&gt;&gt;</span><span class="mi">8</span><span class="p">;</span><span class="nx">a</span><span class="o">^=</span><span class="mi">4294967295</span><span class="p">;</span><span class="nx">a</span><span class="o">&lt;</span><span class="mi">0</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">a</span><span class="o">+=</span><span class="mi">4294967296</span><span class="p">);</span><span class="k">return</span> <span class="nx">a</span><span class="p">};</span><span class="nx">d</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="k">this</span> <span class="k">instanceof</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">callee</span><span class="p">)){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;you must use new to instantiate this class&quot;</span><span class="p">);</span><span class="nx">b</span><span class="p">.</span><span class="nx">source</span><span class="o">=</span><span class="s2">&quot;JSIO.Crc32.ctor&quot;</span><span class="p">;</span><span class="k">throw</span> <span class="nx">b</span><span class="p">;}</span><span class="nx">c</span><span class="p">();</span><span class="k">this</span><span class="p">.</span><span class="nx">_typename</span><span class="o">=</span><span class="s2">&quot;JSIO.Crc32&quot;</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">_version</span><span class="o">=</span><span class="s2">&quot;1.3 2011May10&quot;</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">_runningCrc32</span><span class="o">=</span><span class="mi">4294967295</span><span class="p">};</span><span class="nx">d</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slurpByte</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">_runningCrc32</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">_runningCrc32</span><span class="o">=</span><span class="nx">a</span><span class="o">&gt;&gt;&gt;</span><span class="mi">8</span><span class="o">^</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">crc32Table</span><span class="p">[</span><span class="nx">b</span><span class="o">^</span><span class="nx">a</span><span class="o">&amp;</span><span class="mi">255</span><span class="p">]};</span><span class="nx">d</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">result</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span>
<span class="k">this</span><span class="p">.</span><span class="nx">_runningCrc32</span><span class="o">^</span><span class="mi">4294967295</span><span class="p">;</span><span class="nx">b</span><span class="o">&lt;</span><span class="mi">0</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">b</span><span class="o">+=</span><span class="mi">4294967296</span><span class="p">);</span><span class="k">return</span> <span class="nx">b</span><span class="p">};</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="k">this</span> <span class="k">instanceof</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">callee</span><span class="p">)){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;you must use new to instantiate this class&quot;</span><span class="p">);</span><span class="nx">a</span><span class="p">.</span><span class="nx">source</span><span class="o">=</span><span class="s2">&quot;JSIO.Crc32Reader.ctor&quot;</span><span class="p">;</span><span class="k">throw</span> <span class="nx">a</span><span class="p">;}</span><span class="k">this</span><span class="p">.</span><span class="nx">_byteReader</span><span class="o">=</span><span class="nx">b</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">_typename</span><span class="o">=</span><span class="s2">&quot;JSIO.Crc32Reader&quot;</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">_version</span><span class="o">=</span><span class="s2">&quot;1.3 2011May10&quot;</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">_crc32</span><span class="o">=</span><span class="k">new</span> <span class="nx">JSIO</span><span class="p">.</span><span class="nx">Crc32</span><span class="p">};</span><span class="nx">e</span><span class="p">.</span><span class="nx">prototype</span><span class="o">=</span><span class="k">new</span> <span class="nx">JSIO</span><span class="p">.</span><span class="nx">_ByteReaderBase</span><span class="p">;</span><span class="nx">e</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">readByte</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">_byteReader</span><span class="p">.</span><span class="nx">readByte</span><span class="p">();</span><span class="nx">b</span><span class="o">!==</span><span class="kc">null</span><span class="o">&amp;&amp;</span><span class="k">this</span><span class="p">.</span><span class="nx">_crc32</span><span class="p">.</span><span class="nx">slurpByte</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span><span class="k">return</span> <span class="nx">b</span><span class="p">};</span><span class="nx">e</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">crc32</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_crc32</span><span class="p">.</span><span class="nx">result</span><span class="p">()};</span>
<span class="nx">JSIO</span><span class="p">.</span><span class="nx">Crc32</span><span class="o">=</span><span class="nx">d</span><span class="p">;</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">Crc32Reader</span><span class="o">=</span><span class="nx">e</span><span class="p">})();</span>
<span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">JSIO</span><span class="p">.</span><span class="nx">_ByteReaderBase</span><span class="o">!==</span><span class="s2">&quot;function&quot;</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;This class requires JSIO.BasicByteReaders.js&quot;</span><span class="p">);</span><span class="nx">d</span><span class="p">.</span><span class="nx">source</span><span class="o">=</span><span class="s2">&quot;JSIO.InflatingReader.js&quot;</span><span class="p">;</span><span class="k">throw</span> <span class="nx">d</span><span class="p">;}</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="k">this</span> <span class="k">instanceof</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">callee</span><span class="p">)){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;you must use new to instantiate this class&quot;</span><span class="p">);</span><span class="nx">a</span><span class="p">.</span><span class="nx">source</span><span class="o">=</span><span class="s2">&quot;InflatingReader._InternalBitReader.ctor&quot;</span><span class="p">;</span><span class="k">throw</span> <span class="nx">a</span><span class="p">;}</span><span class="k">this</span><span class="p">.</span><span class="nx">bits</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">bitsLength</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">byteReader</span><span class="o">=</span><span class="nx">b</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">_typeName</span><span class="o">=</span><span class="s2">&quot;JSIO.InflatingReader._InternalBitReader&quot;</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">_version</span><span class="o">=</span><span class="s2">&quot;1.3 2011May10&quot;</span><span class="p">};</span><span class="nx">c</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">readBit</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">bitsLength</span><span class="o">===</span>
<span class="mi">0</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">byteReader</span><span class="p">.</span><span class="nx">readByte</span><span class="p">();</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="o">===</span><span class="kc">null</span><span class="p">)</span><span class="k">throw</span> <span class="nx">b</span><span class="o">=</span><span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;Unexpected end of stream&quot;</span><span class="p">),</span><span class="nx">b</span><span class="p">.</span><span class="nx">source</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">_typeName</span><span class="o">+</span><span class="s2">&quot;.readBit&quot;</span><span class="p">,</span><span class="nx">b</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">bits</span><span class="o">=</span><span class="nx">b</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">bitsLength</span><span class="o">=</span><span class="mi">8</span><span class="p">}</span><span class="nx">b</span><span class="o">=</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">bits</span><span class="o">&amp;</span><span class="mi">1</span><span class="p">)</span><span class="o">!==</span><span class="mi">0</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">bits</span><span class="o">&gt;&gt;=</span><span class="mi">1</span><span class="p">;</span><span class="o">--</span><span class="k">this</span><span class="p">.</span><span class="nx">bitsLength</span><span class="p">;</span><span class="k">return</span> <span class="nx">b</span><span class="p">};</span><span class="nx">c</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">align</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">bitsLength</span><span class="o">=</span><span class="mi">0</span><span class="p">};</span><span class="nx">c</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">readLSB</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">e</span><span class="o">&lt;</span><span class="nx">b</span><span class="p">;</span><span class="o">++</span><span class="nx">e</span><span class="p">)</span><span class="k">this</span><span class="p">.</span><span class="nx">readBit</span><span class="p">()</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">a</span><span class="o">|=</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="nx">e</span><span class="p">);</span><span class="k">return</span> <span class="nx">a</span><span class="p">};</span><span class="nx">c</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">readMSB</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">e</span><span class="o">&lt;</span><span class="nx">b</span><span class="p">;</span><span class="o">++</span><span class="nx">e</span><span class="p">)</span><span class="k">this</span><span class="p">.</span><span class="nx">readBit</span><span class="p">()</span><span class="o">?</span><span class="nx">a</span><span class="o">=</span><span class="nx">a</span><span class="o">&lt;&lt;</span><span class="mi">1</span><span class="o">|</span><span class="mi">1</span><span class="o">:</span><span class="nx">a</span><span class="o">&lt;&lt;=</span><span class="mi">1</span><span class="p">;</span><span class="k">return</span> <span class="nx">a</span><span class="p">};</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="k">this</span> <span class="k">instanceof</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">callee</span><span class="p">)){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span>
<span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;you must use new to instantiate this class&quot;</span><span class="p">);</span><span class="nx">a</span><span class="p">.</span><span class="nx">source</span><span class="o">=</span><span class="s2">&quot;JSIO.InflatingReader.ctor&quot;</span><span class="p">;</span><span class="k">throw</span> <span class="nx">a</span><span class="p">;}</span><span class="k">this</span><span class="p">.</span><span class="nx">_byteReader</span><span class="o">=</span><span class="nx">b</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">_bitReader</span><span class="o">=</span><span class="k">new</span> <span class="nx">c</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span><span class="k">this</span><span class="p">.</span><span class="nx">_buffer</span><span class="o">=</span><span class="p">[];</span><span class="k">this</span><span class="p">.</span><span class="nx">_state</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">_bufferPosition</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">_blockFinal</span><span class="o">=!</span><span class="mi">1</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">_typeName</span><span class="o">=</span><span class="s2">&quot;JSIO.InflatingReader&quot;</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">_version</span><span class="o">=</span><span class="s2">&quot;1.3 2011May10&quot;</span><span class="p">;</span><span class="k">return</span> <span class="k">this</span><span class="p">},</span><span class="nx">e</span><span class="o">=</span><span class="kc">null</span><span class="p">,</span><span class="nx">b</span><span class="o">=</span><span class="kc">null</span><span class="p">,</span><span class="nx">a</span><span class="o">=</span><span class="p">[</span><span class="mi">16</span><span class="p">,</span><span class="mi">17</span><span class="p">,</span><span class="mi">18</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">13</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">14</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">15</span><span class="p">],</span><span class="nx">o</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="nb">Array</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="p">),</span><span class="nx">c</span><span class="o">=</span><span class="nx">b</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="nx">a</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="nx">a</span><span class="o">&lt;</span><span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">a</span><span class="o">++</span><span class="p">)</span><span class="nx">c</span><span class="o">&lt;</span><span class="nx">b</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">c</span><span class="o">=</span><span class="nx">b</span><span class="p">[</span><span class="nx">a</span><span class="p">]);</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nb">Array</span><span class="p">(</span><span class="nx">c</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span><span class="nx">a</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">a</span><span class="o">&lt;=</span><span class="nx">c</span><span class="p">;</span><span class="nx">a</span><span class="o">++</span><span class="p">)</span><span class="nx">d</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="nx">a</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">a</span><span class="o">&lt;</span><span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">a</span><span class="o">++</span><span class="p">)</span><span class="o">++</span><span class="nx">d</span><span class="p">[</span><span class="nx">b</span><span class="p">[</span><span class="nx">a</span><span class="p">]];</span>
<span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="nb">Array</span><span class="p">(</span><span class="nx">c</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span><span class="nx">a</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">d</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">j</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="nx">j</span><span class="o">&lt;=</span><span class="nx">c</span><span class="p">;</span><span class="nx">j</span><span class="o">++</span><span class="p">)</span><span class="nx">a</span><span class="o">=</span><span class="nx">a</span><span class="o">+</span><span class="nx">d</span><span class="p">[</span><span class="nx">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">&lt;&lt;</span><span class="mi">1</span><span class="p">,</span><span class="nx">f</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span><span class="o">=</span><span class="nx">a</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="nx">a</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">a</span><span class="o">&lt;</span><span class="nx">e</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">a</span><span class="o">++</span><span class="p">)</span><span class="nx">c</span><span class="o">=</span><span class="nx">b</span><span class="p">[</span><span class="nx">a</span><span class="p">],</span><span class="nx">c</span><span class="o">!==</span><span class="mi">0</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">e</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="o">=</span><span class="nx">f</span><span class="p">[</span><span class="nx">c</span><span class="p">],</span><span class="nx">f</span><span class="p">[</span><span class="nx">c</span><span class="p">]</span><span class="o">++</span><span class="p">);</span><span class="k">return</span> <span class="nx">e</span><span class="p">},</span><span class="nx">m</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="p">[],</span><span class="nx">c</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">c</span><span class="o">&lt;</span><span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">c</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">c</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="p">{};</span><span class="nx">d</span><span class="p">.</span><span class="nx">bits</span><span class="o">=</span><span class="nx">b</span><span class="p">[</span><span class="nx">c</span><span class="p">];</span><span class="nx">d</span><span class="p">.</span><span class="nx">length</span><span class="o">=</span><span class="nx">a</span><span class="p">[</span><span class="nx">c</span><span class="p">];</span><span class="nx">d</span><span class="p">.</span><span class="nx">index</span><span class="o">=</span><span class="nx">c</span><span class="p">;</span><span class="nx">e</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">d</span><span class="p">)}</span><span class="k">return</span> <span class="nx">g</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)},</span><span class="nx">g</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="o">===</span><span class="mi">0</span><span class="p">)</span><span class="k">return</span> <span class="kc">null</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="p">[],</span><span class="nx">d</span><span class="o">=</span><span class="p">[],</span><span class="nx">f</span><span class="o">=</span><span class="p">{</span><span class="nx">isLeaf</span><span class="o">:!</span><span class="mi">1</span><span class="p">},</span><span class="nx">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">j</span><span class="o">&lt;</span><span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">j</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="p">[</span><span class="nx">j</span><span class="p">].</span><span class="nx">length</span><span class="o">==</span><span class="nx">e</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">[</span><span class="nx">j</span><span class="p">].</span><span class="nx">bits</span><span class="o">==</span><span class="nx">a</span><span class="p">){</span><span class="nx">f</span><span class="p">.</span><span class="nx">isLeaf</span><span class="o">=!</span><span class="mi">0</span><span class="p">;</span><span class="nx">f</span><span class="p">.</span><span class="nx">index</span><span class="o">=</span><span class="nx">b</span><span class="p">[</span><span class="nx">j</span><span class="p">].</span><span class="nx">index</span><span class="p">;</span><span class="k">break</span><span class="p">}</span><span class="k">else</span><span class="p">(</span><span class="nx">b</span><span class="p">[</span><span class="nx">j</span><span class="p">].</span><span class="nx">bits</span><span class="o">&gt;&gt;</span><span class="nx">b</span><span class="p">[</span><span class="nx">j</span><span class="p">].</span><span class="nx">length</span><span class="o">-</span><span class="nx">e</span><span class="o">-</span><span class="mi">1</span><span class="o">&amp;</span><span class="mi">1</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">?</span><span class="nx">d</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">b</span><span class="p">[</span><span class="nx">j</span><span class="p">])</span><span class="o">:</span><span class="nx">c</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">b</span><span class="p">[</span><span class="nx">j</span><span class="p">]);</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">f</span><span class="p">.</span><span class="nx">isLeaf</span><span class="p">)</span><span class="nx">f</span><span class="p">.</span><span class="nx">zero</span><span class="o">=</span>
<span class="nx">g</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">a</span><span class="o">&lt;&lt;</span><span class="mi">1</span><span class="p">,</span><span class="nx">e</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span><span class="nx">f</span><span class="p">.</span><span class="nx">one</span><span class="o">=</span><span class="nx">g</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">a</span><span class="o">&lt;&lt;</span><span class="mi">1</span><span class="o">|</span><span class="mi">1</span><span class="p">,</span><span class="nx">e</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span><span class="k">return</span> <span class="nx">f</span><span class="p">},</span><span class="nx">f</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="mi">13</span><span class="p">,</span><span class="mi">15</span><span class="p">,</span><span class="mi">17</span><span class="p">,</span><span class="mi">19</span><span class="p">,</span><span class="mi">23</span><span class="p">,</span><span class="mi">27</span><span class="p">,</span><span class="mi">31</span><span class="p">,</span><span class="mi">35</span><span class="p">,</span><span class="mi">43</span><span class="p">,</span><span class="mi">51</span><span class="p">,</span><span class="mi">59</span><span class="p">,</span><span class="mi">67</span><span class="p">,</span><span class="mi">83</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">115</span><span class="p">,</span><span class="mi">131</span><span class="p">,</span><span class="mi">163</span><span class="p">,</span><span class="mi">195</span><span class="p">,</span><span class="mi">227</span><span class="p">,</span><span class="mi">258</span><span class="p">],</span><span class="nx">q</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span><span class="nx">j</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">13</span><span class="p">,</span><span class="mi">17</span><span class="p">,</span><span class="mi">25</span><span class="p">,</span><span class="mi">33</span><span class="p">,</span><span class="mi">49</span><span class="p">,</span><span class="mi">65</span><span class="p">,</span><span class="mi">97</span><span class="p">,</span><span class="mi">129</span><span class="p">,</span><span class="mi">193</span><span class="p">,</span><span class="mi">257</span><span class="p">,</span><span class="mi">385</span><span class="p">,</span><span class="mi">513</span><span class="p">,</span><span class="mi">769</span><span class="p">,</span><span class="mi">1025</span><span class="p">,</span><span class="mi">1537</span><span class="p">,</span><span class="mi">2049</span><span class="p">,</span><span class="mi">3073</span><span class="p">,</span><span class="mi">4097</span><span class="p">,</span><span class="mi">6145</span><span class="p">,</span><span class="mi">8193</span><span class="p">,</span><span class="mi">12289</span><span class="p">,</span><span class="mi">16385</span><span class="p">,</span><span class="mi">24577</span><span class="p">],</span><span class="nx">r</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">13</span><span class="p">,</span><span class="mi">13</span><span class="p">];</span><span class="nx">d</span><span class="p">.</span><span class="nx">prototype</span><span class="o">=</span><span class="k">new</span> <span class="nx">JSIO</span><span class="p">.</span><span class="nx">_ByteReaderBase</span><span class="p">;</span><span class="nx">d</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_decodeItem</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_state</span><span class="o">==</span><span class="mi">2</span><span class="p">)</span><span class="k">return</span> <span class="kc">null</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_state</span><span class="o">===</span>
<span class="mi">0</span><span class="p">)</span><span class="k">switch</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_blockFinal</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">_bitReader</span><span class="p">.</span><span class="nx">readBit</span><span class="p">(),</span><span class="nx">d</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">_bitReader</span><span class="p">.</span><span class="nx">readLSB</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span><span class="nx">d</span><span class="p">){</span><span class="k">case</span> <span class="mi">0</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">_bitReader</span><span class="p">.</span><span class="nx">align</span><span class="p">();</span><span class="kd">var</span> <span class="nx">k</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">_bitReader</span><span class="p">.</span><span class="nx">readLSB</span><span class="p">(</span><span class="mi">16</span><span class="p">);</span><span class="nx">d</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">_bitReader</span><span class="p">.</span><span class="nx">readLSB</span><span class="p">(</span><span class="mi">16</span><span class="p">);</span><span class="k">if</span><span class="p">((</span><span class="nx">k</span><span class="o">&amp;~</span><span class="nx">d</span><span class="p">)</span><span class="o">!=</span><span class="nx">k</span><span class="p">)</span><span class="k">throw</span> <span class="nx">d</span><span class="o">=</span><span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;Invalid block type 0 length&quot;</span><span class="p">),</span><span class="nx">d</span><span class="p">.</span><span class="nx">source</span><span class="o">=</span><span class="s2">&quot;JSIO.InflatingReader._decodeItem&quot;</span><span class="p">,</span><span class="nx">d</span><span class="p">;</span><span class="nx">d</span><span class="o">=</span><span class="p">{</span><span class="nx">itemType</span><span class="o">:</span><span class="mi">0</span><span class="p">};</span><span class="nx">d</span><span class="p">.</span><span class="nx">array</span><span class="o">=</span><span class="nb">Array</span><span class="p">(</span><span class="nx">k</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="nx">c</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">c</span><span class="o">&lt;</span><span class="nx">k</span><span class="p">;</span><span class="o">++</span><span class="nx">c</span><span class="p">){</span><span class="kd">var</span> <span class="nx">g</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">_byteReader</span><span class="p">.</span><span class="nx">readByte</span><span class="p">();</span><span class="k">if</span><span class="p">(</span><span class="nx">g</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">)</span><span class="k">throw</span> <span class="nx">d</span><span class="o">=</span><span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;Incomplete block&quot;</span><span class="p">),</span><span class="nx">d</span><span class="p">.</span><span class="nx">source</span><span class="o">=</span><span class="s2">&quot;JSIO.InflatingReader._decodeItem&quot;</span><span class="p">,</span><span class="nx">d</span><span class="p">;</span><span class="nx">d</span><span class="p">.</span><span class="nx">array</span><span class="p">[</span><span class="nx">c</span><span class="p">]</span><span class="o">=</span><span class="nx">g</span><span class="p">}</span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_blockFinal</span><span class="p">)</span><span class="k">this</span><span class="p">.</span><span class="nx">_state</span><span class="o">=</span><span class="mi">2</span><span class="p">;</span><span class="k">return</span> <span class="nx">d</span><span class="p">;</span>
<span class="k">case</span> <span class="mi">1</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">_codesTree</span><span class="o">=</span><span class="nx">e</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">_distancesTree</span><span class="o">=</span><span class="nx">b</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">_state</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">case</span> <span class="mi">2</span><span class="o">:</span><span class="nx">c</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">_bitReader</span><span class="p">;</span><span class="nx">d</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">readLSB</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">+</span><span class="mi">257</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">k</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">readLSB</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="nx">l</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">readLSB</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="o">+</span><span class="mi">4</span><span class="p">,</span><span class="nx">g</span><span class="o">=</span><span class="nb">Array</span><span class="p">(</span><span class="mi">19</span><span class="p">),</span><span class="nx">h</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">h</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">h</span><span class="o">&lt;</span><span class="nx">g</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">h</span><span class="p">)</span><span class="nx">g</span><span class="p">[</span><span class="nx">h</span><span class="p">]</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="nx">h</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">h</span><span class="o">&lt;</span><span class="nx">l</span><span class="p">;</span><span class="o">++</span><span class="nx">h</span><span class="p">)</span><span class="nx">g</span><span class="p">[</span><span class="nx">a</span><span class="p">[</span><span class="nx">h</span><span class="p">]]</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">readLSB</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span><span class="nx">l</span><span class="o">=</span><span class="nx">o</span><span class="p">(</span><span class="nx">g</span><span class="p">);</span><span class="nx">l</span><span class="o">=</span><span class="nx">m</span><span class="p">(</span><span class="nx">l</span><span class="p">,</span><span class="nx">g</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="nx">g</span><span class="o">=</span><span class="p">[];</span><span class="nx">g</span><span class="p">.</span><span class="nx">length</span><span class="o">&lt;</span><span class="nx">d</span><span class="o">+</span><span class="nx">k</span><span class="p">;){</span><span class="k">for</span><span class="p">(</span><span class="nx">h</span><span class="o">=</span><span class="nx">l</span><span class="p">;</span><span class="o">!</span><span class="nx">h</span><span class="p">.</span><span class="nx">isLeaf</span><span class="p">;)</span><span class="nx">h</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">readBit</span><span class="p">()</span><span class="o">?</span><span class="nx">h</span><span class="p">.</span><span class="nx">one</span><span class="o">:</span><span class="nx">h</span><span class="p">.</span><span class="nx">zero</span><span class="p">;</span><span class="nx">h</span><span class="o">=</span><span class="nx">h</span><span class="p">.</span><span class="nx">index</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">h</span><span class="o">&lt;=</span><span class="mi">15</span><span class="p">)</span><span class="nx">g</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">h</span><span class="p">);</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">h</span><span class="o">==</span><span class="mi">16</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">h</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">readLSB</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">+</span><span class="mi">3</span><span class="p">,</span><span class="nx">n</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">n</span><span class="o">&lt;</span><span class="nx">h</span><span class="p">;</span><span class="o">++</span><span class="nx">n</span><span class="p">)</span><span class="nx">g</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">g</span><span class="p">[</span><span class="nx">g</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">]);</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">h</span><span class="o">==</span><span class="mi">17</span><span class="p">){</span><span class="nx">h</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">readLSB</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">+</span><span class="mi">3</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="nx">n</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">n</span><span class="o">&lt;</span><span class="nx">h</span><span class="p">;</span><span class="o">++</span><span class="nx">n</span><span class="p">)</span><span class="nx">g</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="mi">0</span><span class="p">)}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">h</span><span class="o">==</span><span class="mi">18</span><span class="p">){</span><span class="nx">h</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">readLSB</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">+</span>
<span class="mi">11</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="nx">n</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">n</span><span class="o">&lt;</span><span class="nx">h</span><span class="p">;</span><span class="o">++</span><span class="nx">n</span><span class="p">)</span><span class="nx">g</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="mi">0</span><span class="p">)}}</span><span class="nx">c</span><span class="o">=</span><span class="nx">g</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nx">d</span><span class="p">);</span><span class="nx">l</span><span class="o">=</span><span class="nx">o</span><span class="p">(</span><span class="nx">c</span><span class="p">);</span><span class="nx">d</span><span class="o">=</span><span class="nx">g</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">d</span><span class="o">+</span><span class="nx">k</span><span class="p">);</span><span class="nx">k</span><span class="o">=</span><span class="nx">o</span><span class="p">(</span><span class="nx">d</span><span class="p">);</span><span class="nx">c</span><span class="o">=</span><span class="nx">m</span><span class="p">(</span><span class="nx">l</span><span class="p">,</span><span class="nx">c</span><span class="p">);</span><span class="nx">d</span><span class="o">=</span><span class="nx">m</span><span class="p">(</span><span class="nx">k</span><span class="p">,</span><span class="nx">d</span><span class="p">);</span><span class="k">this</span><span class="p">.</span><span class="nx">_codesTree</span><span class="o">=</span><span class="nx">c</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">_distancesTree</span><span class="o">=</span><span class="nx">d</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">_state</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">default</span><span class="o">:</span><span class="k">throw</span> <span class="nx">d</span><span class="o">=</span><span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;Invalid block type (&quot;</span><span class="o">+</span><span class="nx">d</span><span class="o">+</span><span class="s2">&quot;)&quot;</span><span class="p">),</span><span class="nx">d</span><span class="p">.</span><span class="nx">source</span><span class="o">=</span><span class="s2">&quot;JSIO.InflatingReader._decodeItem&quot;</span><span class="p">,</span><span class="nx">d</span><span class="p">;}</span><span class="nx">d</span><span class="o">=</span><span class="p">{};</span><span class="k">for</span><span class="p">(</span><span class="nx">c</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">_codesTree</span><span class="p">;</span><span class="o">!</span><span class="nx">c</span><span class="p">.</span><span class="nx">isLeaf</span><span class="p">;)</span><span class="nx">c</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">_bitReader</span><span class="p">.</span><span class="nx">readBit</span><span class="p">()</span><span class="o">?</span><span class="nx">c</span><span class="p">.</span><span class="nx">one</span><span class="o">:</span><span class="nx">c</span><span class="p">.</span><span class="nx">zero</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">index</span><span class="o">&lt;</span><span class="mi">256</span><span class="p">)</span><span class="nx">d</span><span class="p">.</span><span class="nx">itemType</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="nx">d</span><span class="p">.</span><span class="nx">symbol</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">index</span><span class="p">;</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">index</span><span class="o">&gt;</span><span class="mi">256</span><span class="p">){</span><span class="nx">c</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">index</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">c</span><span class="o">&gt;</span><span class="mi">285</span><span class="p">)</span><span class="k">throw</span> <span class="nx">d</span><span class="o">=</span><span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;Invalid length code&quot;</span><span class="p">),</span><span class="nx">d</span><span class="p">.</span><span class="nx">source</span><span class="o">=</span><span class="s2">&quot;JSIO.InflatingReader._decodeItem&quot;</span><span class="p">,</span><span class="nx">d</span><span class="p">;</span><span class="nx">k</span><span class="o">=</span>
<span class="nx">f</span><span class="p">[</span><span class="nx">c</span><span class="o">-</span><span class="mi">257</span><span class="p">];</span><span class="nx">q</span><span class="p">[</span><span class="nx">c</span><span class="o">-</span><span class="mi">257</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">k</span><span class="o">+=</span><span class="k">this</span><span class="p">.</span><span class="nx">_bitReader</span><span class="p">.</span><span class="nx">readLSB</span><span class="p">(</span><span class="nx">q</span><span class="p">[</span><span class="nx">c</span><span class="o">-</span><span class="mi">257</span><span class="p">]));</span><span class="k">for</span><span class="p">(</span><span class="nx">c</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">_distancesTree</span><span class="p">;</span><span class="o">!</span><span class="nx">c</span><span class="p">.</span><span class="nx">isLeaf</span><span class="p">;)</span><span class="nx">c</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">_bitReader</span><span class="p">.</span><span class="nx">readBit</span><span class="p">()</span><span class="o">?</span><span class="nx">c</span><span class="p">.</span><span class="nx">one</span><span class="o">:</span><span class="nx">c</span><span class="p">.</span><span class="nx">zero</span><span class="p">;</span><span class="nx">c</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">index</span><span class="p">;</span><span class="nx">g</span><span class="o">=</span><span class="nx">j</span><span class="p">[</span><span class="nx">c</span><span class="p">];</span><span class="nx">r</span><span class="p">[</span><span class="nx">c</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">g</span><span class="o">+=</span><span class="k">this</span><span class="p">.</span><span class="nx">_bitReader</span><span class="p">.</span><span class="nx">readLSB</span><span class="p">(</span><span class="nx">r</span><span class="p">[</span><span class="nx">c</span><span class="p">]));</span><span class="nx">d</span><span class="p">.</span><span class="nx">itemType</span><span class="o">=</span><span class="mi">3</span><span class="p">;</span><span class="nx">d</span><span class="p">.</span><span class="nx">distance</span><span class="o">=</span><span class="nx">g</span><span class="p">;</span><span class="nx">d</span><span class="p">.</span><span class="nx">length</span><span class="o">=</span><span class="nx">k</span><span class="p">}</span><span class="k">else</span> <span class="nx">d</span><span class="p">.</span><span class="nx">itemType</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">_state</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">_blockFinal</span><span class="o">?</span><span class="mi">2</span><span class="o">:</span><span class="mi">0</span><span class="p">;</span><span class="k">return</span> <span class="nx">d</span><span class="p">};</span><span class="nx">d</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">readByte</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">for</span><span class="p">(;</span><span class="k">this</span><span class="p">.</span><span class="nx">_bufferPosition</span><span class="o">&gt;=</span><span class="k">this</span><span class="p">.</span><span class="nx">_buffer</span><span class="p">.</span><span class="nx">length</span><span class="p">;){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">_decodeItem</span><span class="p">();</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="o">===</span><span class="kc">null</span><span class="p">)</span><span class="k">return</span> <span class="kc">null</span><span class="p">;</span><span class="k">switch</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">itemType</span><span class="p">){</span><span class="k">case</span> <span class="mi">0</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">_buffer</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">_buffer</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">array</span><span class="p">);</span><span class="k">break</span><span class="p">;</span><span class="k">case</span> <span class="mi">2</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">_buffer</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">symbol</span><span class="p">);</span>
<span class="k">break</span><span class="p">;</span><span class="k">case</span> <span class="mi">3</span><span class="o">:</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">_buffer</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="nx">b</span><span class="p">.</span><span class="nx">distance</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">c</span><span class="o">&lt;</span><span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">c</span><span class="o">++</span><span class="p">)</span><span class="k">this</span><span class="p">.</span><span class="nx">_buffer</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_buffer</span><span class="p">[</span><span class="nx">a</span><span class="o">++</span><span class="p">])}}</span><span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">_buffer</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">_bufferPosition</span><span class="o">++</span><span class="p">];</span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_bufferPosition</span><span class="o">&gt;</span><span class="mi">49152</span><span class="p">){</span><span class="nx">a</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">_buffer</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">32768</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="o">&gt;</span><span class="k">this</span><span class="p">.</span><span class="nx">_bufferPosition</span><span class="p">)</span><span class="nx">a</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">_bufferPosition</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">_buffer</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nx">a</span><span class="p">);</span><span class="k">this</span><span class="p">.</span><span class="nx">_bufferPosition</span><span class="o">-=</span><span class="nx">a</span><span class="p">}</span><span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="o">++</span><span class="p">;</span><span class="k">return</span> <span class="nx">b</span><span class="p">};(</span><span class="kd">function</span><span class="p">(){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="nb">Array</span><span class="p">(</span><span class="mi">288</span><span class="p">),</span><span class="nx">c</span><span class="o">=</span><span class="nb">Array</span><span class="p">(</span><span class="mi">288</span><span class="p">),</span><span class="nx">d</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">d</span><span class="o">&lt;=</span><span class="mi">143</span><span class="p">;</span><span class="nx">d</span><span class="o">++</span><span class="p">)</span><span class="nx">a</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span><span class="o">=</span><span class="mi">48</span><span class="o">+</span><span class="nx">d</span><span class="p">,</span><span class="nx">c</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span><span class="o">=</span><span class="mi">8</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="nx">d</span><span class="o">=</span><span class="mi">144</span><span class="p">;</span><span class="nx">d</span><span class="o">&lt;=</span><span class="mi">255</span><span class="p">;</span><span class="nx">d</span><span class="o">++</span><span class="p">)</span><span class="nx">a</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span><span class="o">=</span><span class="mi">400</span><span class="o">+</span><span class="nx">d</span><span class="o">-</span><span class="mi">144</span><span class="p">,</span><span class="nx">c</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span><span class="o">=</span><span class="mi">9</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="nx">d</span><span class="o">=</span><span class="mi">256</span><span class="p">;</span><span class="nx">d</span><span class="o">&lt;=</span><span class="mi">279</span><span class="p">;</span><span class="nx">d</span><span class="o">++</span><span class="p">)</span><span class="nx">a</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span><span class="o">=</span><span class="mi">0</span><span class="o">+</span><span class="nx">d</span><span class="o">-</span><span class="mi">256</span><span class="p">,</span><span class="nx">c</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span><span class="o">=</span><span class="mi">7</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="nx">d</span><span class="o">=</span>
<span class="mi">280</span><span class="p">;</span><span class="nx">d</span><span class="o">&lt;=</span><span class="mi">287</span><span class="p">;</span><span class="nx">d</span><span class="o">++</span><span class="p">)</span><span class="nx">a</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span><span class="o">=</span><span class="mi">192</span><span class="o">+</span><span class="nx">d</span><span class="o">-</span><span class="mi">280</span><span class="p">,</span><span class="nx">c</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span><span class="o">=</span><span class="mi">8</span><span class="p">;</span><span class="nx">e</span><span class="o">=</span><span class="nx">m</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">);</span><span class="nx">a</span><span class="o">=</span><span class="nb">Array</span><span class="p">(</span><span class="mi">32</span><span class="p">);</span><span class="nx">c</span><span class="o">=</span><span class="nb">Array</span><span class="p">(</span><span class="mi">32</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="nx">d</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">d</span><span class="o">&lt;=</span><span class="mi">31</span><span class="p">;</span><span class="nx">d</span><span class="o">++</span><span class="p">)</span><span class="nx">a</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span><span class="o">=</span><span class="nx">d</span><span class="p">,</span><span class="nx">c</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span><span class="o">=</span><span class="mi">5</span><span class="p">;</span><span class="nx">b</span><span class="o">=</span><span class="nx">m</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">)})();</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">InflatingReader</span><span class="o">=</span><span class="nx">d</span><span class="p">})();</span>
<span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="kd">function</span> <span class="nx">d</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">zipfile</span><span class="o">=</span><span class="nx">b</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">_typename</span><span class="o">=</span><span class="s2">&quot;ZipEntry&quot;</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">_version</span><span class="o">=</span><span class="nx">c</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">_crcCalculator</span><span class="o">=</span><span class="kc">null</span><span class="p">}</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="s2">&quot;1.26 2011Aug07&quot;</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">JSIO</span><span class="p">.</span><span class="nx">BinaryUrlStream</span><span class="o">!=</span><span class="s2">&quot;function&quot;</span><span class="p">){</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;This extension requires JSIO.BinaryUrlStream.js v1.3&quot;</span><span class="p">);</span><span class="nx">e</span><span class="p">.</span><span class="nx">source</span><span class="o">=</span><span class="s2">&quot;Zipfile.js&quot;</span><span class="p">;</span><span class="k">throw</span> <span class="nx">e</span><span class="p">;}</span><span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">JSIO</span><span class="p">.</span><span class="nx">TextDecoder</span><span class="o">!==</span><span class="s2">&quot;object&quot;</span><span class="p">)</span><span class="k">throw</span> <span class="nx">e</span><span class="o">=</span><span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;This extension requires JSIO.TextDecoder.js&quot;</span><span class="p">),</span><span class="nx">e</span><span class="p">.</span><span class="nx">source</span><span class="o">=</span><span class="s2">&quot;Zipfile.js&quot;</span><span class="p">,</span><span class="nx">e</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">JSIO</span><span class="p">.</span><span class="nx">TextReader</span><span class="o">!==</span><span class="s2">&quot;function&quot;</span><span class="p">)</span><span class="k">throw</span> <span class="nx">e</span><span class="o">=</span><span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;This extension requires JSIO.TextReader.js&quot;</span><span class="p">),</span><span class="nx">e</span><span class="p">.</span><span class="nx">source</span><span class="o">=</span>
<span class="s2">&quot;Zipfile.js&quot;</span><span class="p">,</span><span class="nx">e</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">JSIO</span><span class="p">.</span><span class="nx">Crc32</span><span class="o">!==</span><span class="s2">&quot;function&quot;</span><span class="p">)</span><span class="k">throw</span> <span class="nx">e</span><span class="o">=</span><span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;This extension requires JSIO.Crc32.js&quot;</span><span class="p">),</span><span class="nx">e</span><span class="p">.</span><span class="nx">source</span><span class="o">=</span><span class="s2">&quot;Zipfile.js&quot;</span><span class="p">,</span><span class="nx">e</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">JSIO</span><span class="p">.</span><span class="nx">InflatingReader</span><span class="o">!==</span><span class="s2">&quot;function&quot;</span><span class="p">)</span><span class="k">throw</span> <span class="nx">e</span><span class="o">=</span><span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;This extension requires JSIO.InflatingReader.js&quot;</span><span class="p">),</span><span class="nx">e</span><span class="p">.</span><span class="nx">source</span><span class="o">=</span><span class="s2">&quot;Zipfile.js&quot;</span><span class="p">,</span><span class="nx">e</span><span class="p">;</span><span class="nx">d</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">extract</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">contentType</span><span class="o">=</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">guessFileType</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="nx">a</span><span class="o">||</span><span class="k">this</span><span class="p">.</span><span class="nx">contentType</span><span class="o">==</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">FileType</span><span class="p">.</span><span class="nx">Text</span><span class="o">||</span><span class="k">this</span><span class="p">.</span><span class="nx">contentType</span><span class="o">==</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">FileType</span><span class="p">.</span><span class="nx">XML</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="k">this</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">compressionMethod</span><span class="o">!==</span><span class="mi">0</span><span class="o">&amp;&amp;</span><span class="k">this</span><span class="p">.</span><span class="nx">compressionMethod</span><span class="o">!=</span><span class="mi">8</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;Unsupported compression method: &quot;</span><span class="o">+</span>
<span class="k">this</span><span class="p">.</span><span class="nx">compressionMethod</span><span class="p">);</span><span class="nx">d</span><span class="p">.</span><span class="nx">source</span><span class="o">=</span><span class="s2">&quot;ZipEntry.extract()&quot;</span><span class="p">;</span><span class="k">throw</span> <span class="nx">d</span><span class="p">;}</span><span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="o">?</span><span class="k">this</span><span class="p">.</span><span class="nx">openTextReader</span><span class="p">()</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">openBinaryReader</span><span class="p">();</span><span class="nx">d</span><span class="p">.</span><span class="nx">zipEntryName</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">b</span><span class="o">!=</span><span class="s2">&quot;function&quot;</span><span class="p">)</span><span class="k">return</span> <span class="nx">d</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">readToEnd</span><span class="p">(),</span><span class="k">this</span><span class="p">.</span><span class="nx">verifyCrc32</span><span class="p">(),</span><span class="nx">d</span><span class="p">;</span><span class="nx">d</span><span class="p">.</span><span class="nx">beginReadToEnd</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">try</span><span class="p">{</span><span class="nx">c</span><span class="p">.</span><span class="nx">verifyCrc32</span><span class="p">(),</span><span class="nx">b</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">a</span><span class="p">)}</span><span class="k">catch</span><span class="p">(</span><span class="nx">d</span><span class="p">){</span><span class="nx">b</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">)}});</span><span class="k">return</span> <span class="kc">null</span><span class="p">};</span><span class="nx">d</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">openBinaryReader</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">new</span> <span class="nx">JSIO</span><span class="p">.</span><span class="nx">StreamSegmentReader</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">zipfile</span><span class="p">.</span><span class="nx">binaryStream</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">offset</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">lengthOfHeader</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">compressedSize</span><span class="p">);</span><span class="k">this</span><span class="p">.</span><span class="nx">compressionMethod</span><span class="o">!==</span><span class="mi">0</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">b</span><span class="o">=</span><span class="k">new</span> <span class="nx">JSIO</span><span class="p">.</span><span class="nx">InflatingReader</span><span class="p">(</span><span class="nx">b</span><span class="p">));</span>
<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_crcCalculator</span><span class="o">=</span><span class="k">new</span> <span class="nx">JSIO</span><span class="p">.</span><span class="nx">Crc32Reader</span><span class="p">(</span><span class="nx">b</span><span class="p">)};</span><span class="nx">d</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">openTextReader</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">openBinaryReader</span><span class="p">(),</span><span class="nx">b</span><span class="o">=</span><span class="nx">b</span><span class="o">||</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">TextDecoder</span><span class="p">.</span><span class="nx">Utf8</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="k">new</span> <span class="nx">b</span><span class="p">;</span><span class="nx">b</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">d</span><span class="p">,[</span><span class="nx">a</span><span class="p">]);</span><span class="nx">b</span><span class="o">=</span><span class="k">new</span> <span class="nx">JSIO</span><span class="p">.</span><span class="nx">TextReader</span><span class="p">(</span><span class="nx">d</span><span class="p">);</span><span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">_parent</span><span class="o">=</span><span class="nx">b</span><span class="p">};</span><span class="nx">d</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">verifyCrc32</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">_crcCalculator</span><span class="p">.</span><span class="nx">crc32</span><span class="p">(),</span><span class="nx">a</span><span class="o">=!</span><span class="mi">1</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">crc32</span><span class="o">!=</span><span class="nx">b</span><span class="o">?</span><span class="k">this</span><span class="p">.</span><span class="nx">zipfile</span><span class="p">.</span><span class="nx">status</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;WARNING: CRC check failed: entry(&quot;</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="o">+</span><span class="s2">&quot;) computed(&quot;</span><span class="o">+</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">decimalToHexString</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="mi">8</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;) expected(&quot;</span><span class="o">+</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">decimalToHexString</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">crc32</span><span class="p">,</span><span class="mi">8</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;) &quot;</span><span class="p">)</span><span class="o">:</span><span class="p">(</span><span class="nx">a</span><span class="o">=!</span><span class="mi">0</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">zipfile</span><span class="p">.</span><span class="nx">verbose</span><span class="o">&gt;</span>
<span class="mi">2</span><span class="o">&amp;&amp;</span><span class="k">this</span><span class="p">.</span><span class="nx">zipfile</span><span class="p">.</span><span class="nx">status</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;INFO: CRC check ok: 0x&quot;</span><span class="o">+</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">decimalToHexString</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">crc32</span><span class="p">,</span><span class="mi">8</span><span class="p">)));</span><span class="k">return</span> <span class="nx">a</span><span class="p">};</span><span class="nx">ZipFile</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="kd">function</span> <span class="nx">m</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">binaryStream</span><span class="p">.</span><span class="nx">getPosition</span><span class="p">(),</span><span class="nx">a</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">binaryStream</span><span class="p">.</span><span class="nx">readNumber</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="o">==</span><span class="nx">ZipFile</span><span class="p">.</span><span class="nx">Signatures</span><span class="p">.</span><span class="nx">DirEntry</span><span class="p">)</span><span class="k">return</span> <span class="nx">f</span><span class="p">.</span><span class="nx">verbose</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">&amp;&amp;</span><span class="nx">f</span><span class="p">.</span><span class="nx">status</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;INFO: at offset 0x&quot;</span><span class="o">+</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">decimalToHexString</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;, found start of Zip Directory.&quot;</span><span class="p">),</span><span class="kc">null</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="o">!=</span><span class="nx">ZipFile</span><span class="p">.</span><span class="nx">Signatures</span><span class="p">.</span><span class="nx">Entry</span><span class="p">)</span><span class="k">return</span> <span class="nx">f</span><span class="p">.</span><span class="nx">status</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;WARNING: at offset 0x&quot;</span><span class="o">+</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">decimalToHexString</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;, found unexpected signature: 0x&quot;</span><span class="o">+</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">decimalToHexString</span><span class="p">(</span><span class="nx">a</span><span class="p">)),</span>
<span class="kc">null</span><span class="p">;</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="k">new</span> <span class="nx">d</span><span class="p">(</span><span class="nx">f</span><span class="p">);</span><span class="nx">c</span><span class="p">.</span><span class="nx">offset</span><span class="o">=</span><span class="nx">b</span><span class="p">;</span><span class="nx">c</span><span class="p">.</span><span class="nx">versionNeeded</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">binaryStream</span><span class="p">.</span><span class="nx">readNumber</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span><span class="nx">c</span><span class="p">.</span><span class="nx">bitField</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">binaryStream</span><span class="p">.</span><span class="nx">readNumber</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span><span class="nx">c</span><span class="p">.</span><span class="nx">compressionMethod</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">binaryStream</span><span class="p">.</span><span class="nx">readNumber</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">binaryStream</span><span class="p">.</span><span class="nx">readNumber</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span><span class="nx">e</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="o">==</span><span class="mi">65535</span><span class="o">||</span><span class="nx">a</span><span class="o">===</span><span class="mi">0</span><span class="p">)</span><span class="nx">e</span><span class="o">=</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="mi">1995</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span><span class="k">else</span><span class="p">{</span><span class="kd">var</span> <span class="nx">g</span><span class="o">=</span><span class="nx">a</span><span class="o">&amp;</span><span class="mi">65535</span><span class="p">,</span><span class="nx">k</span><span class="o">=</span><span class="p">(</span><span class="nx">a</span><span class="o">&amp;</span><span class="mi">4294901760</span><span class="p">)</span><span class="o">&gt;&gt;</span><span class="mi">16</span><span class="p">,</span><span class="nx">a</span><span class="o">=</span><span class="mi">1980</span><span class="o">+</span><span class="p">((</span><span class="nx">k</span><span class="o">&amp;</span><span class="mi">65024</span><span class="p">)</span><span class="o">&gt;&gt;</span><span class="mi">9</span><span class="p">),</span><span class="nx">b</span><span class="o">=</span><span class="p">((</span><span class="nx">k</span><span class="o">&amp;</span><span class="mi">480</span><span class="p">)</span><span class="o">&gt;&gt;</span><span class="mi">5</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span><span class="nx">k</span><span class="o">&amp;=</span><span class="mi">31</span><span class="p">;</span><span class="kd">var</span> <span class="nx">m</span><span class="o">=</span><span class="p">(</span><span class="nx">g</span><span class="o">&amp;</span><span class="mi">63488</span><span class="p">)</span><span class="o">&gt;&gt;</span><span class="mi">11</span><span class="p">,</span><span class="nx">l</span><span class="o">=</span><span class="p">(</span><span class="nx">g</span><span class="o">&amp;</span><span class="mi">2016</span><span class="p">)</span><span class="o">&gt;&gt;</span><span class="mi">5</span><span class="p">,</span><span class="nx">g</span><span class="o">=</span><span class="p">(</span><span class="nx">g</span><span class="o">&amp;</span><span class="mi">31</span><span class="p">)</span><span class="o">*</span><span class="mi">2</span><span class="p">;</span><span class="nx">g</span><span class="o">&gt;=</span><span class="mi">60</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">l</span><span class="o">++</span><span class="p">,</span><span class="nx">g</span><span class="o">=</span><span class="mi">0</span><span class="p">);</span><span class="nx">l</span><span class="o">&gt;=</span><span class="mi">60</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">m</span><span class="o">++</span><span class="p">,</span><span class="nx">l</span><span class="o">=</span><span class="mi">0</span><span class="p">);</span><span class="nx">m</span><span class="o">&gt;=</span><span class="mi">24</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">k</span><span class="o">++</span><span class="p">,</span><span class="nx">m</span><span class="o">=</span><span class="mi">0</span><span class="p">);</span><span class="kd">var</span> <span class="nx">h</span><span class="o">=!</span><span class="mi">1</span><span class="p">;</span><span class="k">try</span><span class="p">{</span><span class="nx">e</span><span class="o">=</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">k</span><span class="p">,</span><span class="nx">m</span><span class="p">,</span><span class="nx">l</span><span class="p">,</span><span class="nx">g</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="nx">h</span><span class="o">=!</span><span class="mi">0</span><span class="p">}</span><span class="k">catch</span><span class="p">(</span><span class="nx">n</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="o">==</span><span class="mi">1980</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">b</span><span class="o">===</span>
<span class="mi">0</span><span class="o">||</span><span class="nx">k</span><span class="o">===</span><span class="mi">0</span><span class="p">))</span><span class="k">try</span><span class="p">{</span><span class="nx">e</span><span class="o">=</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="mi">1980</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="nx">m</span><span class="p">,</span><span class="nx">l</span><span class="p">,</span><span class="nx">g</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="nx">h</span><span class="o">=!</span><span class="mi">0</span><span class="p">}</span><span class="k">catch</span><span class="p">(</span><span class="nx">o</span><span class="p">){</span><span class="k">try</span><span class="p">{</span><span class="nx">e</span><span class="o">=</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="mi">1980</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="nx">h</span><span class="o">=!</span><span class="mi">0</span><span class="p">}</span><span class="k">catch</span><span class="p">(</span><span class="nx">s</span><span class="p">){}}</span><span class="k">else</span> <span class="k">try</span><span class="p">{</span><span class="k">for</span><span class="p">(;</span><span class="nx">a</span><span class="o">&lt;</span><span class="mi">1980</span><span class="p">;)</span><span class="nx">a</span><span class="o">++</span><span class="p">;</span><span class="k">for</span><span class="p">(;</span><span class="nx">a</span><span class="o">&gt;</span><span class="mi">2030</span><span class="p">;)</span><span class="nx">a</span><span class="o">--</span><span class="p">;</span><span class="k">for</span><span class="p">(;</span><span class="nx">b</span><span class="o">&lt;</span><span class="mi">1</span><span class="p">;)</span><span class="nx">b</span><span class="o">++</span><span class="p">;</span><span class="k">for</span><span class="p">(;</span><span class="nx">b</span><span class="o">&gt;</span><span class="mi">12</span><span class="p">;)</span><span class="nx">b</span><span class="o">--</span><span class="p">;</span><span class="k">for</span><span class="p">(;</span><span class="nx">k</span><span class="o">&lt;</span><span class="mi">1</span><span class="p">;)</span><span class="nx">k</span><span class="o">++</span><span class="p">;</span><span class="k">for</span><span class="p">(;</span><span class="nx">k</span><span class="o">&gt;</span><span class="mi">28</span><span class="p">;)</span><span class="nx">k</span><span class="o">--</span><span class="p">;</span><span class="k">for</span><span class="p">(;</span><span class="nx">l</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">;)</span><span class="nx">l</span><span class="o">++</span><span class="p">;</span><span class="k">for</span><span class="p">(;</span><span class="nx">l</span><span class="o">&gt;</span><span class="mi">59</span><span class="p">;)</span><span class="nx">l</span><span class="o">--</span><span class="p">;</span><span class="k">for</span><span class="p">(;</span><span class="nx">g</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">;)</span><span class="nx">g</span><span class="o">++</span><span class="p">;</span><span class="k">for</span><span class="p">(;</span><span class="nx">g</span><span class="o">&gt;</span><span class="mi">59</span><span class="p">;)</span><span class="nx">g</span><span class="o">--</span><span class="p">;</span><span class="nx">e</span><span class="o">=</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="nx">k</span><span class="p">,</span><span class="nx">m</span><span class="p">,</span><span class="nx">l</span><span class="p">,</span><span class="nx">g</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span><span class="nx">h</span><span class="o">=!</span><span class="mi">0</span><span class="p">}</span><span class="k">catch</span><span class="p">(</span><span class="nx">t</span><span class="p">){}}</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">h</span><span class="p">)</span><span class="k">throw</span> <span class="nx">c</span><span class="o">=</span><span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;bad date/time value in this zip file.&quot;</span><span class="p">),</span><span class="nx">c</span><span class="p">.</span><span class="nx">source</span><span class="o">=</span><span class="s2">&quot;ZipFile.ReadZipEntry&quot;</span><span class="p">,</span><span class="nx">c</span><span class="p">;}</span><span class="nx">c</span><span class="p">.</span><span class="nx">lastModified</span><span class="o">=</span><span class="nx">e</span><span class="p">;</span><span class="k">if</span><span class="p">((</span><span class="nx">c</span><span class="p">.</span><span class="nx">bitField</span><span class="o">&amp;</span><span class="mi">1</span><span class="p">)</span><span class="o">==</span><span class="mi">1</span><span class="p">)</span><span class="k">return</span> <span class="nx">f</span><span class="p">.</span><span class="nx">status</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;This zipfile uses Encryption, which is not supported by ZipFile.js.&quot;</span><span class="p">),</span>
<span class="kc">null</span><span class="p">;</span><span class="nx">c</span><span class="p">.</span><span class="nx">utf8</span><span class="o">=</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">bitField</span><span class="o">&amp;</span><span class="mi">2048</span><span class="p">)</span><span class="o">==</span><span class="mi">2048</span><span class="p">;</span><span class="nx">c</span><span class="p">.</span><span class="nx">usesTrailingDescriptor</span><span class="o">=</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">bitField</span><span class="o">&amp;</span><span class="mi">8</span><span class="p">)</span><span class="o">==</span><span class="mi">8</span><span class="p">;</span><span class="nx">c</span><span class="p">.</span><span class="nx">crc32</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">binaryStream</span><span class="p">.</span><span class="nx">readNumber</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span><span class="nx">c</span><span class="p">.</span><span class="nx">compressedSize</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">binaryStream</span><span class="p">.</span><span class="nx">readNumber</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span><span class="nx">c</span><span class="p">.</span><span class="nx">uncompressedSize</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">binaryStream</span><span class="p">.</span><span class="nx">readNumber</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">compressedSize</span><span class="o">==</span><span class="mi">4294967295</span><span class="o">||</span><span class="nx">c</span><span class="p">.</span><span class="nx">uncompressedSize</span><span class="o">==</span><span class="mi">4294967295</span><span class="p">)</span><span class="k">return</span> <span class="nx">f</span><span class="p">.</span><span class="nx">status</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;This zipfile uses ZIP64, which is not supported by ZipFile.js&quot;</span><span class="p">),</span><span class="kc">null</span><span class="p">;</span><span class="nx">a</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">binaryStream</span><span class="p">.</span><span class="nx">readNumber</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span><span class="nx">b</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">binaryStream</span><span class="p">.</span><span class="nx">readNumber</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span><span class="nx">f</span><span class="p">.</span><span class="nx">status</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;INFO: filename length= &quot;</span><span class="o">+</span><span class="nx">a</span><span class="p">);</span><span class="nx">e</span><span class="o">=</span><span class="mi">30</span><span class="o">+</span><span class="nx">a</span><span class="o">+</span><span class="nx">b</span><span class="p">;</span><span class="nx">c</span><span class="p">.</span><span class="nx">utf8</span><span class="o">?</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">status</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;INFO: before filename, position= 0x&quot;</span><span class="o">+</span>
<span class="nx">JSIO</span><span class="p">.</span><span class="nx">decimalToHexString</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">binaryStream</span><span class="p">.</span><span class="nx">getPosition</span><span class="p">())),</span><span class="nx">g</span><span class="o">=</span><span class="k">new</span> <span class="nx">JSIO</span><span class="p">.</span><span class="nx">StreamSegmentReader</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">binaryStream</span><span class="p">,</span><span class="nx">f</span><span class="p">.</span><span class="nx">binaryStream</span><span class="p">.</span><span class="nx">getPosition</span><span class="p">(),</span><span class="nx">a</span><span class="p">),</span><span class="nx">g</span><span class="o">=</span><span class="k">new</span> <span class="nx">JSIO</span><span class="p">.</span><span class="nx">TextDecoder</span><span class="p">.</span><span class="nx">Utf8</span><span class="p">(</span><span class="nx">g</span><span class="p">),</span><span class="nx">g</span><span class="o">=</span><span class="k">new</span> <span class="nx">JSIO</span><span class="p">.</span><span class="nx">TextReader</span><span class="p">(</span><span class="nx">g</span><span class="p">),</span><span class="nx">c</span><span class="p">.</span><span class="nx">name</span><span class="o">=</span><span class="nx">g</span><span class="p">.</span><span class="nx">readToEnd</span><span class="p">(),</span><span class="nx">f</span><span class="p">.</span><span class="nx">binaryStream</span><span class="p">.</span><span class="nx">seek</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">SeekOrigin</span><span class="p">.</span><span class="nx">Current</span><span class="p">,</span><span class="nx">f</span><span class="p">),</span><span class="nx">f</span><span class="p">.</span><span class="nx">status</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;INFO: after filename, position= 0x&quot;</span><span class="o">+</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">decimalToHexString</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">binaryStream</span><span class="p">.</span><span class="nx">getPosition</span><span class="p">())))</span><span class="o">:</span><span class="nx">c</span><span class="p">.</span><span class="nx">name</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">binaryStream</span><span class="p">.</span><span class="nx">readString</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span><span class="nx">c</span><span class="p">.</span><span class="nx">extra</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">binaryStream</span><span class="p">.</span><span class="nx">read</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span><span class="nx">f</span><span class="p">.</span><span class="nx">verbose</span><span class="o">&gt;</span><span class="mi">1</span><span class="o">&amp;&amp;</span><span class="nx">f</span><span class="p">.</span><span class="nx">status</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;INFO: at offset 0x&quot;</span><span class="o">+</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">decimalToHexString</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">offset</span><span class="p">)</span><span class="o">+</span>
<span class="s2">&quot;, found entry &#39;&quot;</span><span class="o">+</span><span class="nx">c</span><span class="p">.</span><span class="nx">name</span><span class="o">+</span><span class="s2">&quot;&#39; fnl(&quot;</span><span class="o">+</span><span class="nx">a</span><span class="o">+</span><span class="s2">&quot;) efl(&quot;</span><span class="o">+</span><span class="nx">b</span><span class="o">+</span><span class="s2">&quot;)&quot;</span><span class="p">);</span><span class="nx">b</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">&amp;&amp;</span><span class="nx">f</span><span class="p">.</span><span class="nx">verbose</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">&amp;&amp;</span><span class="nx">f</span><span class="p">.</span><span class="nx">status</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;INFO: entry &quot;</span><span class="o">+</span><span class="nx">c</span><span class="p">.</span><span class="nx">name</span><span class="o">+</span><span class="s2">&quot; has &quot;</span><span class="o">+</span><span class="nx">b</span><span class="o">+</span><span class="s2">&quot; bytes of extra metadata (ignored)&quot;</span><span class="p">);</span><span class="nx">a</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">usesTrailingDescriptor</span><span class="p">){</span><span class="nx">b</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">binaryStream</span><span class="p">.</span><span class="nx">getPosition</span><span class="p">();</span><span class="k">for</span><span class="p">(</span><span class="nx">a</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">binaryStream</span><span class="p">.</span><span class="nx">readNumber</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span><span class="nx">a</span><span class="o">!=</span><span class="nx">ZipFile</span><span class="p">.</span><span class="nx">Signatures</span><span class="p">.</span><span class="nx">DataDescriptor</span><span class="p">;)</span><span class="nx">f</span><span class="p">.</span><span class="nx">binaryStream</span><span class="p">.</span><span class="nx">seek</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">SeekOrigin</span><span class="p">.</span><span class="nx">Current</span><span class="p">),</span><span class="nx">a</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">binaryStream</span><span class="p">.</span><span class="nx">readNumber</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span><span class="nx">c</span><span class="p">.</span><span class="nx">crc32</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">binaryStream</span><span class="p">.</span><span class="nx">readNumber</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span><span class="nx">c</span><span class="p">.</span><span class="nx">compressedSize</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">binaryStream</span><span class="p">.</span><span class="nx">readNumber</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span><span class="nx">c</span><span class="p">.</span><span class="nx">uncompressedSize</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">binaryStream</span><span class="p">.</span><span class="nx">readNumber</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>
<span class="nx">a</span><span class="o">=</span><span class="mi">16</span><span class="p">;</span><span class="nx">f</span><span class="p">.</span><span class="nx">binaryStream</span><span class="p">.</span><span class="nx">seek</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">SeekOrigin</span><span class="p">.</span><span class="nx">Begin</span><span class="p">)}</span><span class="nx">c</span><span class="p">.</span><span class="nx">lengthOfHeader</span><span class="o">=</span><span class="nx">e</span><span class="p">;</span><span class="nx">c</span><span class="p">.</span><span class="nx">totalEntrySize</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">lengthOfHeader</span><span class="o">+</span><span class="nx">c</span><span class="p">.</span><span class="nx">compressedSize</span><span class="p">;</span><span class="nx">f</span><span class="p">.</span><span class="nx">verbose</span><span class="o">&gt;</span><span class="mi">1</span><span class="o">&amp;&amp;</span><span class="nx">f</span><span class="p">.</span><span class="nx">status</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;INFO: seek 0x&quot;</span><span class="o">+</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">decimalToHexString</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">compressedSize</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot; (&quot;</span><span class="o">+</span><span class="nx">c</span><span class="p">.</span><span class="nx">compressedSize</span><span class="o">+</span><span class="s2">&quot;) bytes&quot;</span><span class="p">);</span><span class="nx">f</span><span class="p">.</span><span class="nx">binaryStream</span><span class="p">.</span><span class="nx">seek</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">compressedSize</span><span class="o">+</span><span class="nx">a</span><span class="p">,</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">SeekOrigin</span><span class="p">.</span><span class="nx">Current</span><span class="p">,</span><span class="nx">f</span><span class="p">);</span><span class="k">return</span> <span class="nx">c</span><span class="p">}</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="k">this</span> <span class="k">instanceof</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">callee</span><span class="p">)){</span><span class="kd">var</span> <span class="nx">g</span><span class="o">=</span><span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;you must use new to instantiate this class&quot;</span><span class="p">);</span><span class="nx">g</span><span class="p">.</span><span class="nx">source</span><span class="o">=</span><span class="s2">&quot;ZipFile.ctor&quot;</span><span class="p">;</span><span class="k">throw</span> <span class="nx">g</span><span class="p">;}</span><span class="k">this</span><span class="p">.</span><span class="nx">verbose</span><span class="o">=</span><span class="nx">e</span><span class="o">||</span><span class="mi">0</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">entries</span><span class="o">=</span><span class="p">[];</span><span class="k">this</span><span class="p">.</span><span class="nx">entryNames</span><span class="o">=</span><span class="p">[];</span><span class="k">this</span><span class="p">.</span><span class="nx">status</span><span class="o">=</span>
<span class="p">[];</span><span class="k">this</span><span class="p">.</span><span class="nx">_version</span><span class="o">=</span><span class="nx">c</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">_typename</span><span class="o">=</span><span class="s2">&quot;ZipFile&quot;</span><span class="p">;</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="k">this</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">binaryStream</span><span class="o">=</span><span class="k">new</span> <span class="nx">JSIO</span><span class="p">.</span><span class="nx">BinaryUrlStream</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="k">try</span><span class="p">{</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">req</span><span class="p">.</span><span class="nx">status</span><span class="o">==</span><span class="mi">200</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">binaryStream</span><span class="p">.</span><span class="nx">readNumber</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="o">!=</span><span class="nx">ZipFile</span><span class="p">.</span><span class="nx">Signatures</span><span class="p">.</span><span class="nx">Entry</span><span class="p">)</span><span class="nx">f</span><span class="p">.</span><span class="nx">status</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;WARNING: this file does not appear to be a zip file&quot;</span><span class="p">);</span><span class="k">else</span><span class="p">{</span><span class="nx">f</span><span class="p">.</span><span class="nx">binaryStream</span><span class="p">.</span><span class="nx">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nx">JSIO</span><span class="p">.</span><span class="nx">SeekOrigin</span><span class="p">.</span><span class="nx">Begin</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">entryNames</span><span class="p">.</span><span class="nx">length</span><span class="o">===</span><span class="mi">0</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span><span class="p">;(</span><span class="nx">c</span><span class="o">=</span><span class="nx">m</span><span class="p">())</span><span class="o">!==</span><span class="kc">null</span><span class="p">;)</span><span class="nx">f</span><span class="p">.</span><span class="nx">entries</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">c</span><span class="p">),</span><span class="nx">f</span><span class="p">.</span><span class="nx">entryNames</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span><span class="nx">f</span><span class="p">.</span><span class="nx">verbose</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">&amp;&amp;</span><span class="nx">f</span><span class="p">.</span><span class="nx">status</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;INFO: read &quot;</span><span class="o">+</span><span class="nx">f</span><span class="p">.</span><span class="nx">entries</span><span class="p">.</span><span class="nx">length</span><span class="o">+</span><span class="s2">&quot; entries&quot;</span><span class="p">)}</span><span class="k">else</span> <span class="nx">f</span><span class="p">.</span><span class="nx">status</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;ERROR: the URL could not be read (&quot;</span><span class="o">+</span>
<span class="nx">b</span><span class="p">.</span><span class="nx">req</span><span class="p">.</span><span class="nx">status</span><span class="o">+</span><span class="s2">&quot; &quot;</span><span class="o">+</span><span class="nx">b</span><span class="p">.</span><span class="nx">req</span><span class="p">.</span><span class="nx">statusText</span><span class="o">+</span><span class="s2">&quot;)&quot;</span><span class="p">);</span><span class="nx">a</span><span class="p">(</span><span class="nx">f</span><span class="p">)}</span><span class="k">catch</span><span class="p">(</span><span class="nx">d</span><span class="p">){</span><span class="nx">f</span><span class="p">.</span><span class="nx">status</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;Exception: &quot;</span><span class="o">+</span><span class="nx">d</span><span class="p">.</span><span class="nx">message</span><span class="p">),</span><span class="nx">a</span><span class="p">(</span><span class="nx">f</span><span class="p">)}});</span><span class="k">return</span> <span class="k">this</span><span class="p">};</span><span class="nx">ZipFile</span><span class="p">.</span><span class="nx">Signatures</span><span class="o">=</span><span class="p">{</span><span class="nx">Entry</span><span class="o">:</span><span class="mi">67324752</span><span class="p">,</span><span class="nx">EndOfCentralDirectory</span><span class="o">:</span><span class="mi">101010256</span><span class="p">,</span><span class="nx">DirEntry</span><span class="o">:</span><span class="mi">33639248</span><span class="p">,</span><span class="nx">DataDescriptor</span><span class="o">:</span><span class="mi">134695760</span><span class="p">};</span><span class="nx">ZipFile</span><span class="p">.</span><span class="nx">Version</span><span class="o">=</span><span class="nx">c</span><span class="p">;</span><span class="nx">ZipFile</span><span class="p">.</span><span class="nx">EncryptionAlgorithm</span><span class="o">=</span><span class="p">{</span><span class="nx">None</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="nx">PkzipWeak</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span><span class="nx">WinZipAes</span><span class="o">:</span><span class="mi">2</span><span class="p">}})();</span>
<span class="cm">/*</span>
<span class="cm"> * Crypto-JS v2.5.3</span>
<span class="cm"> * http://code.google.com/p/crypto-js/</span>
<span class="cm"> * (c) 2009-2012 by Jeff Mott. All rights reserved.</span>
<span class="cm"> * http://code.google.com/p/crypto-js/wiki/License</span>
<span class="cm"> */</span>
<span class="p">(</span><span class="k">typeof</span> <span class="nx">Crypto</span><span class="o">==</span><span class="s2">&quot;undefined&quot;</span><span class="o">||!</span><span class="nx">Crypto</span><span class="p">.</span><span class="nx">util</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nb">window</span><span class="p">.</span><span class="nx">Crypto</span><span class="o">=</span><span class="p">{},</span><span class="nx">m</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">util</span><span class="o">=</span><span class="p">{</span><span class="nx">rotl</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="o">&lt;&lt;</span><span class="nx">c</span><span class="o">|</span><span class="nx">a</span><span class="o">&gt;&gt;&gt;</span><span class="mi">32</span><span class="o">-</span><span class="nx">c</span><span class="p">},</span><span class="nx">rotr</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="o">&lt;&lt;</span><span class="mi">32</span><span class="o">-</span><span class="nx">c</span><span class="o">|</span><span class="nx">a</span><span class="o">&gt;&gt;&gt;</span><span class="nx">c</span><span class="p">},</span><span class="nx">endian</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">constructor</span><span class="o">==</span><span class="nb">Number</span><span class="p">)</span><span class="k">return</span> <span class="nx">m</span><span class="p">.</span><span class="nx">rotl</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="mi">8</span><span class="p">)</span><span class="o">&amp;</span><span class="mi">16711935</span><span class="o">|</span><span class="nx">m</span><span class="p">.</span><span class="nx">rotl</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="mi">24</span><span class="p">)</span><span class="o">&amp;</span><span class="mi">4278255360</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">c</span><span class="o">&lt;</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">c</span><span class="o">++</span><span class="p">)</span><span class="nx">a</span><span class="p">[</span><span class="nx">c</span><span class="p">]</span><span class="o">=</span><span class="nx">m</span><span class="p">.</span><span class="nx">endian</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">c</span><span class="p">]);</span><span class="k">return</span> <span class="nx">a</span><span class="p">},</span><span class="nx">randomBytes</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="p">[];</span><span class="nx">a</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">;</span><span class="nx">a</span><span class="o">--</span><span class="p">)</span><span class="nx">c</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span><span class="o">*</span><span class="mi">256</span><span class="p">));</span><span class="k">return</span> <span class="nx">c</span><span class="p">},</span><span class="nx">bytesToWords</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="p">[],</span><span class="nx">b</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">b</span><span class="o">&lt;</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">b</span><span class="o">++</span><span class="p">,</span><span class="nx">i</span><span class="o">+=</span><span class="mi">8</span><span class="p">)</span><span class="nx">c</span><span class="p">[</span><span class="nx">i</span><span class="o">&gt;&gt;&gt;</span><span class="mi">5</span><span class="p">]</span><span class="o">|=</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">b</span><span class="p">]</span><span class="o">&amp;</span><span class="mi">255</span><span class="p">)</span><span class="o">&lt;&lt;</span>
<span class="mi">24</span><span class="o">-</span><span class="nx">i</span><span class="o">%</span><span class="mi">32</span><span class="p">;</span><span class="k">return</span> <span class="nx">c</span><span class="p">},</span><span class="nx">wordsToBytes</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="p">[],</span><span class="nx">b</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">b</span><span class="o">&lt;</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="o">*</span><span class="mi">32</span><span class="p">;</span><span class="nx">b</span><span class="o">+=</span><span class="mi">8</span><span class="p">)</span><span class="nx">c</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">b</span><span class="o">&gt;&gt;&gt;</span><span class="mi">5</span><span class="p">]</span><span class="o">&gt;&gt;&gt;</span><span class="mi">24</span><span class="o">-</span><span class="nx">b</span><span class="o">%</span><span class="mi">32</span><span class="o">&amp;</span><span class="mi">255</span><span class="p">);</span><span class="k">return</span> <span class="nx">c</span><span class="p">},</span><span class="nx">bytesToHex</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="p">[],</span><span class="nx">b</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">b</span><span class="o">&lt;</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">b</span><span class="o">++</span><span class="p">)</span><span class="nx">c</span><span class="p">.</span><span class="nx">push</span><span class="p">((</span><span class="nx">a</span><span class="p">[</span><span class="nx">b</span><span class="p">]</span><span class="o">&gt;&gt;&gt;</span><span class="mi">4</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">)),</span><span class="nx">c</span><span class="p">.</span><span class="nx">push</span><span class="p">((</span><span class="nx">a</span><span class="p">[</span><span class="nx">b</span><span class="p">]</span><span class="o">&amp;</span><span class="mi">15</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">));</span><span class="k">return</span> <span class="nx">c</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)},</span><span class="nx">hexToBytes</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="p">[],</span><span class="nx">b</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">b</span><span class="o">&lt;</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">b</span><span class="o">+=</span><span class="mi">2</span><span class="p">)</span><span class="nx">c</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="mi">16</span><span class="p">));</span><span class="k">return</span> <span class="nx">c</span><span class="p">},</span><span class="nx">bytesToBase64</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">btoa</span><span class="o">==</span><span class="s2">&quot;function&quot;</span><span class="p">)</span><span class="k">return</span> <span class="nx">btoa</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">bytesToString</span><span class="p">(</span><span class="nx">a</span><span class="p">));</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="p">[],</span><span class="nx">b</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">b</span><span class="o">&lt;</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">b</span><span class="o">+=</span><span class="mi">3</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="nx">a</span><span class="p">[</span><span class="nx">b</span><span class="p">]</span><span class="o">&lt;&lt;</span><span class="mi">16</span><span class="o">|</span><span class="nx">a</span><span class="p">[</span><span class="nx">b</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">&lt;&lt;</span>
<span class="mi">8</span><span class="o">|</span><span class="nx">a</span><span class="p">[</span><span class="nx">b</span><span class="o">+</span><span class="mi">2</span><span class="p">],</span><span class="nx">l</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">l</span><span class="o">&lt;</span><span class="mi">4</span><span class="p">;</span><span class="nx">l</span><span class="o">++</span><span class="p">)</span><span class="nx">b</span><span class="o">*</span><span class="mi">8</span><span class="o">+</span><span class="nx">l</span><span class="o">*</span><span class="mi">6</span><span class="o">&lt;=</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="o">*</span><span class="mi">8</span><span class="o">?</span><span class="nx">c</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/&quot;</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">i</span><span class="o">&gt;&gt;&gt;</span><span class="mi">6</span><span class="o">*</span><span class="p">(</span><span class="mi">3</span><span class="o">-</span><span class="nx">l</span><span class="p">)</span><span class="o">&amp;</span><span class="mi">63</span><span class="p">))</span><span class="o">:</span><span class="nx">c</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;=&quot;</span><span class="p">);</span><span class="k">return</span> <span class="nx">c</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)},</span><span class="nx">base64ToBytes</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">atob</span><span class="o">==</span><span class="s2">&quot;function&quot;</span><span class="p">)</span><span class="k">return</span> <span class="nx">f</span><span class="p">.</span><span class="nx">stringToBytes</span><span class="p">(</span><span class="nx">atob</span><span class="p">(</span><span class="nx">a</span><span class="p">));</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/[^A-Z0-9+\/]/ig</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">),</span><span class="nx">c</span><span class="o">=</span><span class="p">[],</span><span class="nx">b</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">b</span><span class="o">&lt;</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">=++</span><span class="nx">b</span><span class="o">%</span><span class="mi">4</span><span class="p">)</span><span class="nx">i</span><span class="o">!=</span><span class="mi">0</span><span class="o">&amp;&amp;</span><span class="nx">c</span><span class="p">.</span><span class="nx">push</span><span class="p">((</span><span class="s2">&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/&quot;</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">b</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span><span class="o">&amp;</span><span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="nx">i</span><span class="o">+</span><span class="mi">8</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">&lt;&lt;</span><span class="nx">i</span><span class="o">*</span><span class="mi">2</span><span class="o">|</span><span class="s2">&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/&quot;</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">b</span><span class="p">))</span><span class="o">&gt;&gt;&gt;</span>
<span class="mi">6</span><span class="o">-</span><span class="nx">i</span><span class="o">*</span><span class="mi">2</span><span class="p">);</span><span class="k">return</span> <span class="nx">c</span><span class="p">}},</span><span class="nx">d</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">charenc</span><span class="o">=</span><span class="p">{};</span><span class="nx">d</span><span class="p">.</span><span class="nx">UTF8</span><span class="o">=</span><span class="p">{</span><span class="nx">stringToBytes</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">f</span><span class="p">.</span><span class="nx">stringToBytes</span><span class="p">(</span><span class="nx">unescape</span><span class="p">(</span><span class="nb">encodeURIComponent</span><span class="p">(</span><span class="nx">a</span><span class="p">)))},</span><span class="nx">bytesToString</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nb">decodeURIComponent</span><span class="p">(</span><span class="nx">escape</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">bytesToString</span><span class="p">(</span><span class="nx">a</span><span class="p">)))}};</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">Binary</span><span class="o">=</span><span class="p">{</span><span class="nx">stringToBytes</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="p">[],</span><span class="nx">b</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">b</span><span class="o">&lt;</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">b</span><span class="o">++</span><span class="p">)</span><span class="nx">c</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">charCodeAt</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span><span class="o">&amp;</span><span class="mi">255</span><span class="p">);</span><span class="k">return</span> <span class="nx">c</span><span class="p">},</span><span class="nx">bytesToString</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="p">[],</span><span class="nx">b</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">b</span><span class="o">&lt;</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">b</span><span class="o">++</span><span class="p">)</span><span class="nx">c</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nb">String</span><span class="p">.</span><span class="nx">fromCharCode</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">b</span><span class="p">]));</span><span class="k">return</span> <span class="nx">c</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)}}}();</span>
<span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">Crypto</span><span class="p">,</span><span class="nx">m</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">util</span><span class="p">,</span><span class="nx">f</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">charenc</span><span class="p">,</span><span class="nx">a</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">UTF8</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">Binary</span><span class="p">,</span><span class="nx">b</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">SHA1</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">l</span><span class="p">){</span><span class="kd">var</span> <span class="nx">g</span><span class="o">=</span><span class="nx">m</span><span class="p">.</span><span class="nx">wordsToBytes</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">_sha1</span><span class="p">(</span><span class="nx">a</span><span class="p">));</span><span class="k">return</span> <span class="nx">l</span><span class="o">&amp;&amp;</span><span class="nx">l</span><span class="p">.</span><span class="nx">asBytes</span><span class="o">?</span><span class="nx">g</span><span class="o">:</span><span class="nx">l</span><span class="o">&amp;&amp;</span><span class="nx">l</span><span class="p">.</span><span class="nx">asString</span><span class="o">?</span><span class="nx">c</span><span class="p">.</span><span class="nx">bytesToString</span><span class="p">(</span><span class="nx">g</span><span class="p">)</span><span class="o">:</span><span class="nx">m</span><span class="p">.</span><span class="nx">bytesToHex</span><span class="p">(</span><span class="nx">g</span><span class="p">)};</span><span class="nx">b</span><span class="p">.</span><span class="nx">_sha1</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="nx">b</span><span class="p">.</span><span class="nx">constructor</span><span class="o">==</span><span class="nb">String</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">b</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">stringToBytes</span><span class="p">(</span><span class="nx">b</span><span class="p">));</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">m</span><span class="p">.</span><span class="nx">bytesToWords</span><span class="p">(</span><span class="nx">b</span><span class="p">),</span><span class="nx">g</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="o">*</span><span class="mi">8</span><span class="p">,</span><span class="nx">b</span><span class="o">=</span><span class="p">[],</span><span class="nx">d</span><span class="o">=</span><span class="mi">1732584193</span><span class="p">,</span><span class="nx">h</span><span class="o">=-</span><span class="mi">271733879</span><span class="p">,</span><span class="nx">j</span><span class="o">=-</span><span class="mi">1732584194</span><span class="p">,</span><span class="nx">k</span><span class="o">=</span><span class="mi">271733878</span><span class="p">,</span><span class="nx">f</span><span class="o">=-</span><span class="mi">1009589776</span><span class="p">;</span><span class="nx">c</span><span class="p">[</span><span class="nx">g</span><span class="o">&gt;&gt;</span><span class="mi">5</span><span class="p">]</span><span class="o">|=</span><span class="mi">128</span><span class="o">&lt;&lt;</span><span class="mi">24</span><span class="o">-</span><span class="nx">g</span><span class="o">%</span><span class="mi">32</span><span class="p">;</span><span class="nx">c</span><span class="p">[(</span><span class="nx">g</span><span class="o">+</span><span class="mi">64</span><span class="o">&gt;&gt;&gt;</span><span class="mi">9</span><span class="o">&lt;&lt;</span><span class="mi">4</span><span class="p">)</span><span class="o">+</span><span class="mi">15</span><span class="p">]</span><span class="o">=</span><span class="nx">g</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="nx">g</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">g</span><span class="o">&lt;</span><span class="nx">c</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">g</span><span class="o">+=</span><span class="mi">16</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">o</span><span class="o">=</span><span class="nx">d</span><span class="p">,</span><span class="nx">p</span><span class="o">=</span><span class="nx">h</span><span class="p">,</span><span class="nx">q</span><span class="o">=</span><span class="nx">j</span><span class="p">,</span><span class="nx">r</span><span class="o">=</span><span class="nx">k</span><span class="p">,</span><span class="nx">s</span><span class="o">=</span><span class="nx">f</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">e</span><span class="o">&lt;</span><span class="mi">80</span><span class="p">;</span><span class="nx">e</span><span class="o">++</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">e</span><span class="o">&lt;</span><span class="mi">16</span><span class="p">)</span><span class="nx">b</span><span class="p">[</span><span class="nx">e</span><span class="p">]</span><span class="o">=</span><span class="nx">c</span><span class="p">[</span><span class="nx">g</span><span class="o">+</span><span class="nx">e</span><span class="p">];</span><span class="k">else</span><span class="p">{</span><span class="kd">var</span> <span class="nx">n</span><span class="o">=</span>
<span class="nx">b</span><span class="p">[</span><span class="nx">e</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span><span class="o">^</span><span class="nx">b</span><span class="p">[</span><span class="nx">e</span><span class="o">-</span><span class="mi">8</span><span class="p">]</span><span class="o">^</span><span class="nx">b</span><span class="p">[</span><span class="nx">e</span><span class="o">-</span><span class="mi">14</span><span class="p">]</span><span class="o">^</span><span class="nx">b</span><span class="p">[</span><span class="nx">e</span><span class="o">-</span><span class="mi">16</span><span class="p">];</span><span class="nx">b</span><span class="p">[</span><span class="nx">e</span><span class="p">]</span><span class="o">=</span><span class="nx">n</span><span class="o">&lt;&lt;</span><span class="mi">1</span><span class="o">|</span><span class="nx">n</span><span class="o">&gt;&gt;&gt;</span><span class="mi">31</span><span class="p">}</span><span class="nx">n</span><span class="o">=</span><span class="p">(</span><span class="nx">d</span><span class="o">&lt;&lt;</span><span class="mi">5</span><span class="o">|</span><span class="nx">d</span><span class="o">&gt;&gt;&gt;</span><span class="mi">27</span><span class="p">)</span><span class="o">+</span><span class="nx">f</span><span class="o">+</span><span class="p">(</span><span class="nx">b</span><span class="p">[</span><span class="nx">e</span><span class="p">]</span><span class="o">&gt;&gt;&gt;</span><span class="mi">0</span><span class="p">)</span><span class="o">+</span><span class="p">(</span><span class="nx">e</span><span class="o">&lt;</span><span class="mi">20</span><span class="o">?</span><span class="p">(</span><span class="nx">h</span><span class="o">&amp;</span><span class="nx">j</span><span class="o">|~</span><span class="nx">h</span><span class="o">&amp;</span><span class="nx">k</span><span class="p">)</span><span class="o">+</span><span class="mi">1518500249</span><span class="o">:</span><span class="nx">e</span><span class="o">&lt;</span><span class="mi">40</span><span class="o">?</span><span class="p">(</span><span class="nx">h</span><span class="o">^</span><span class="nx">j</span><span class="o">^</span><span class="nx">k</span><span class="p">)</span><span class="o">+</span><span class="mi">1859775393</span><span class="o">:</span><span class="nx">e</span><span class="o">&lt;</span><span class="mi">60</span><span class="o">?</span><span class="p">(</span><span class="nx">h</span><span class="o">&amp;</span><span class="nx">j</span><span class="o">|</span><span class="nx">h</span><span class="o">&amp;</span><span class="nx">k</span><span class="o">|</span><span class="nx">j</span><span class="o">&amp;</span><span class="nx">k</span><span class="p">)</span><span class="o">-</span><span class="mi">1894007588</span><span class="o">:</span><span class="p">(</span><span class="nx">h</span><span class="o">^</span><span class="nx">j</span><span class="o">^</span><span class="nx">k</span><span class="p">)</span><span class="o">-</span><span class="mi">899497514</span><span class="p">);</span><span class="nx">f</span><span class="o">=</span><span class="nx">k</span><span class="p">;</span><span class="nx">k</span><span class="o">=</span><span class="nx">j</span><span class="p">;</span><span class="nx">j</span><span class="o">=</span><span class="nx">h</span><span class="o">&lt;&lt;</span><span class="mi">30</span><span class="o">|</span><span class="nx">h</span><span class="o">&gt;&gt;&gt;</span><span class="mi">2</span><span class="p">;</span><span class="nx">h</span><span class="o">=</span><span class="nx">d</span><span class="p">;</span><span class="nx">d</span><span class="o">=</span><span class="nx">n</span><span class="p">}</span><span class="nx">d</span><span class="o">+=</span><span class="nx">o</span><span class="p">;</span><span class="nx">h</span><span class="o">+=</span><span class="nx">p</span><span class="p">;</span><span class="nx">j</span><span class="o">+=</span><span class="nx">q</span><span class="p">;</span><span class="nx">k</span><span class="o">+=</span><span class="nx">r</span><span class="p">;</span><span class="nx">f</span><span class="o">+=</span><span class="nx">s</span><span class="p">}</span><span class="k">return</span><span class="p">[</span><span class="nx">d</span><span class="p">,</span><span class="nx">h</span><span class="p">,</span><span class="nx">j</span><span class="p">,</span><span class="nx">k</span><span class="p">,</span><span class="nx">f</span><span class="p">]};</span><span class="nx">b</span><span class="p">.</span><span class="nx">_blocksize</span><span class="o">=</span><span class="mi">16</span><span class="p">;</span><span class="nx">b</span><span class="p">.</span><span class="nx">_digestsize</span><span class="o">=</span><span class="mi">20</span><span class="p">})();</span>
<span class="cm">/*</span>
<span class="cm"> * Handlebars runtime v0.1.0beta6</span>
<span class="cm"> */</span>
 <span class="kd">var</span> <span class="nx">Handlebars</span><span class="o">=</span><span class="p">{</span><span class="nx">VERSION</span><span class="o">:</span><span class="s2">&quot;1.0.beta.6&quot;</span><span class="p">,</span><span class="nx">helpers</span><span class="o">:</span><span class="p">{},</span><span class="nx">partials</span><span class="o">:</span><span class="p">{},</span><span class="nx">registerHelper</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">c</span><span class="p">)</span><span class="nx">b</span><span class="p">.</span><span class="nx">not</span><span class="o">=</span><span class="nx">c</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">helpers</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="o">=</span><span class="nx">b</span><span class="p">},</span><span class="nx">registerPartial</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">partials</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="o">=</span><span class="nx">b</span><span class="p">}};</span><span class="nx">Handlebars</span><span class="p">.</span><span class="nx">registerHelper</span><span class="p">(</span><span class="s2">&quot;helperMissing&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="o">!==</span><span class="mi">2</span><span class="p">)</span><span class="k">throw</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;Could not find property &#39;&quot;</span><span class="o">+</span><span class="nx">a</span><span class="o">+</span><span class="s2">&quot;&#39;&quot;</span><span class="p">);});</span><span class="kd">var</span> <span class="nx">toString</span><span class="o">=</span><span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span><span class="p">,</span><span class="nx">functionType</span><span class="o">=</span><span class="s2">&quot;[object Function]&quot;</span><span class="p">;</span>
<span class="nx">Handlebars</span><span class="p">.</span><span class="nx">registerHelper</span><span class="p">(</span><span class="s2">&quot;blockHelperMissing&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">inverse</span><span class="o">||</span><span class="kd">function</span><span class="p">(){},</span><span class="nx">d</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">fn</span><span class="p">,</span><span class="nx">f</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span><span class="nx">e</span><span class="o">===</span><span class="nx">functionType</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">a</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">));</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="o">===!</span><span class="mi">0</span><span class="p">)</span><span class="k">return</span> <span class="nx">d</span><span class="p">(</span><span class="k">this</span><span class="p">);</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="o">===!</span><span class="mi">1</span><span class="o">||</span><span class="nx">a</span><span class="o">==</span><span class="kc">null</span><span class="p">)</span><span class="k">return</span> <span class="nx">c</span><span class="p">(</span><span class="k">this</span><span class="p">);</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">e</span><span class="o">===</span><span class="s2">&quot;[object Array]&quot;</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">){</span><span class="nx">c</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="nx">e</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">c</span><span class="o">&lt;</span><span class="nx">e</span><span class="p">;</span><span class="nx">c</span><span class="o">++</span><span class="p">)</span><span class="nx">f</span><span class="o">+=</span><span class="nx">d</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">c</span><span class="p">])}</span><span class="k">else</span> <span class="nx">f</span><span class="o">=</span><span class="nx">c</span><span class="p">(</span><span class="k">this</span><span class="p">);</span><span class="k">return</span> <span class="nx">f</span><span class="p">}</span><span class="k">else</span> <span class="k">return</span> <span class="nx">d</span><span class="p">(</span><span class="nx">a</span><span class="p">)});</span><span class="nx">Handlebars</span><span class="p">.</span><span class="nx">registerHelper</span><span class="p">(</span><span class="s2">&quot;each&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">fn</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">inverse</span><span class="p">,</span><span class="nx">f</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">d</span><span class="o">&lt;</span><span class="nx">e</span><span class="p">;</span><span class="nx">d</span><span class="o">++</span><span class="p">)</span><span class="nx">f</span><span class="o">+=</span><span class="nx">c</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">d</span><span class="p">]);</span><span class="k">else</span> <span class="nx">f</span><span class="o">=</span><span class="nx">d</span><span class="p">(</span><span class="k">this</span><span class="p">);</span><span class="k">return</span> <span class="nx">f</span><span class="p">});</span>
<span class="nx">Handlebars</span><span class="p">.</span><span class="nx">registerHelper</span><span class="p">(</span><span class="s2">&quot;if&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">===</span><span class="nx">functionType</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">a</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">));</span><span class="k">return</span><span class="o">!</span><span class="nx">a</span><span class="o">||</span><span class="nx">Handlebars</span><span class="p">.</span><span class="nx">Utils</span><span class="p">.</span><span class="nx">isEmpty</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">?</span><span class="nx">b</span><span class="p">.</span><span class="nx">inverse</span><span class="p">(</span><span class="k">this</span><span class="p">)</span><span class="o">:</span><span class="nx">b</span><span class="p">.</span><span class="nx">fn</span><span class="p">(</span><span class="k">this</span><span class="p">)});</span><span class="nx">Handlebars</span><span class="p">.</span><span class="nx">registerHelper</span><span class="p">(</span><span class="s2">&quot;unless&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">fn</span><span class="p">;</span><span class="nx">b</span><span class="p">.</span><span class="nx">fn</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">inverse</span><span class="p">;</span><span class="nx">b</span><span class="p">.</span><span class="nx">inverse</span><span class="o">=</span><span class="nx">c</span><span class="p">;</span><span class="k">return</span> <span class="nx">Handlebars</span><span class="p">.</span><span class="nx">helpers</span><span class="p">[</span><span class="s2">&quot;if&quot;</span><span class="p">].</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">)});</span><span class="nx">Handlebars</span><span class="p">.</span><span class="nx">registerHelper</span><span class="p">(</span><span class="s2">&quot;with&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span> <span class="nx">b</span><span class="p">.</span><span class="nx">fn</span><span class="p">(</span><span class="nx">a</span><span class="p">)});</span><span class="nx">Handlebars</span><span class="p">.</span><span class="nx">registerHelper</span><span class="p">(</span><span class="s2">&quot;log&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">Handlebars</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a</span><span class="p">)});</span>
<span class="nx">Handlebars</span><span class="p">.</span><span class="nx">Exception</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nb">Error</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">arguments</span><span class="p">),</span><span class="nx">c</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="nx">c</span> <span class="k">in</span> <span class="nx">b</span><span class="p">)</span><span class="nx">b</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">c</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="nx">c</span><span class="p">]</span><span class="o">=</span><span class="nx">b</span><span class="p">[</span><span class="nx">c</span><span class="p">]);</span><span class="k">this</span><span class="p">.</span><span class="nx">message</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">message</span><span class="p">};</span><span class="nx">Handlebars</span><span class="p">.</span><span class="nx">Exception</span><span class="p">.</span><span class="nx">prototype</span><span class="o">=</span><span class="nb">Error</span><span class="p">();</span><span class="nx">Handlebars</span><span class="p">.</span><span class="nx">SafeString</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">string</span><span class="o">=</span><span class="nx">a</span><span class="p">};</span><span class="nx">Handlebars</span><span class="p">.</span><span class="nx">SafeString</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">string</span><span class="p">.</span><span class="nx">toString</span><span class="p">()};</span>
<span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;&lt;&quot;</span><span class="o">:</span><span class="s2">&quot;&amp;lt;&quot;</span><span class="p">,</span><span class="s2">&quot;&gt;&quot;</span><span class="o">:</span><span class="s2">&quot;&amp;gt;&quot;</span><span class="p">,</span><span class="s1">&#39;&quot;&#39;</span><span class="o">:</span><span class="s2">&quot;&amp;quot;&quot;</span><span class="p">,</span><span class="s2">&quot;&#39;&quot;</span><span class="o">:</span><span class="s2">&quot;&amp;#x27;&quot;</span><span class="p">,</span><span class="s2">&quot;`&quot;</span><span class="o">:</span><span class="s2">&quot;&amp;#x60;&quot;</span><span class="p">},</span><span class="nx">b</span><span class="o">=</span><span class="sr">/&amp;(?!\w+;)|[&lt;&gt;&quot;&#39;`]/g</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="sr">/[&amp;&lt;&gt;&quot;&#39;`]/</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="p">[</span><span class="nx">b</span><span class="p">]</span><span class="o">||</span><span class="s2">&quot;&amp;amp;&quot;</span><span class="p">};</span><span class="nx">Handlebars</span><span class="p">.</span><span class="nx">Utils</span><span class="o">=</span><span class="p">{</span><span class="nx">escapeExpression</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span> <span class="k">instanceof</span> <span class="nx">Handlebars</span><span class="p">.</span><span class="nx">SafeString</span><span class="p">)</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">toString</span><span class="p">();</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="o">==</span><span class="kc">null</span><span class="o">||</span><span class="nx">a</span><span class="o">===!</span><span class="mi">1</span><span class="p">)</span><span class="k">return</span><span class="s2">&quot;&quot;</span><span class="p">;</span><span class="k">return</span><span class="o">!</span><span class="nx">c</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">?</span><span class="nx">a</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">d</span><span class="p">)},</span><span class="nx">isEmpty</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="k">typeof</span> <span class="nx">a</span><span class="o">===</span><span class="s2">&quot;undefined&quot;</span><span class="o">?!</span><span class="mi">0</span><span class="o">:</span><span class="nx">a</span><span class="o">===</span><span class="kc">null</span><span class="o">?!</span><span class="mi">0</span><span class="o">:</span><span class="nx">a</span><span class="o">===!</span><span class="mi">1</span><span class="o">?!</span><span class="mi">0</span><span class="o">:</span><span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">===</span><span class="s2">&quot;[object Array]&quot;</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="o">===</span><span class="mi">0</span><span class="o">?!</span><span class="mi">0</span><span class="o">:!</span><span class="mi">1</span><span class="p">}}})();</span>
<span class="nx">Handlebars</span><span class="p">.</span><span class="nx">VM</span><span class="o">=</span><span class="p">{</span><span class="nx">template</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="p">{</span><span class="nx">escapeExpression</span><span class="o">:</span><span class="nx">Handlebars</span><span class="p">.</span><span class="nx">Utils</span><span class="p">.</span><span class="nx">escapeExpression</span><span class="p">,</span><span class="nx">invokePartial</span><span class="o">:</span><span class="nx">Handlebars</span><span class="p">.</span><span class="nx">VM</span><span class="p">.</span><span class="nx">invokePartial</span><span class="p">,</span><span class="nx">programs</span><span class="o">:</span><span class="p">[],</span><span class="nx">program</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">f</span><span class="p">){</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">programs</span><span class="p">[</span><span class="nx">a</span><span class="p">];</span><span class="k">return</span> <span class="nx">f</span><span class="o">?</span><span class="nx">Handlebars</span><span class="p">.</span><span class="nx">VM</span><span class="p">.</span><span class="nx">program</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">f</span><span class="p">)</span><span class="o">:</span><span class="p">(</span><span class="nx">e</span><span class="o">||</span><span class="p">(</span><span class="nx">e</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">programs</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="o">=</span><span class="nx">Handlebars</span><span class="p">.</span><span class="nx">VM</span><span class="p">.</span><span class="nx">program</span><span class="p">(</span><span class="nx">b</span><span class="p">)),</span><span class="nx">e</span><span class="p">)},</span><span class="nx">programWithDepth</span><span class="o">:</span><span class="nx">Handlebars</span><span class="p">.</span><span class="nx">VM</span><span class="p">.</span><span class="nx">programWithDepth</span><span class="p">,</span><span class="nx">noop</span><span class="o">:</span><span class="nx">Handlebars</span><span class="p">.</span><span class="nx">VM</span><span class="p">.</span><span class="nx">noop</span><span class="p">};</span><span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">){</span><span class="nx">d</span><span class="o">=</span><span class="nx">d</span><span class="o">||</span><span class="p">{};</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">Handlebars</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">.</span><span class="nx">helpers</span><span class="p">,</span><span class="nx">d</span><span class="p">.</span><span class="nx">partials</span><span class="p">,</span><span class="nx">d</span><span class="p">.</span><span class="nx">data</span><span class="p">)}},</span><span class="nx">programWithDepth</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span>
<span class="mi">2</span><span class="p">);</span><span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="nx">e</span><span class="o">=</span><span class="nx">e</span><span class="o">||</span><span class="p">{};</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,[</span><span class="nx">c</span><span class="p">,</span><span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="o">||</span><span class="nx">b</span><span class="p">].</span><span class="nx">concat</span><span class="p">(</span><span class="nx">d</span><span class="p">))}},</span><span class="nx">program</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">){</span><span class="nx">d</span><span class="o">=</span><span class="nx">d</span><span class="o">||</span><span class="p">{};</span><span class="k">return</span> <span class="nx">a</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">.</span><span class="nx">data</span><span class="o">||</span><span class="nx">b</span><span class="p">)}},</span><span class="nx">noop</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span><span class="s2">&quot;&quot;</span><span class="p">},</span><span class="nx">invokePartial</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">f</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="nx">options</span><span class="o">=</span><span class="p">{</span><span class="nx">helpers</span><span class="o">:</span><span class="nx">d</span><span class="p">,</span><span class="nx">partials</span><span class="o">:</span><span class="nx">f</span><span class="p">,</span><span class="nx">data</span><span class="o">:</span><span class="nx">e</span><span class="p">};</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="o">===</span><span class="k">void</span> <span class="mi">0</span><span class="p">)</span><span class="k">throw</span> <span class="k">new</span> <span class="nx">Handlebars</span><span class="p">.</span><span class="nx">Exception</span><span class="p">(</span><span class="s2">&quot;The partial &quot;</span><span class="o">+</span><span class="nx">b</span><span class="o">+</span><span class="s2">&quot; could not be found&quot;</span><span class="p">);</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">a</span> <span class="k">instanceof</span> <span class="nb">Function</span><span class="p">)</span><span class="k">return</span> <span class="nx">a</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">options</span><span class="p">);</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">Handlebars</span><span class="p">.</span><span class="nx">compile</span><span class="p">)</span><span class="k">return</span> <span class="nx">f</span><span class="p">[</span><span class="nx">b</span><span class="p">]</span><span class="o">=</span><span class="nx">Handlebars</span><span class="p">.</span><span class="nx">compile</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span><span class="nx">f</span><span class="p">[</span><span class="nx">b</span><span class="p">](</span><span class="nx">c</span><span class="p">,</span><span class="nx">options</span><span class="p">);</span><span class="k">else</span> <span class="k">throw</span> <span class="k">new</span> <span class="nx">Handlebars</span><span class="p">.</span><span class="nx">Exception</span><span class="p">(</span><span class="s2">&quot;The partial &quot;</span><span class="o">+</span>
<span class="nx">b</span><span class="o">+</span><span class="s2">&quot; could not be compiled when running in runtime-only mode&quot;</span><span class="p">);}};</span><span class="nx">Handlebars</span><span class="p">.</span><span class="nx">template</span><span class="o">=</span><span class="nx">Handlebars</span><span class="p">.</span><span class="nx">VM</span><span class="p">.</span><span class="nx">template</span><span class="p">;</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 